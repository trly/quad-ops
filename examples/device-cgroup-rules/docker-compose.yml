services:
  input-device-app:
    image: docker.io/library/alpine:latest
    # Allow access to all /dev/input/* devices (mice, keyboards, joysticks)
    # Format: 'type major:minor permissions'
    # - type: 'a' (all), 'b' (block), 'c' (character)
    # - major:minor: device numbers, wildcards allowed
    # - permissions: 'r' (read), 'w' (write), 'm' (mknod)
    device_cgroup_rules:
      - 'c 13:* rmw'  # Allow all /dev/input/* devices (character devices, major 13)
    command: sleep infinity

  multi-device-app:
    image: docker.io/library/alpine:latest
    # Allow multiple device types
    device_cgroup_rules:
      - 'c 13:* rmw'     # All /dev/input/* devices
      - 'b 8:* rmw'      # All /dev/sd* block devices
      - 'c 189:* rmw'    # All USB devices
    command: sleep infinity

  specific-device-app:
    image: docker.io/library/alpine:latest
    # Allow specific device with exact major:minor
    device_cgroup_rules:
      - 'c 13:64 r'  # Read-only access to specific input device
    command: sleep infinity
