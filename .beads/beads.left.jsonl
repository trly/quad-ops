{"id":"quad-ops-0e2","content_hash":"12d2ed5a4c0a589f4ac802b248c3760d445b049b6af685d562c5a6fae857ffa8","title":"StartMany and StopMany must wait for unit generation before operations","description":"StartMany and StopMany operations fail with \"Unit not found\" when systemd units haven't been generated yet by the Quadlet generator.\n\n## Symptoms\nWhen running `quad-ops up`, services fail to start despite successful unit file writing:\n```\ntime=2025-11-09T23:49:10.550-05:00 level=ERROR msg=\"Failed to start service\" name=llm-ollama error=\"failed to start service llm-ollama: error starting unit llm-ollama.service: Unit llm-ollama.service not found.\"\n```\n\n## Root Cause\n- `StartMany()` calls `Start()` which immediately attempts `conn.StartUnit()`\n- `StopMany()` calls `Stop()` which immediately attempts `conn.StopUnit()`\n- Neither waits for the Quadlet generator to create the unit files\n- `RestartMany()` has the proper fix but `StartMany`/`StopMany` don't\n\n## Impact\n- `quad-ops up` fails to start any services after reload\n- Requires manual wait before retrying\n- Makes automation and CI unreliable\n\n## Related\n- quad-ops-5f0: Fixed RestartMany with unit generation verification\n- The fix there should be applied to StartMany and StopMany as well","acceptance_criteria":"- StartMany waits for all unit files to be generated before attempting Start operations\n- StopMany waits for all unit files to be generated before attempting Stop operations\n- Unit generation verification uses exponential backoff with timeout\n- Test coverage for both methods ensuring wait behavior works correctly","status":"open","priority":0,"issue_type":"bug","created_at":"2025-11-09T23:51:24.385096237-05:00","updated_at":"2025-11-09T23:51:24.385096237-05:00","source_repo":".","labels":["bug","critical","systemd"],"dependencies":[{"issue_id":"quad-ops-0e2","depends_on_id":"quad-ops-5f0","type":"blocks","created_at":"2025-11-09T23:51:24.392398243-05:00","created_by":"daemon"}]}
{"id":"quad-ops-0pl","content_hash":"226b0a2035a079fdd5eb8fc0a75e98b933938d8500477bbe464f44c7714805c0","title":"Update architecture documentation for current implementation","description":"The architecture.md file describes macOS launchd support as 'planned' but the codebase shows some macOS support is implemented. Update the documentation to reflect the current cross-platform capabilities and clarify what is implemented vs planned.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-06T23:24:07.694421836-05:00","updated_at":"2025-11-06T23:24:07.694421836-05:00","source_repo":".","labels":["architecture","cross-platform","documentation"],"dependencies":[{"issue_id":"quad-ops-0pl","depends_on_id":"quad-ops-79g","type":"blocks","created_at":"2025-11-06T23:24:07.702746683-05:00","created_by":"daemon"}]}
{"id":"quad-ops-0r1","content_hash":"001506e66d3ce1a9bba1ece4af8c4fb5b39fda020b093b4f1cc52798f72af9a8","title":"Fix network prefixing: external networks incorrectly project-scoped","description":"Containers are declaring dependencies on non-existent network units with incorrect project prefixes.\n\n**Error examples:**\n```\nquadlet-generator: converting \\\"dozzle-web.container\\\": unable to translate dependency for dozzle-infrastructure-proxy.network\nquadlet-generator: converting \\\"llm-ollama.container\\\": unable to translate dependency for llm-infrastructure-proxy.network\n```\n\n**Root cause:** The `convertNetworkMode` function in spec_converter.go incorrectly prefixes external/shared networks that should NOT be prefixed.\n\n**Expected behavior:** \n- Services from different projects (dozzle, llm, scrutiny, beszel) should share a single `infrastructure-proxy.network`\n- References should NOT include project prefix for external networks\n- Current code prefixes all networks with project name when it shouldn't\n\n**Investigation needed:**\n1. Check compose files for unprefixed network declarations\n2. Review `convertNetworkMode` logic for when to apply project prefix\n3. Determine if external/shared networks need different handling\n4. Add validation to catch this during spec conversion\n\n**Effect:** Quadlet generator fails because containers reference non-existent network units like `dozzle-infrastructure-proxy.network` instead of `infrastructure-proxy.network`\n\n**Part of:** https://github.com/trly/quad-ops/discussions/52 (Quadlet generator analysis)","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-09T12:22:21.907487354-05:00","updated_at":"2025-11-09T12:22:48.476106902-05:00","closed_at":"2025-11-09T12:22:48.476106902-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-0r1","depends_on_id":"quad-ops-1sn","type":"blocks","created_at":"2025-11-09T12:22:21.908291674-05:00","created_by":"daemon"},{"issue_id":"quad-ops-0r1","depends_on_id":"quad-ops-712","type":"related","created_at":"2025-11-09T12:22:25.12696974-05:00","created_by":"daemon"}]}
{"id":"quad-ops-0rf","content_hash":"b3dd0ea21cf99ede6eb2485f57168da24999f23be1ed933b44a0ff9bc919b727","title":"Update command reference documentation","description":"The command-reference/_index.md and individual command docs need updates:\n- Remove references to non-existent commands (like 'deps')\n- Update sync.md to use correct config field names ('ref' not 'target', no 'cleanup' section)\n- Ensure all actual commands are documented with correct options\n- Add missing command documentation for newer commands\n- Update global options to match current implementation","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-06T23:24:12.507417051-05:00","updated_at":"2025-11-06T23:24:12.507417051-05:00","source_repo":".","labels":["cli","commands","documentation"],"dependencies":[{"issue_id":"quad-ops-0rf","depends_on_id":"quad-ops-79g","type":"blocks","created_at":"2025-11-06T23:24:12.510679623-05:00","created_by":"daemon"}]}
{"id":"quad-ops-167","content_hash":"d0a21c1b025c1b3e163e4dbaf9cba2eb171cd2771c8ceef283433ad15cb177dc","title":"Missing Compose feature: devices mapping","description":"v0.21.2 supported device mappings via PodmanArgs. Current spec_converter doesn't convert devices from compose services.","design":"Add Container.Devices field in models.go. Convert service.Devices in spec_converter. Render via PodmanArgs (--device) in systemd renderer.","acceptance_criteria":"- devices in compose convert to container fields\n- Rendered as PodmanArgs with --device flags\n- Test coverage for devices conversion","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-09T13:44:34.781104-05:00","updated_at":"2025-11-09T15:40:37.774452-05:00","closed_at":"2025-11-09T15:40:37.774452-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-167","depends_on_id":"quad-ops-hlf","type":"parent-child","created_at":"2025-11-09T13:44:34.78157-05:00","created_by":"daemon"}]}
{"id":"quad-ops-16l","content_hash":"2071ed4f4d3e29053f9e8420ffa85a5a10e1d3b81ebf4eb794ebdb3281bc8556","title":"Implement rootlessport cleanup for orphaned processes causing port binding conflicts","description":"Fixed port binding conflicts caused by orphaned rootlessport processes from failed podman container starts. Implemented cleanup that runs before service operations and after failures.\n\nChanges made:\n- Added cleanupOrphanedRootlessportProcesses() function using pgrep to find and kill orphaned processes\n- Enhanced error logging in waitForActivation to show detailed systemd failure reasons\n- Modified StartMany/RestartMany to run cleanup after any service failures\n- Added comprehensive PID validation and safe process termination\n\nThis resolves the \"bind: address already in use\" errors that occurred when services failed to start previously.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-07T00:39:23.65195325-05:00","updated_at":"2025-11-07T00:39:25.904195201-05:00","closed_at":"2025-11-07T00:39:25.904195201-05:00","source_repo":".","labels":["lifecycle","port-binding","rootlessport","systemd"]}
{"id":"quad-ops-1bz","content_hash":"a404357b7680c04ca26422e1e4f0f32c586ebdc54e3f275fadd0bef427fe56ee","title":"builds are not happening on every commit","description":"","design":"Current state:\n- build.yml has artifact upload gated to tags only (line 84: `if: startsWith(github.ref, 'refs/tags/')`)\n- This prevents artifacts from being saved on regular commits\n- release.yaml cannot access previously-built artifacts on tags\n\nDesired state:\n- build.yml builds and saves artifacts on every commit\n- release.yaml on tag triggers, uses cached/saved artifacts instead of rebuilding\n\nSolution:\n- Remove the conditional on artifact upload\n- Upload artifacts with retention across all builds\n- Let release.yaml depend on those artifacts being available","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-08T21:49:37.458463045-05:00","updated_at":"2025-11-08T22:08:03.7504637-05:00","closed_at":"2025-11-08T22:08:03.7504637-05:00","source_repo":"."}
{"id":"quad-ops-1hk","content_hash":"63bbe852762170e6a881187ce91b92e354e3b75283adc180f8376d2e712203d3","title":"Update release.yaml to use pre-built artifacts instead of rebuilding","description":"Modify release.yaml to download and reuse artifacts from the build workflow instead of running GoReleaser to rebuild. This avoids redundant builds when a tag is pushed.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-08T21:51:04.598015666-05:00","updated_at":"2025-11-08T22:08:03.714113485-05:00","closed_at":"2025-11-08T22:08:03.714113485-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-1hk","depends_on_id":"quad-ops-1bz","type":"discovered-from","created_at":"2025-11-08T21:51:04.602109397-05:00","created_by":"daemon"}]}
{"id":"quad-ops-1i5","content_hash":"36a751f2c90209c0180f70b92b153be9ca4dd78c8e0e5ff0abb127d1c922b672","title":"Test: launchd platform network handling","description":"Add tests for launchd renderer with external networks to ensure cross-platform consistency.\n\nCurrently launchd platform is not well-tested for network scenarios. Need to verify:\n- External networks are handled correctly in plist generation\n- Network dependencies are represented correctly in launchd format\n- Service startup order respects external network dependencies\n\nThis ensures the network prefixing fix works consistently across both systemd (Linux) and launchd (macOS) platforms.","status":"open","priority":4,"issue_type":"task","created_at":"2025-11-09T12:32:26.443583299-05:00","updated_at":"2025-11-09T12:32:26.443583299-05:00","source_repo":"."}
{"id":"quad-ops-1n4","content_hash":"550ecd4dcbd0144c3080efad1df6d2332485312825ecf6b42a1c554b666ee795","title":"examples do not deploy","description":"The example configs do not deploy. Investigate if this is an issue with the current state of quad-ops, or a problem with the example compose files\n","acceptance_criteria":"./quad-ops -u up should start up example services","notes":"## Investigation Results\n\n**Root Cause Identified**: Services were failing to start with \"Unit \u003cservice\u003e.service not found\" because of a naming mismatch between volume/network references in container files and the actual volume/network unit file names.\n\n### The Problem\n- Quad-ops was generating volume/network unit files with names like `init-containers-init-containers_shared-data.volume` (double-prefixed)\n- But container files referenced volumes as `shared-data.volume` \n- The podman-systemd-generator failed to process containers that referenced missing volume units\n\n### The Fix\nModified the spec converter to avoid double-prefixing resource names:\n\n1. **convertProjectVolumes/Networks**: Only apply project prefix if the name doesn't already contain the project name (prevents double-prefixing when reader already prefixed)\n\n2. **convertVolumeMounts**: Prefix mount sources with `project_` to match the volume names set by the reader\n\n### Current Status\n- ✅ Services are now recognized by systemd (no more \"Unit not found\" errors)\n- ✅ Volume and network references are consistent\n- ⚠️ Services now fail with legitimate errors instead of discovery failures\n- Current failures are due to:\n  - Init container failures preventing dependent services from starting\n  - Podman image resolution issues (unqualified image names require registries.conf configuration)\n\n### Additional Issues Found\n**Image Registry Configuration**: Quad-ops uses unqualified image names from compose files (e.g., `nginx:alpine`), but podman requires unqualified-search registries to be configured in `/etc/containers/registries.conf`.\n\n**Work Needed**:\n1. ✅ **Fixed**: Volume/network naming consistency \n2. **Optional**: Update quad-ops to use fully qualified image names or document registry requirements\n\nThe core systemd integration issue is resolved. Services can now be discovered and managed by systemd.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-06T21:30:19.502511756-05:00","updated_at":"2025-11-06T23:39:43.908874797-05:00","closed_at":"2025-11-06T23:39:37.254202295-05:00","source_repo":"."}
{"id":"quad-ops-1qw","content_hash":"3655d4b7d4ba8387ac9be9aca97fa6c74f75a1ad6644851bb798b5dc6669618f","title":"Fix documentation navigation and missing sections","description":"The docs index references sections that don't exist or have wrong filenames:\n- 'Getting Started' links to 'getting-started' but file is 'quick-start.md'\n- 'Podman-systemd (Quadlet)' section doesn't exist\n- 'Release Notes' section doesn't exist\n- Fix broken internal links and ensure navigation is consistent","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-06T23:24:05.749177758-05:00","updated_at":"2025-11-06T23:24:05.749177758-05:00","source_repo":".","labels":["documentation","navigation","site"],"dependencies":[{"issue_id":"quad-ops-1qw","depends_on_id":"quad-ops-79g","type":"blocks","created_at":"2025-11-06T23:24:05.758314474-05:00","created_by":"daemon"}]}
{"id":"quad-ops-1sn","content_hash":"307b5bcbbeceee32dc624b7ec3ce05974d12435e268a03ac0dec8cef6a6bd18d","title":"Investigate: containers referencing non-existent network units","description":"Containers are declaring dependencies on non-existent network units with incorrect project prefixes.\n\n**Error examples:**\n```\nquadlet-generator: converting \"dozzle-web.container\": unable to translate dependency for dozzle-infrastructure-proxy.network\nquadlet-generator: converting \"llm-ollama.container\": unable to translate dependency for llm-infrastructure-proxy.network\nquadlet-generator: converting \"llm-open-webui.container\": unable to translate dependency for llm-infrastructure-proxy.network\nquadlet-generator: converting \"scrutiny-web.container\": unable to translate dependency for scrutiny-infrastructure-proxy.network\nquadlet-generator: converting \"beszel-hub.container\": unable to translate dependency for beszel-infrastructure-proxy.network\n```\n\n**Root cause:** The `convertNetworkMode` function in spec_converter.go incorrectly prefixes external/shared networks that should NOT be prefixed.\n\n**Expected behavior:** \n- Services from different projects (dozzle, llm, scrutiny, beszel) should share a single `infrastructure-proxy.network`\n- References should NOT include project prefix for external networks\n- Current code prefixes all networks with project name when it shouldn't\n\n**Investigation needed:**\n1. Check compose files for unprefixed network declarations\n2. Review `convertNetworkMode` logic for when to apply project prefix\n3. Determine if external/shared networks need different handling\n4. Add validation to catch this during spec conversion\n\n**Effect:** Quadlet generator fails because containers reference non-existent network units like `dozzle-infrastructure-proxy.network` instead of `infrastructure-proxy.network`\n\n**Part of:** https://github.com/trly/quad-ops/discussions/52 (Quadlet generator analysis)","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-09T12:20:44.125213196-05:00","updated_at":"2025-11-09T12:31:51.930354054-05:00","closed_at":"2025-11-09T12:31:51.930354054-05:00","source_repo":"."}
{"id":"quad-ops-1vw","content_hash":"6a1d79c3a74969666742c6ae65d87f219161506f6521f11f8bfc0aa4d9f71fff","title":"Restore Linux build units functionality","description":"The systemd platform should properly render .build unit files for container build configurations. Currently build specs are not rendered as separate units.\n\nNeed to:\n- Ensure renderService creates separate artifacts for build specs in spec.Container.Build\n- Implement proper Quadlet build unit rendering with build arguments, contexts, and all options\n- Add build dependencies to container units (After/Requires)\n- Test that build units are created and execute properly\n\nThis restores the Linux-specific build management that was lost in the cross-platform abstraction.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-06T21:39:31.468441203-05:00","updated_at":"2025-11-06T22:03:01.009086528-05:00","closed_at":"2025-11-06T22:03:01.009086528-05:00","source_repo":".","labels":["build","linux","platform-specific","quadlet"]}
{"id":"quad-ops-1wy","content_hash":"8bccf9ad1e7836051469de957b82247cf34d5f2036d3b94b3c0cc8249b72c7db","title":"Init containers lost volumes/networks/env - only support image/command","description":"convertInitContainers only supports image/command, drops volumes/networks/env. Old behavior likely executed init with the same mounts/networks as main service for DB migrations, etc.","design":"At minimum, allow init containers to share the main service's mounts and env (or accept optional mounts/env in x-quad-ops-init) so they can perform meaningful initialization. Keep Linux-only restriction.","acceptance_criteria":"- Init containers can mount volumes for migrations\n- Init containers share network with main service\n- Init containers can access environment variables","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-09T13:44:34.759598-05:00","updated_at":"2025-11-09T15:16:32.262469-05:00","closed_at":"2025-11-09T15:16:32.262469-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-1wy","depends_on_id":"quad-ops-hlf","type":"parent-child","created_at":"2025-11-09T13:44:34.760358-05:00","created_by":"daemon"}]}
{"id":"quad-ops-22e","content_hash":"d24d4efad4b94c92cc646ddf56fa297f950a50a74221b9276f585a5f25f986c2","title":"Race condition: systemd generator not finished when services are restarted","description":"Services fail to restart after sync with error: \"Unit llm-open-webui.service not found\"\n\nThe `.container` files ARE written to `/etc/containers/systemd/`, but when quad-ops tries to restart the services immediately after calling `daemon-reload`, systemd reports the units don't exist.\n\n## Root Cause\nThe D-Bus `Reload()` call in lifecycle.go is asynchronous and doesn't wait for the systemd Quadlet generator to finish processing the new `.container` files. The sequence is:\n\n1. ✅ Write .container files to /etc/containers/systemd/\n2. ⚠️ Call Lifecycle.Reload() (async - returns immediately)\n3. ❌ Call Lifecycle.RestartMany() (tries to restart, but .service units haven't been generated yet)\n\nThe systemd Quadlet generator runs during daemon-reload but may not finish before the restart attempts.\n\n## Evidence\n- Files ARE written: `llm-ollama.container`, `llm-open-webui.container` visible in /etc/containers/systemd/\n- But systemd says units don't exist when RestartMany() tries to restart them\n- Timestamps show files were written at the same time as the error\n\n## Impact\nServices fail to restart after sync/up operations, even though artifacts were written successfully. This is intermittent/timing-dependent.","acceptance_criteria":"Implement proper synchronization between Reload() and unit availability:\n1. Add wait/poll mechanism after Reload() to ensure units are generated\n2. Implement unit existence check with retry + exponential backoff\n3. Fail with clear diagnostic if units don't appear\n4. Add timeout configuration\n\nWrite tests that verify units exist after reload before restart.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-08T21:16:25.268423351-05:00","updated_at":"2025-11-09T23:46:59.712268371-05:00","closed_at":"2025-11-09T23:46:59.712268371-05:00","source_repo":".","labels":["bug","quadlet","race-condition","systemd"]}
{"id":"quad-ops-24q","content_hash":"eb0f0c3569e29638051e86e2017db9f929ad3e670be28d18755bd6d7dc71d49b","title":"Memory and CPU resource constraints not rendered to unit files","description":"Memory and CPU resource constraints from Docker Compose are silently dropped during rendering.\n\nThe Container struct has Resources field with Memory, MemoryReservation, MemorySwap, CPUShares, CPUQuota, CPUPeriod, but the systemd renderer never outputs these to the unit file.\n\nAffected directives:\n- Memory= (from Container.Resources.Memory)\n- MemoryReservation= (from Container.Resources.MemoryReservation)\n- MemorySwap= (from Container.Resources.MemorySwap)\n- CPUShares, CPUQuota, CPUPeriod (need research on Quadlet mapping)\n\nResult: Container resource limits are silently lost during conversion from Docker Compose to systemd units.","acceptance_criteria":"Write tests first. Implement rendering of Memory, MemoryReservation, MemorySwap directives. Research and document CPU constraint mapping (may need PodmanArgs or additional Quadlet fields).","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-08T21:09:03.008884345-05:00","updated_at":"2025-11-08T21:40:01.08546212-05:00","closed_at":"2025-11-08T21:40:01.08546212-05:00","source_repo":".","labels":["bug","compatibility","quadlet"]}
{"id":"quad-ops-26t","content_hash":"743f4ae42fb959e741c60dbd7046afe99f9d30142df09a248d99b00ad562fc02","title":"Add dependency metadata fields to launchd plist structure","description":"internal/platform/launchd/plist.go: The plist Service struct lacks dependency metadata fields needed to support ordered service startup/shutdown.\n\nLaunchd uses plist property lists for service definitions but currently doesn't include dependency information. Need to add fields comparable to systemd's After and Requires directives.\n\nThis is prerequisite work for properly implementing dependency-aware lifecycle management in launchd, matching systemd's capabilities.\n\nAnalysis: See history/quad-ops-9y2-improve-cross-platform-dependency-management.md for detailed improvement plan.","acceptance_criteria":"plist.Service struct includes DependsOn or similar field for service dependencies, enabling launchd renderer to generate dependency information in plist files","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-08T16:01:22.081088495-05:00","updated_at":"2025-11-08T18:00:10.461366246-05:00","closed_at":"2025-11-08T18:00:10.461366246-05:00","source_repo":".","labels":["dependencies","launchd","platform-specific"],"dependencies":[{"issue_id":"quad-ops-26t","depends_on_id":"quad-ops-w84","type":"related","created_at":"2025-11-08T16:01:33.113311703-05:00","created_by":"daemon"}]}
{"id":"quad-ops-274","content_hash":"3464c075753c725a0f83726311ac95229c970a2971b22671d71f2eca31389b22","title":"Create Release Notes documentation section","description":"The docs index references a 'Release Notes' section that doesn't exist. Create this section to document:\n- Current version features and changes\n- Migration guides for breaking changes\n- Known issues and workarounds\n- Future roadmap items\n- Changelog format and maintenance process","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-06T23:24:16.603757397-05:00","updated_at":"2025-11-06T23:24:16.603757397-05:00","source_repo":".","labels":["changelog","documentation","releases"],"dependencies":[{"issue_id":"quad-ops-274","depends_on_id":"quad-ops-79g","type":"blocks","created_at":"2025-11-06T23:24:16.611438057-05:00","created_by":"daemon"}]}
{"id":"quad-ops-2bs","content_hash":"4c3300a7e08fce6ed98bc84d4fa43024476c81828ae786cb4e465ca4f1d1cc2b","title":"Add platform-specific feature validation and warnings","description":"Users should be warned when using features that don't work on their platform. Need to add validation during spec conversion.\n\nNeed to:\n- Detect when Quadlet-specific features (volumes, networks, builds) are used on macOS\n- Add validation warnings/errors during spec conversion\n- Update compose reader to flag unsupported features per platform\n- Add platform capability checking\n- Test validation works correctly for both platforms\n\nThis will prevent user confusion and provide clear feedback about platform limitations.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-06T21:39:40.863822782-05:00","updated_at":"2025-11-06T21:39:40.863822782-05:00","source_repo":".","labels":["cross-platform","user-experience","validation"],"dependencies":[{"issue_id":"quad-ops-2bs","depends_on_id":"quad-ops-6cz","type":"blocks","created_at":"2025-11-06T21:39:48.664022136-05:00","created_by":"daemon"}]}
{"id":"quad-ops-3aq","content_hash":"fa0ded88e9f3b15fc1c0ed67e8184385190a3e461945d71fdcfc07d40f7e659e","title":"Update documentation to clarify platform differences","description":"The current documentation claims full Docker Compose support but this is misleading for macOS. Need to clearly document platform differences.\n\nNeed to:\n- Update README.md to clarify platform-specific feature support\n- Add platform comparison table in documentation\n- Update feature claims to be platform-specific\n- Add migration guide for users moving between platforms\n- Update examples to show platform differences\n\nThis will set proper user expectations and prevent confusion about feature availability.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-06T21:39:43.446055828-05:00","updated_at":"2025-11-06T21:39:43.446055828-05:00","source_repo":".","labels":["documentation","platform-differences","user-experience"],"dependencies":[{"issue_id":"quad-ops-3aq","depends_on_id":"quad-ops-2bs","type":"blocks","created_at":"2025-11-06T21:39:50.509568025-05:00","created_by":"daemon"}]}
{"id":"quad-ops-3i1","content_hash":"6c4bf6ce1bd3f5008d0315e5452becdea9822732d8f91f5fdf11af8f7eca285b","title":"x-podman-* extensions documented but not implemented","description":"README documents x-podman-buildargs and x-podman-volumes extensions but they're not wired up in code.\n\nEvidence: grep -r \"x-podman-\" internal/ finds nothing\n\nRisk: Documentation promises features that don't work","design":"Options:\n1. Implement extensions:\n   - x-podman-buildargs: Read from service.Extensions, add to build.PodmanArgs\n   - x-podman-volumes: Read from service.Extensions, parse into Mounts or Container.PodmanArgs\n   \n2. Remove from README until implemented\n\nRecommendation: Remove from README for now, implement when users request it.\n\nIf implementing:\n- Parse extensions in spec_converter.go:convertService()\n- Check for map[\"x-podman-buildargs\"], map[\"x-podman-volumes\"]\n- Type assert and convert to appropriate fields\n- Add test coverage with compose files using extensions","acceptance_criteria":"Either:\nA) Extensions are implemented and tested, OR\nB) Extensions are removed from README with TODO note\n\nIf implementing:\n- x-podman-buildargs adds to build args\n- x-podman-volumes adds to mounts or podman args\n- Test coverage for extensions","status":"closed","priority":3,"issue_type":"bug","created_at":"2025-11-09T16:40:17.290625-05:00","updated_at":"2025-11-09T23:12:22.492706-05:00","closed_at":"2025-11-09T23:12:22.492706-05:00","source_repo":"."}
{"id":"quad-ops-3kb","content_hash":"9d00968b3fd11c9aee313b2f739d0b5a55bbead668ec9b3690504551c6466de7","title":"Fix volume name escaping: underscore vs hyphen mismatch","description":"Volume mount sources are prefixed with underscores in spec_converter.go (lines 236, 248) but volumes are created with hyphens via SanitizeName().\n\n**Location:** internal/compose/spec_converter.go lines 236 and 248\n\n**Current behavior:**\n```go\nmount.Source = fmt.Sprintf(\"%s_%s\", project.Name, v.Source)  // Uses underscore\n```\n\n**Expected behavior:**\nShould use the Prefix() helper that uses hyphens:\n```go\nmount.Source = compose.Prefix(project.Name, v.Source)  // Creates with hyphen\n```\n\n**Effect:** Volume references fail because quadlet looks for `miniflux_db_data` (underscores) when the actual volume is `miniflux-db-data` (hyphens).\n\n**Part of:** https://github.com/trly/quad-ops/discussions/52 (Quadlet generator analysis)","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-09T12:22:21.88470299-05:00","updated_at":"2025-11-09T12:24:15.593588877-05:00","closed_at":"2025-11-09T12:24:15.593588877-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-3kb","depends_on_id":"quad-ops-712","type":"blocks","created_at":"2025-11-09T12:22:21.885666818-05:00","created_by":"daemon"}]}
{"id":"quad-ops-3km","content_hash":"ff4d51182cee6932d1820a2219930d84f808d90d7d221916b701458f812aa003","title":"multi-service/docker-compose.yaml - invalid secret names","description":"$ ./quad-ops validate examples/multi-service/docker-compose.yaml\ntime=\"2025-11-06T21:45:52-05:00\" level=warning msg=\"/home/trly/github.com/trly/quad-ops/examples/multi-service/docker-compose.yaml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion\"\ntime=2025-11-06T21:45:52.079-05:00 level=WARN msg=\"Secret name doesn't follow DNS naming conventions\" name=db_password\ntime=2025-11-06T21:45:52.079-05:00 level=WARN msg=\"Secret name doesn't follow DNS naming conventions\" name=db_password\ntime=2025-11-06T21:45:52.079-05:00 level=WARN msg=\"Secret name doesn't follow DNS naming conventions\" name=db_password\n\n","status":"closed","priority":4,"issue_type":"bug","created_at":"2025-11-06T21:47:01.808506075-05:00","updated_at":"2025-11-06T23:18:05.229118677-05:00","closed_at":"2025-11-06T23:18:05.229118677-05:00","source_repo":"."}
{"id":"quad-ops-3ks","content_hash":"c61508563313532b1076ee6c3e6adcf7b5ac2a4ae59e71789bc638c1a8cf8900","title":"Fix gosec linting issues in test files","description":"The gosec security linter was disabled due to issues with test files. Need to properly address the security warnings:\n\n- G304: Potential file inclusion via variable (os.ReadFile in tests)\n- G301: Directory permissions should be 0750 or less (os.MkdirAll with 0755)\n- G306: File permissions should be 0600 or less (os.WriteFile with 0644)\n\nThese are legitimate security concerns that should be addressed rather than disabling the linter.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T21:22:59.338099854-05:00","updated_at":"2025-11-06T21:25:01.369839516-05:00","closed_at":"2025-11-06T21:25:01.369839516-05:00","source_repo":"."}
{"id":"quad-ops-3l1","content_hash":"9d4a2af53daafd2382af08c8c75c4897352c55f643f61f2c06ed055eb7ec3854","title":"Fix launchd BuildPodmanArgs to include service-level networks","description":"BuildPodmanArgs in launchd/podmanargs.go only handles spec.Container.Network.Mode but ignores spec.Networks. \n\nNeed to iterate through spec.Networks and add --network flag for each non-external network. This should be done after the Network.Mode handling to allow proper network connection to all declared networks.\n\nCurrently lines 82-84 only handle the singular network mode. Need to add loop similar to:\n```\nfor _, net := range spec.Networks {\n  if !net.External {\n    args = append(args, \"--network\", net.Name)\n  }\n}\n```","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-08T16:53:50.915906276-05:00","updated_at":"2025-11-08T16:55:44.080855742-05:00","closed_at":"2025-11-08T16:55:44.080855742-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-3l1","depends_on_id":"quad-ops-hak","type":"blocks","created_at":"2025-11-08T16:53:50.921362078-05:00","created_by":"daemon"}]}
{"id":"quad-ops-3x9","content_hash":"cb3df01684305186c8f7f59fd471acf82ffaab2384a9139a6f592b75369642f7","title":"Update examples to use fully qualified image references","description":"The example compose files use unqualified image names (e.g., nginx:alpine) that fail to resolve without proper podman registry configuration. Update all examples to use fully qualified image references (e.g., docker.io/library/nginx:alpine) to ensure they work out of the box.","acceptance_criteria":"./quad-ops -u sync \u0026\u0026 ./quad-ops -u up are successful","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T23:41:08.908702281-05:00","updated_at":"2025-11-06T23:42:44.677415917-05:00","closed_at":"2025-11-06T23:42:44.677415917-05:00","source_repo":"."}
{"id":"quad-ops-3zb","content_hash":"acc0c96e8ddaf026c1eb099eaf06f6294655b90d8d30512dc4322f73e61bfbc9","title":"Add diagnostic tooling to detect systemd generator issues","description":"When units fail to restart, users should have clear diagnostic information:\n\n1. **Check if Quadlet generator is installed**:\n   - Verify `/usr/lib/systemd/system-generators/podman-system-generator` exists\n   - Or equivalent generator based on Podman version\n\n2. **Detect if .container file exists but .service doesn't**:\n   - Compare artifact files vs systemd unit database\n   - Clear error message: \"Unit file written but generator didn't create service\"\n\n3. **Debug helper command**:\n   - `quad-ops debug systemd` - checks generator status, unit cache, recent errors\n   - Show systemd journal for generator failures\n\n4. **Better error messages**:\n   - Instead of generic \"Unit not found\"\n   - Say: \"llm-open-webui.container written but llm-open-webui.service not generated. Generator may not be installed or daemon-reload may have failed.\"","acceptance_criteria":"Implement diagnostic checks in lifecycle manager. Add verbose logging that helps debug generator issues. Consider adding a debug subcommand for troubleshooting systemd problems.","status":"open","priority":1,"issue_type":"task","created_at":"2025-11-08T21:16:25.311451587-05:00","updated_at":"2025-11-08T21:16:25.311451587-05:00","source_repo":".","labels":["observability","systemd","task"]}
{"id":"quad-ops-460","content_hash":"bd62b01e8ec649d2de9efcb18050c760e632b2f90298a9dc583a54768b1cd5f5","title":"Add launchd Podman flag parity tests","description":"Write launchd-specific unit tests in internal/platform/launchd/podmanargs_test.go that enforce emission of --add-host, --dns/--dns-search/--dns-opt, --device, and tmpfs-with-options Podman flags. The new tests should fail prior to implementation, documenting the current gaps.","notes":"Test expectations:\n- Extra host and DNS assertions should reflect alphabetically sorted order (matching converter output).\n- Tmpfs mode assertions should align with cross-platform-compatible formatting (mirror systemd renderer behavior).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-09T18:44:25.937087-05:00","updated_at":"2025-11-09T18:50:34.624626-05:00","closed_at":"2025-11-09T18:50:34.624626-05:00","source_repo":".","labels":["launchd","testing"]}
{"id":"quad-ops-494","content_hash":"c05c31f3830e77b375733852ff55b36f5167dcab652d7ba474291820435355dd","title":"Add TimeoutStartSec to Service section for image pull resilience","description":"Podman documentation recommends setting TimeoutStartSec=900 (15 minutes) because pulling container images can exceed systemd's default 90-second timeout.\n\nCurrently the renderer doesn't set this, which could cause startup failures on slow networks or with large images.\n\nSee: https://docs.podman.io/en/latest/markdown/podman-systemd.unit.5.html\n\nRecommendation: Add TimeoutStartSec=900 to [Service] section for all regular containers.","acceptance_criteria":"Add TimeoutStartSec directive to [Service] section generation. Make it configurable (with sensible default 900). Add documentation about why this is important.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-08T21:09:03.063099484-05:00","updated_at":"2025-11-08T21:47:25.18679628-05:00","closed_at":"2025-11-08T21:47:25.18679628-05:00","source_repo":".","labels":["production","quadlet","task"]}
{"id":"quad-ops-4a3","content_hash":"4981e0023f7076c8240e1807dcfd52990423aca51364814e98fb15503231b352","title":"Validate fix with quad-ops-deploy immich configuration","description":"Test the fix against the actual failing configuration in quad-ops-deploy/prod/taylor/media/.\n\nSteps:\n1. Generate quad-ops configuration from the immich docker-compose.yml\n2. Verify immich-server is connected to both 'default' and 'infrastructure-proxy' networks\n3. Verify immich-redis and immich-database are on the same networks as immich-server\n4. Verify systemd/launchd units have correct --network flags\n5. Verify unit dependencies include network units\n6. Test actual startup to confirm DNS resolution works\n\nThis validates the fix solves the original reported problem.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-08T15:58:10.388773046-05:00","updated_at":"2025-11-08T17:44:05.136871982-05:00","closed_at":"2025-11-08T17:44:05.136871982-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-4a3","depends_on_id":"quad-ops-wib","type":"blocks","created_at":"2025-11-08T15:58:10.393389294-05:00","created_by":"daemon"}]}
{"id":"quad-ops-4i2","content_hash":"3f1627f12b43021f3a528c6e11ef6f9ee91f1c47f94dc46262f7b174cfb7d89f","title":"Missing Compose feature: dns/dns_search/dns_opt","description":"v0.21.2 supported DNS settings via PodmanArgs. Current spec_converter doesn't convert dns/dns_search/dns_opt from compose services.","design":"Add Container.DNS, Container.DNSSearch, Container.DNSOpt fields in models.go. Convert service.DNS/DNSSearch/DNSOpts in spec_converter. Render via PodmanArgs (--dns, --dns-search, --dns-opt) in systemd renderer.","acceptance_criteria":"- dns settings in compose convert to container fields\n- Rendered as PodmanArgs with correct flags\n- Test coverage for DNS conversion","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-09T13:44:34.774623-05:00","updated_at":"2025-11-09T15:13:47.726614-05:00","closed_at":"2025-11-09T15:13:47.726614-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-4i2","depends_on_id":"quad-ops-hlf","type":"parent-child","created_at":"2025-11-09T13:44:34.775053-05:00","created_by":"daemon"}]}
{"id":"quad-ops-4ki","content_hash":"8b4cc044270fa70adc68a00e1e924554554db43996307737b5c79ee926e75e42","title":"Reduce cyclomatic complexity in launchd/podmanargs.go BuildPodmanArgs","description":"BuildPodmanArgs function has cyclomatic complexity of 31 (threshold: 30).\n\nLocation: internal/platform/launchd/podmanargs.go:14:1\n\nNeeds refactoring to break down the large function into smaller, more focused helper functions.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T17:54:18.38401-05:00","updated_at":"2025-11-09T17:56:23.959183-05:00","closed_at":"2025-11-09T17:56:23.959183-05:00","source_repo":"."}
{"id":"quad-ops-4kk","content_hash":"c1026b098977e4fa504918b78770ee413880ac48567a74d687c93b225138b8cc","title":"Render tmpfs mounts with options via launchd --tmpfs flags","description":"Extend internal/platform/launchd/podmanargs.go so tmpfs mounts (including entries from service.Container.Mounts with TmpfsOptions as well as legacy Container.Tmpfs strings) produce the correct podman --tmpfs arguments, formatting size/mode/uid/gid consistently. Ensure new tmpfs tests pass.","notes":"Implementation guidance:\n- Format tmpfs --tmpfs arguments so mode values follow the same convention as the systemd renderer (cross-platform compatible decimal formatting).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-09T18:45:03.542038-05:00","updated_at":"2025-11-09T19:01:20.368281-05:00","closed_at":"2025-11-09T19:01:20.368281-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-4kk","depends_on_id":"quad-ops-460","type":"blocks","created_at":"2025-11-09T18:45:03.542513-05:00","created_by":"daemon"},{"issue_id":"quad-ops-4kk","depends_on_id":"quad-ops-sly","type":"blocks","created_at":"2025-11-09T18:45:03.542793-05:00","created_by":"daemon"}]}
{"id":"quad-ops-4pn","content_hash":"21f5036988558aed7bc75547306ad4e092819eeb8ecdd5c38663f93b728a0459","title":"Update systemd renderer to connect services to their declared networks","description":"Update internal/platform/systemd/renderer.go to handle service-level networks.\n\nThe renderer needs to:\n1. Extract service networks from spec.Networks\n2. Add --network flags for each network in the podman run command\n3. Generate proper unit file dependencies (After/Requires) for service networks\n4. Ensure services are started after their networks are available\n\nThis should follow the pattern used in v0.21.2 where services had explicit network connections.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-08T15:57:59.636269116-05:00","updated_at":"2025-11-08T16:55:43.866412286-05:00","closed_at":"2025-11-08T16:55:43.866412286-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-4pn","depends_on_id":"quad-ops-69e","type":"blocks","created_at":"2025-11-08T15:57:59.640240873-05:00","created_by":"daemon"}]}
{"id":"quad-ops-581","content_hash":"6267418dbd11e20c1f4d6acda4d39166e756edc292da2ffe83787d301b547588","title":"Missing RequiresMountsFor directives for bind mounts","description":"Containers with bind mounts don't declare RequiresMountsFor dependencies, risking start before host paths are available (especially with NFS/network mounts).","design":"Parse Mount.Type == MountTypeBind and collect source paths. Add RequiresMountsFor=/host/path directives in [Unit] section. Location: renderContainer() around line 145 after dependency declarations.","acceptance_criteria":"- Bind mounts have RequiresMountsFor directives\n- Multiple bind mounts list all paths\n- Non-bind mounts don't add RequiresMountsFor","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-11-09T13:44:34.737856-05:00","updated_at":"2025-11-09T14:35:29.509538-05:00","closed_at":"2025-11-09T14:35:29.509538-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-581","depends_on_id":"quad-ops-hlf","type":"parent-child","created_at":"2025-11-09T13:44:34.738432-05:00","created_by":"daemon"}]}
{"id":"quad-ops-58x","content_hash":"ad4bf6d8d3a030e27f9b794cb4cff369bcd816847681d5e6ab7400933d3e28b5","title":"Document CPU constraint limitations and alternatives","description":"Add documentation explaining that Quadlet has no native CPU constraint directives, and CPU limits must be passed via PodmanArgs. Document the mapping between Docker Compose deploy.resources CPU fields and Podman CLI flags.","acceptance_criteria":"- Documentation added to README or docs/ explaining CPU constraint handling\n- Mapping documented: compose.cpus -\u003e --cpus, deploy.cpu_quota -\u003e --cpu-quota, etc.\n- Limitations clearly stated (no direct Quadlet directive support)\n- Examples provided for common use cases","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-08T21:37:08.306568014-05:00","updated_at":"2025-11-08T21:37:08.306568014-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-58x","depends_on_id":"quad-ops-24q","type":"parent-child","created_at":"2025-11-08T21:37:08.308453626-05:00","created_by":"daemon"}]}
{"id":"quad-ops-5f0","content_hash":"a8af9ff21929b898c8d5c09d489afcef7545f7840e4ed66e116d71ccf1347c64","title":"Fix service restart failures after unit generation verification","description":"Services fail to restart after sync despite successful unit generation verification.\n\n## Symptoms\nWhen running `sync -f`, the logs show:\n1. `waitForUnitGeneration()` succeeds for all 5 units\n2. \"Unit generated successfully\" logged for each unit\n3. Immediately after, restart fails with \"Unit not found\"\n\nExample:\n```\ntime=2025-11-09T10:51:23.930-05:00 level=DEBUG msg=\"Unit generated successfully\" unit=llm-open-webui.service attempts=1\n...\ntime=2025-11-09T10:51:23.934-05:00 level=ERROR msg=\"Failed to restart service\" name=llm-open-webui error=\"failed to restart service llm-open-webui: error restarting unit llm-open-webui.service: Unit llm-open-webui.service not found.\"\n```\n\n## Root Cause Investigation Needed\n1. **D-Bus caching issue**: Unit properties available via GetUnitProperties but RestartUnit fails\n2. **Timing window**: Unit exists during verification but not during restart (generator race?)\n3. **Connection state**: Units may be available on one connection but not another\n4. **Quadlet generator**: Generator may create units in a different place than systemd expects\n\n## Impact\nAll services fail to restart, requiring manual systemd daemon-reload and restart.\n\n## Next Steps\n1. Check if GetUnitProperties uses different D-Bus call than RestartUnit\n2. Add logging to see actual unit availability at each stage\n3. Consider if Reload() needs additional time to process\n4. Check if units are being written to the correct path for the generator\n5. Investigate if this is a userMode-specific issue","design":"## Investigation Results\n\nThe code already implements `waitForUnitGeneration()` with exponential backoff retry (lifecycle.go lines 374-426) and it's being called from `RestartMany()` (lines 439-449).\n\nHowever, the logs show:\n- waitForUnitGeneration succeeds and logs \"Unit generated successfully\"\n- But immediately after (4ms later), RestartUnit fails with \"Unit not found\"\n\nThis suggests:\n1. **D-Bus connection issue**: GetUnitProperties and RestartUnit may use different connection states or caching\n2. **Reload() still processing**: Despite waitForUnitGeneration succeeding, systemd might still be processing\n3. **Missing additional synchronization**: Need to wait for systemd units to be fully available to RestartUnit\n\n## Proposed Fix\nInstead of just verifying GetUnitProperties succeeds, also:\n1. Add a small additional delay after all verifications complete (e.g., 50-100ms)\n2. Or: Try to actually call the unit operation (e.g., GetUnitProperty for ActiveState) to ensure it's fully loaded\n3. Or: Call systemd's `ReloadContext()` again after waiting for generators\n4. Consider if Reload() needs to be replaced with a different systemd call that waits for generators","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-11-09T12:02:18.603617082-05:00","updated_at":"2025-11-09T23:46:59.729258567-05:00","closed_at":"2025-11-09T23:46:59.729258567-05:00","source_repo":".","labels":["bug","critical","systemd"]}
{"id":"quad-ops-5ph","content_hash":"e79a82b698bf8117fabde73690cb9cbc1cb7f96cdba24594cf1a8fdd321388b8","title":"Fix flaky TestBuildPodmanArgs_NetworkOrdering test on macOS","description":"The test TestBuildPodmanArgs_NetworkOrdering in internal/platform/launchd/podmanargs_test.go is failing on macOS (job 54885760713, run 19199698241).\n\nThe test calls BuildPodmanArgs three times with different container names (\"test-1\", \"test-2\", \"test-3\") but then asserts that the full args are equal. This is incorrect because:\n\n1. The container names differ between calls (\"test-1\" vs \"test-2\" vs \"test-3\")\n2. The full args comparison will always fail when container names are different\n3. The test's intent is to verify that network ordering is consistent across calls, not that entire args match\n\nThe test error shows:\n- Line 1029: expected test-1 name, actual test-2\n- Line 1030: expected test-2 name, actual test-3\n\nThis indicates the container names are non-deterministic or being incremented unexpectedly.\n\nFix: Either pass the same container name to all three BuildPodmanArgs calls, or only compare the network ordering portion of the args.","acceptance_criteria":"- Test passes consistently on macOS\n- Network ordering is verified to be deterministic across multiple calls\n- Test clearly documents whether it's testing name consistency or network ordering","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-11-08T17:54:29.977845813-05:00","updated_at":"2025-11-08T17:56:14.638270228-05:00","closed_at":"2025-11-08T17:56:14.638270228-05:00","source_repo":"."}
{"id":"quad-ops-5re","content_hash":"02d5afdca4e7d7df3e4d610230fe740c750002dbcea6eb284f65c9956e59db55","title":"Verify resource constraint mapping completeness (memory/cpu/pids)","description":"Ensure convertResources and addResources fully map all Deploy.Resources fields including memory, reservation, swap, cpu shares/quota/period, and pids_limit. Verify corresponding Quadlet directives are emitted.","design":"Audit spec_converter.go:convertResources and renderer.go:addResources. Cross-reference with v0.21.2 resource handling. Add any missing mappings.","acceptance_criteria":"- All resource fields from v0.21.2 are supported\n- Memory, CPU, and pids constraints work correctly\n- Test coverage for all resource types","notes":"RESEARCH COMPLETE\n\n## Current Implementation Status (v0.22.0)\n\n**Supported Resource Fields:**\n- ✅ Memory (limits) - Quadlet native directive\n- ✅ MemoryReservation (reservations) - Quadlet native directive  \n- ✅ MemorySwap - Quadlet native directive\n- ✅ CPUShares - via PodmanArgs\n- ✅ CPUQuota - via PodmanArgs\n- ✅ CPUPeriod - via PodmanArgs\n- ✅ PidsLimit - Quadlet native directive\n\n## v0.21.2 Implementation\n\nUsed PodmanArgs for ALL resource constraints, logged as \"unsupported features\" warnings. Resource fields were populated but always rendered as PodmanArgs.\n\n## Quadlet Native Directives (podman-systemd.unit)\n\n**Only 2 resource directives supported natively:**\n- `Memory=` (maps to `--memory`)\n- `PidsLimit=` (maps to `--pids-limit`)\n\n**NOT supported as native Quadlet directives:**\n- MemoryReservation, MemorySwap, CPUShares, CPUQuota, CPUPeriod (must use PodmanArgs)\n\n## Podman CLI Resource Arguments (all available)\n\n- `--cpus=\u003cnumber\u003e` (shorthand, conflicts with --cpu-quota/--cpu-period)\n- `--cpu-shares=\u003cshares\u003e` (relative weight, default 1024)\n- `--cpu-quota=\u003cmicroseconds\u003e` (CFS quota limit)\n- `--cpu-period=\u003cmicroseconds\u003e` (CFS period, default 100000)\n- `--memory=\u003csize\u003e` (hard limit)\n- `--memory-reservation=\u003csize\u003e` (soft limit)\n- `--memory-swap=\u003csize\u003e` (memory+swap, -1 for unlimited)\n- `--pids-limit=\u003climit\u003e` (default 2048, -1 for unlimited)\n\n## Completeness Analysis\n\n| Resource Field | Compose Field | Converted? | Rendered? | Issue |\n|----------------|---------------|------------|-----------|-------|\n| Memory | deploy.resources.limits.memory | ✅ | ✅ Native | OK |\n| MemoryReservation | deploy.resources.reservations.memory | ✅ | ❌ | **BUG: Parsed but not rendered** |\n| MemorySwap | compose top-level memswap_limit | ❌ | ❌ | **Missing from converter** |\n| CPUShares | deploy.resources.reservations.cpus | ❌ | ✅ (if set) | **Missing derivation** |\n| CPUQuota | deploy.resources.limits.cpus (NanoCPUs) | ✅ | ✅ PodmanArgs | OK |\n| CPUPeriod | deploy.resources.limits.cpus (NanoCPUs) | ✅ | ✅ PodmanArgs | OK |\n| PidsLimit | deploy.resources.limits.pids | ✅ | ✅ Native | OK |\n\n## Critical Findings\n\n1. **MemoryReservation BUG**: Converted in spec_converter.go L289 but renderer.go L441-443 uses native Quadlet directive `MemoryReservation=` which does NOT exist in podman-systemd.unit(5). MUST use PodmanArgs.\n\n2. **MemorySwap BUG**: Converter doesn't check for memswap_limit or derive from Memory. Renderer.go L445-447 uses `MemorySwap=` which also does NOT exist as native directive.\n\n3. **CPUShares**: Not derived from deploy.resources.reservations.cpus (NanoCPUs). v0.21.2 derived from Limits if not set.\n\n## Required Fixes\n\n1. Change MemoryReservation rendering to use PodmanArgs (not native directive)\n2. Change MemorySwap rendering to use PodmanArgs (not native directive)  \n3. Add MemorySwap conversion from Compose (check types.ServiceConfig for memswap_limit)\n4. Add CPUShares derivation from reservations.NanoCPUs (if limits not set)\n\n## References\n\n- Quadlet docs: https://docs.podman.io/en/latest/markdown/podman-systemd.unit.5.html\n- Podman run args: https://docs.podman.io/en/v5.0.1/markdown/podman-run.1.html\n- v0.21.2 implementation: internal/unit/container.go processMemoryConstraints, processCPUConstraints\n\n---\n\n## IMPLEMENTATION COMPLETE\n\n### Changes Made\n\n1. **Fixed MemoryReservation rendering** (renderer.go L442)\n   - Changed from `MemoryReservation=\u003cvalue\u003e` (invalid Quadlet directive)\n   - To: `PodmanArgs=--memory-reservation \u003cvalue\u003e` (correct Podman flag)\n\n2. **Fixed MemorySwap rendering** (renderer.go L446)\n   - Changed from `MemorySwap=\u003cvalue\u003e` (invalid Quadlet directive)\n   - To: `PodmanArgs=--memory-swap \u003cvalue\u003e` (correct Podman flag)\n\n3. **Added MemorySwap conversion** (spec_converter.go L293-296)\n   - Now reads `memswap_limit` from service-level field\n   - Converts to formatted bytes and sets `resources.MemorySwap`\n\n4. **Added CPUShares derivation** (spec_converter.go L290-293, L332-341)\n   - New `convertCPUShares()` function converts NanoCPUs to CPU shares\n   - Formula: `nanoCPUs * 1024` (e.g., 0.5 CPUs = 512 shares)\n   - Derives from `deploy.resources.reservations.cpus`\n\n5. **Updated function signature** (spec_converter.go L264)\n   - `convertResources()` now takes `svc types.ServiceConfig` parameter\n   - Needed to access service-level `memswap_limit` field\n\n6. **Updated tests**\n   - Fixed test expectations for PodmanArgs format\n   - Updated golden file for resources-limits (CPUShares: 0 → 512)\n   - All tests passing ✅\n   - Linter clean ✅\n\n### Verification\n\n- `task test` - All 1109 tests pass\n- `task lint` - No issues\n- Coverage maintained at 78.3% (compose), 59.0% (systemd)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T13:44:34.810413-05:00","updated_at":"2025-11-09T15:50:38.346599-05:00","closed_at":"2025-11-09T15:50:38.346599-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-5re","depends_on_id":"quad-ops-hlf","type":"parent-child","created_at":"2025-11-09T13:44:34.810887-05:00","created_by":"daemon"}]}
{"id":"quad-ops-5wg","content_hash":"652d04ee7972a72fc9ddc9bf8751c37fb79e016aeac0c6d56fb6f7c8ec4f26a3","title":"Implement dependency ordering in launchd lifecycle operations","description":"Modify launchd StartMany, StopMany, and RestartMany to process services in dependency order. Currently they iterate without respecting order, but since dependencies aren't expressed in plists, ordering must be enforced at the lifecycle level.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-06T23:26:25.018837448-05:00","updated_at":"2025-11-06T23:26:25.018837448-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-5wg","depends_on_id":"quad-ops-9y2","type":"blocks","created_at":"2025-11-06T23:26:25.023159375-05:00","created_by":"daemon"}]}
{"id":"quad-ops-69e","content_hash":"be2807276507f3f1352e7353592e657f00dac65b0957d7534bca8b5512561298","title":"Extract service-level network declarations from compose services","description":"Update SpecConverter to extract which specific networks each service should be connected to from composeService.Networks map.\n\nCurrently convertService() only passes project-level networks to the spec. Need to:\n1. Read composeService.Networks map (service-level network declarations)\n2. Resolve network names with proper prefixing \n3. Store in service spec so renderers know which networks this service joins\n\nThis data should replace or supplement the current project-level-only networks approach.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-08T15:57:56.155050384-05:00","updated_at":"2025-11-08T16:50:41.425912679-05:00","closed_at":"2025-11-08T16:50:41.425912679-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-69e","depends_on_id":"quad-ops-cn8","type":"blocks","created_at":"2025-11-08T15:57:56.159836782-05:00","created_by":"daemon"}]}
{"id":"quad-ops-6cz","content_hash":"b9fa91c8208afaa31445e728eccf1596adcefe2c3ebb334606e1623fcbe274a0","title":"Restore Linux volume units functionality","description":"The systemd platform should properly render separate .volume unit files for named volumes from the service spec. Currently volumes are only handled as part of container mounts.\n\nNeed to:\n- Ensure renderService creates separate artifacts for volumes in spec.Volumes\n- Implement proper Quadlet volume unit rendering with all supported options\n- Add volume dependencies to container units (After/Requires)\n- Test that volume units are created and managed properly\n\nThis restores the Linux-specific volume management that was lost in the cross-platform abstraction.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-06T21:39:27.372788067-05:00","updated_at":"2025-11-06T21:56:42.2179633-05:00","closed_at":"2025-11-06T21:56:42.2179633-05:00","source_repo":".","labels":["linux","platform-specific","quadlet","volumes"]}
{"id":"quad-ops-6dn","content_hash":"446d4432602a3c4ee515890eedf086583a256b13061488a33bb61b900d4d7e0f","title":"Implement macOS volume management for feature parity","description":"While macOS launchd cannot create separate volume units like systemd, we can implement volume lifecycle management to provide better parity.\n\nNeed to:\n- Research if Podman on macOS supports named volume management\n- Implement volume creation/deletion commands for macOS platform\n- Add volume validation and lifecycle hooks to launchd platform\n- Update status reporting to include volume information\n- Test volume operations work correctly on macOS\n\nThis would provide basic volume management functionality on macOS, even if not as rich as Linux Quadlet volumes.","design":"### Volume Management Research Phase\n- Investigate Podman macOS volume support through documentation and testing\n- Determine if named volumes are supported and how they differ from Linux\n- Assess volume persistence, location, and management commands available\n- Document findings in issue notes for implementation decisions\n\n### Volume Model Extensions\n- Add VolumeSpec struct to internal/service/models.go for macOS volume definitions\n- Extend launchd platform structs to include volume lifecycle hooks\n- Add volume validation methods to internal/service/validate.go\n- Ensure volume specs are parsed from compose files and included in service specs\n\n### Platform Implementation\n- Implement volume creation/deletion in internal/platform/launchd/volume.go\n- Add volume lifecycle hooks to launchd platform manager\n- Integrate volume operations into StartMany/StopMany/RestartMany commands\n- Handle volume dependencies during service orchestration (though launchd doesn't support unit-level dependencies like systemd)\n\n### Status Reporting Updates\n- Extend status reporting to include volume information in launchd platform\n- Add volume status fields to Status struct (created, available, size, etc.)\n- Update CLI status command to display volume information on macOS\n- Ensure volume status integrates with existing status reporting workflow\n\n### Testing Implementation\n- Add unit tests for volume operations in launchd platform\n- Create integration tests using test compose files with volumes\n- Test volume lifecycle management across service operations\n- Validate volume persistence and cleanup behavior\n\n### Command Integration\n- Add volume-specific CLI commands if needed (create, remove, list volumes)\n- Integrate volume management into existing up/down/sync workflows\n- Ensure volume operations are logged appropriately\n- Handle volume errors gracefully with clear user feedback\n\n### Cross-Platform Considerations\n- Maintain API compatibility with Linux volume management where possible\n- Document platform differences in volume capabilities clearly\n- Ensure compose files work on both platforms (with appropriate warnings for unsupported features)\n- Consider fallback behaviors for macOS-specific limitations","acceptance_criteria":"### Research Validation\n- Podman macOS volume support is documented and understood\n- Volume capabilities and limitations are clearly identified\n- Implementation approach is validated through testing\n\n### Volume Lifecycle Management\n- Volume creation/deletion commands work correctly on macOS\n- Volumes persist across container restarts as expected\n- Volume cleanup happens appropriately when services are removed\n\n### Integration Testing\n- Test compose files with volumes deploy successfully on macOS\n- Volume mounting works correctly in containers\n- Service operations (start/stop/restart) handle volumes properly\n- No regressions in existing functionality\n\n### Status and Monitoring\n- Status command shows volume information on macOS\n- Volume status is accurate and up-to-date\n- Error conditions are reported clearly\n\n### User Experience\n- Volume operations provide clear success/error feedback\n- Platform differences are communicated through warnings or documentation\n- Volume management integrates seamlessly with existing workflows\n\n### Code Quality\n- Unit test coverage for volume operations \u003e80%\n- No linting or security issues introduced\n- Code follows existing patterns and conventions\n- Documentation updated to reflect new capabilities","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-06T21:39:34.016022681-05:00","updated_at":"2025-11-06T23:28:17.139486917-05:00","source_repo":".","labels":["macos","parity","podman","volumes"],"dependencies":[{"issue_id":"quad-ops-6dn","depends_on_id":"quad-ops-6cz","type":"related","created_at":"2025-11-06T21:39:45.285584306-05:00","created_by":"daemon"}]}
{"id":"quad-ops-6ph","content_hash":"2c2a9f615ab2a9c94c7be7db58b6161e9b07cb7bf8c1d413b70b1b7c1f432850","title":"Fix external network name resolution with project prefix","description":"## Problem\nWhen services reference external networks from other projects, the network name resolution incorrectly applies the current project's prefix, breaking systemd unit generation.\n\n### Root Cause (Regression from macOS Refactor)\nThis is a **regression introduced in commit 297a310** (\"Extract service-level network declarations from compose services\") which was part of the macOS refactor.\n\nIn `internal/compose/spec_converter.go`, the `convertServiceNetworksList` function checks if a network exists in the project's network definitions. For external networks marked as such in compose files, it incorrectly applies the current project's prefix:\n\n```go\nprojectNet, exists := project.Networks[networkName]\nif !exists {\n    resolvedName := service.SanitizeName(networkName)\n    if !strings.Contains(networkName, project.Name) {\n        resolvedName = service.SanitizeName(Prefix(project.Name, networkName))  // BUG HERE\n    }\n}\n```\n\nThis results in:\n- Compose file declares: `infrastructure-proxy` (external network from infrastructure project)\n- Code adds project prefix: `llm-infrastructure-proxy` (wrongly adds `llm-` prefix)\n- Actual network unit: `infrastructure_proxy.network` (created from infrastructure project with underscore)\n- Result: systemd unit references non-existent `llm-infrastructure-proxy.network`\n\n### Affected Services\nAny service that uses external networks from different projects:\n- llm services using `infrastructure-proxy`\n- scrutiny/dozzle/miniflux services using `infrastructure-proxy`\n- media services using `infrastructure-proxy`\n- beszel services using `infrastructure-proxy`\n\n### Evidence\nGenerated unit file: `~/.config/containers/systemd/llm-open-webui.container` references:\n```\nRequires=llm-infrastructure-proxy.network\nNetwork=llm-infrastructure-proxy.network\n```\n\nBut only `infrastructure_proxy.network` exists.\n\n## Solution\nFor external networks, use the network name as-is without applying the current project's prefix. The network name already encodes the source project context (e.g., 'infrastructure-proxy' explicitly identifies the infrastructure project's proxy network).","notes":"PROGRESS: Implemented DNS-compliant unit name normalization (quad-ops-6rg) which replaces underscores with hyphens. This addresses the symptom where 'infrastructure_proxy.network' (with underscore) mismatched generated references. With quad-ops-6rg complete, all unit names now use hyphens consistently. Next: fix the root cause - prevent incorrect project prefix application to external networks in convertServiceNetworksList().","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-09T10:36:36.957959578-05:00","updated_at":"2025-11-09T10:46:09.89830779-05:00","closed_at":"2025-11-09T10:46:09.89830956-05:00","source_repo":"."}
{"id":"quad-ops-6rg","content_hash":"70e199689cd6c00ba82652b056b377f1a3ece5449b84fc4d3a6911c1cae570b2","title":"Normalize unit names: replace underscores with hyphens or validate DNS compliance","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T10:42:54.337167624-05:00","updated_at":"2025-11-09T10:44:24.676887748-05:00","closed_at":"2025-11-09T10:44:24.676887748-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-6rg","depends_on_id":"quad-ops-6ph","type":"discovered-from","created_at":"2025-11-09T10:42:54.337820828-05:00","created_by":"daemon"}]}
{"id":"quad-ops-6sz","content_hash":"679e23b2993903d12b68c026010c01a8227953dacf566b5ced7710e67d16bab9","title":"Add unit existence verification with retry before restart","description":"Implement defensive programming to handle timing issues with systemd generator.\n\n## Changes Needed\n\n**In Lifecycle.RestartMany()**:\n```go\n// After Reload(), verify units exist before restarting\nfor name := range servicesToRestart {\n    if err := l.waitForUnitGeneration(ctx, name); err != nil {\n        // Unit generator failed or took too long\n        // Return error with diagnostic info\n    }\n}\n```\n\n**New method: waitForUnitGeneration()**:\n- Check if `.service` unit exists (via systemd D-Bus GetUnitProperties)\n- Retry with exponential backoff (50ms → 100ms → 200ms... up to 5 seconds)\n- Provide clear error if unit never appears\n- Log retry attempts at DEBUG level\n\n**Configuration**:\n- Make retry timeout configurable (default 5s)\n- Log progress at INFO level so users see what's happening\n\nThis gives the generator time to run while failing fast with good diagnostics if something is wrong.","acceptance_criteria":"Implement unit existence check with exponential backoff retry in RestartMany(). Add configuration options. Write tests verifying retry behavior and timeout handling.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-08T21:16:25.396706837-05:00","updated_at":"2025-11-09T10:22:40.634258198-05:00","closed_at":"2025-11-09T10:22:40.634258198-05:00","source_repo":".","labels":["resilience","systemd","task"]}
{"id":"quad-ops-712","content_hash":"5c51dfd2f2173a3d351ef6c16ef0dba0d6b053eea1ef9fd803fec4d6211752f4","title":"Fix Quadlet generator: volume name escaping and missing network dependencies","description":"The systemd Quadlet generator is producing invalid unit file declarations causing quadlet-generator errors. Analysis against official Podman documentation reveals multiple bugs:\\n\\n## Bug 1: Volume reference incorrectly includes `.volume` suffix\\n\\n**Podman docs state:** When referencing a named volume in `Volume=` directive, if SOURCE-VOLUME ends with `.volume`, Quadlet will look for that file and create a dependency. The volume file must exist.\\n\\n**Current behavior:** The renderer (line 290-291 in renderer.go) appends `.volume` to volume sources:\\n```go\\nif m.Type == service.MountTypeVolume {\\n    source = source + \\\".volume\\\"  // ❌ Creates Volume=miniflux_db-data.volume\\n}\\n```\\n\\n**Expected behavior:** Should NOT append `.volume` suffix. Quadlet resolves the reference automatically:\\n- Correct: `Volume=miniflux-db-data:/path/in/container`\\n- Incorrect: `Volume=miniflux_db-data.volume:/path/in/container`\\n\\n**Effect:** Quadlet generator fails because it's looking for a volume named `miniflux_db_data` (with .volume suffix and underscores) when the actual volume file is `miniflux-db-data.volume`.\\n\\n## Bug 2: Volume source names use underscores instead of hyphens\\n\\n**Location:** `internal/compose/spec_converter.go` lines 236 and 248\\n\\n**Current behavior:**\\n```go\\nmount.Source = fmt.Sprintf(\\\"%s_%s\\\", project.Name, v.Source)  // ❌ Uses underscore\\n```\\n\\n**Expected behavior:** Use the `Prefix()` helper function that uses hyphens:\\n```go\\nmount.Source = compose.Prefix(project.Name, v.Source)  // ✅ Creates miniflux-db-data\\n```\\n\\n**Effect:** The volume source names don't match the actual volume names created with `SanitizeName()` which converts underscores to hyphens.\\n\\n## Summary\\n\\nCorrect Quadlet output should be:\\n```ini\\n[Unit]\\nAfter=miniflux-db-data.volume\\nRequires=miniflux-db-data.volume\\n\\n[Container]\\nVolume=miniflux-db-data:/var/lib/postgresql/data\\n```\\n\\nCurrent broken output is:\\n```ini\\n[Unit]\\nAfter=miniflux-db-data.volume\\nRequires=miniflux-db-data.volume\\n\\n[Container]\\nVolume=miniflux_db-data.volume:/var/lib/postgresql/data\\n```\\n\\nQuadlet generator error: \\\"requested Quadlet source miniflux_db-data.volume was not found\\\"\",\n\u003cparameter name=\"priority\"\u003e1\u003c/parameter\u003e\n\u003c/invoke\u003e","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-09T12:19:23.533646599-05:00","updated_at":"2025-11-09T12:25:42.006522977-05:00","closed_at":"2025-11-09T12:25:42.006522977-05:00","source_repo":".","labels":["bug","quadlet","renderer","systemd"]}
{"id":"quad-ops-782","content_hash":"79878be36dedac48e157eef0ad0fd6008a2b2897edea0e9f8e2cbcb00a5e3d41","title":"Unit file references use wrong name format (hyphens vs underscores)","description":"Container unit files (.container) specify dependencies on networks and volumes using names that don't match the actual rendered unit files.\n\n**Root Cause Identified:**\n\nThe issue stems from a mismatch between network names in two contexts:\n\n1. **spec.Networks** - The actual network specifications that get rendered to `.network` files with names like `infrastructure_proxy` (containing underscores from project prefixing)\n\n2. **spec.Container.Network.ServiceNetworks** - The network references used by containers for dependencies, which come from compose service declarations and may use different naming (like `infrastructure-proxy` from external network declarations)\n\n**Concrete Example:**\n- Infrastructure project has a network `proxy` which becomes `infrastructure-proxy` (via Prefix function)\n- After sanitization through SanitizeName, this becomes `infrastructure-proxy` (hyphens preserved)\n- But when rendered to a `.network` file, it becomes `infrastructure_proxy.network`\n- However, when other projects (llm, devops, media) declare `infrastructure-proxy` as an external network, their ServiceNetworks contains `infrastructure-proxy`\n- Container units then reference `After=infrastructure-proxy.network` but the actual file is `infrastructure_proxy.network`\n- Quadlet generator can't find the dependency and fails with: \"unable to translate dependency for infrastructure-proxy.network\"\n\n**Why this happens:**\n- Network unit files are created from `spec.Networks` entries (which have sanitized names)\n- Container dependencies are built from `spec.Container.Network.ServiceNetworks` (which come from compose declarations)\n- These two paths don't guarantee name alignment - sanitization rules may differ or be applied at different stages\n- There's no lookup mechanism to resolve `ServiceNetworks` names to their actual `spec.Networks` equivalents\n\n**Impact:**\n- Quadlet's podman-system-generator fails to convert `.container` files to `.service` units\n- Services cannot be started because systemd can't find the generated service files\n- 11 services fail to start in test run","design":"The issue is in the dependency reference generation in the systemd renderer. When rendering container units, dependencies should reference the sanitized unit names (with underscores) not the original network/volume names (with hyphens). \n\nLocation likely: `internal/platform/systemd/renderer.go` where After/Requires directives are built from network/volume names.","notes":"DIAGNOSED: Root cause is name mismatch between spec.Networks (where unit files get their names) and spec.Container.Network.ServiceNetworks (where container dependencies get their names). Sanitization/prefixing may apply differently causing misalignment.","status":"open","priority":0,"issue_type":"bug","created_at":"2025-11-09T16:33:56.577089761-05:00","updated_at":"2025-11-09T16:36:38.770471329-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-782","depends_on_id":"quad-ops-hlf","type":"blocks","created_at":"2025-11-09T16:33:56.577895752-05:00","created_by":"daemon"}]}
{"id":"quad-ops-79g","content_hash":"f442117d19e2493fc7cc8caccadc6c6490a08a5d059b1b0820898d3547224d6c","title":"Documentation Review and Updates Epic","description":"Review and update the site/ documentation to address out-of-date information, missing sections, and inconsistencies with the current codebase implementation.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-11-06T23:24:03.079115476-05:00","updated_at":"2025-11-06T23:24:03.079115476-05:00","source_repo":".","labels":["documentation","review","site"]}
{"id":"quad-ops-7fz","content_hash":"fd97a7274d6402fa6df8a2967e4a5ae8176ee88f42f5c3013ae069ac319f0823","title":"Implement x-quad-ops-init extension support","description":"The init-containers example uses x-quad-ops-init extension to define init containers that run before the main service. This extension is documented but not implemented.\n\nNeed to:\n- Add InitContainers field to service.Spec model\n- Modify spec_converter.go to process x-quad-ops-init from project.Extensions\n- Generate separate service specs for each init container\n- Ensure proper systemd dependencies (After/Requires) between init containers and main service\n- Handle sequential execution of init containers\n\nExtension format:\n```yaml\nx-quad-ops-init:\n  - image: docker.io/example/image:tag\n    command: run this command\n  - image: another/image:tag\n    command: [\"sh\", \"-c\", \"multi word command\"]\n```","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-06T21:36:14.961358574-05:00","updated_at":"2025-11-06T21:45:42.057268667-05:00","closed_at":"2025-11-06T21:45:42.057268667-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-7fz","depends_on_id":"quad-ops-1n4","type":"blocks","created_at":"2025-11-06T21:36:14.965800422-05:00","created_by":"daemon"}]}
{"id":"quad-ops-7l4","content_hash":"f5c6be66011a7dcf08c94f4d6dac693d3a759777c0fcf07ff4da8ec040178350","title":"Missing namespace mode support (pid, ipc, cgroup)","description":"Compose pid/ipc/cgroup namespace fields not converted, preventing namespace sharing and host modes.\n\nUse cases:\n- pid: \"service:app\" for debugging with strace\n- ipc: \"shareable\" for X11 forwarding\n- pid: \"host\" for monitoring tools","design":"1. Add PidMode, IpcMode, CgroupMode string fields to service.Container\n2. Convert service.Pid, service.Ipc, service.Cgroup in spec_converter.go:convertContainer()\n3. Render:\n   - systemd: Check if Quadlet supports Pid=/Ipc= directives, else use PodmanArgs\n   - launchd: --pid, --ipc, --cgroupns flags\n\nHandle special values: \"host\", \"service:name\", \"container:name\", \"shareable\"","acceptance_criteria":"- pid/ipc/cgroup modes convert to Container fields\n- Renders correctly on both platforms\n- service: and container: references work\n- host mode works\n- Test coverage for all namespace modes","notes":"Verified Podman support (no native Quadlet directives):\n- podman run --pid (host, container:name, service:name)\n- podman run --ipc (host, container:name, shareable)  \n- podman run --cgroupns (host, private)\n\nImplementation: Use PodmanArgs on both platforms (no Quadlet native directives)","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-09T16:40:17.262469-05:00","updated_at":"2025-11-09T17:38:39.793899-05:00","closed_at":"2025-11-09T17:38:39.793899-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-7l4","depends_on_id":"quad-ops-hlf","type":"parent-child","created_at":"2025-11-09T16:51:18.515264-05:00","created_by":"daemon"}]}
{"id":"quad-ops-7lb","content_hash":"955ec36115597fdf4e87d8e958f63d4313d71916033010be9cd07a105d6906ca","title":"Missing group_add support for supplementary groups","description":"Compose group_add field not converted, preventing containers from accessing supplementary groups (docker socket, audio devices, etc.)\n\nExample use case: service needs access to /var/run/docker.sock (group: docker)","design":"1. Add GroupAdd []string field to service.Container (internal/service/models.go)\n2. Convert service.GroupAdd in spec_converter.go:convertSecurity()\n3. Render as PodmanArgs=--group-add \u003cgid\u003e in both renderers\n   - systemd: addSecurity() or addAdvanced()\n   - launchd: BuildPodmanArgs()\n\nEvidence: testdata/golden/security-and-user/compose.yml uses group_add","acceptance_criteria":"- group_add in compose converts to Container.GroupAdd\n- Renders as --group-add flags on both platforms\n- Multiple groups work correctly\n- Test coverage for security scenarios","notes":"Verified Quadlet native support:\n- GroupAdd (native Quadlet directive)\n\nAlso supported via Podman flag:\n- podman run --group-add\n\nImplementation: Use native Quadlet directive on systemd, Podman flag on launchd","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-11-09T16:40:17.246822-05:00","updated_at":"2025-11-09T17:29:37.430943-05:00","closed_at":"2025-11-09T17:29:37.430943-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-7lb","depends_on_id":"quad-ops-hlf","type":"parent-child","created_at":"2025-11-09T16:51:18.509526-05:00","created_by":"daemon"}]}
{"id":"quad-ops-7ry","content_hash":"102f46089607c9186d6d08ce4c615c0b340206f3687cdb1b3f33184438ecc79d","title":"non-user mode config init lists user config","description":"❯ ./quad-ops config init\nError executing command: configuration file already exists at /home/trly/.config/quad-ops/config.yaml, use --force to overwrite","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T21:28:46.864721827-05:00","updated_at":"2025-11-06T21:50:10.851385897-05:00","closed_at":"2025-11-06T21:50:10.851385897-05:00","source_repo":"."}
{"id":"quad-ops-8m5","content_hash":"f1306fd85e7bb446da99621f9cdba62ccef1949cfc9c0b7a604e261884ca0ee0","title":"Document Compose field coverage in README","description":"README doesn't clearly document which Compose fields are supported vs unsupported, causing user confusion.\n\nNeed comprehensive coverage matrix showing:\n- Fully supported fields\n- Partially supported fields (with limitations)\n- Unsupported fields (with alternatives)","design":"Add new section to README.md: \"Compose Specification Support\"\n\nStructure:\n1. **Fully Supported** (Podman/Quadlet native)\n   - Core: image, build, command, entrypoint, user, working_dir, hostname\n   - Environment: environment, env_file, labels\n   - Networking: networks, ports, dns, extra_hosts\n   - Storage: volumes, tmpfs, secrets (file/content sources)\n   - Resources: memory, cpu, pids\n   - Security: cap_add/drop, privileged, security_opt, read_only\n   - Health: healthcheck, restart, depends_on\n\n2. **Partially Supported**\n   - configs: Only file/content/environment sources (NOT Swarm driver)\n   - secrets: Only file/content/environment sources (NOT Swarm driver)\n   - deploy.resources.limits: Supported, reservations partially\n   - depends_on conditions: All map to After/Requires (no health gating)\n\n3. **Not Supported - Use Alternatives**\n   - volumes_from: Use named volumes\n   - logging: Limited to Podman-supported drivers\n   - stdin_open/tty: Interactive mode not supported in systemd units\n   - sysctls/ulimits: Check Quadlet support\n\n4. **Explicitly Out of Scope - Swarm Orchestration**\n   - deploy.placement, deploy.update_config, deploy.rollback_config\n   - deploy.endpoint_mode, deploy.mode, replicas \u003e 1\n   - configs/secrets with driver (Swarm config store)\n   - ports mode: ingress (Swarm load balancing)\n   - Use Kubernetes/Nomad/Swarm for these features\n\nReference: https://docs.podman.io/en/latest/markdown/podman-systemd.unit.5.html","acceptance_criteria":"- README has comprehensive Compose coverage section\n- Users can quickly see what's supported\n- Limitations are clearly documented\n- Alternatives provided for unsupported fields","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-09T16:40:17.285473-05:00","updated_at":"2025-11-09T23:05:08.191061-05:00","closed_at":"2025-11-09T23:05:08.191061-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-8m5","depends_on_id":"quad-ops-hlf","type":"parent-child","created_at":"2025-11-09T16:51:18.536383-05:00","created_by":"daemon"}]}
{"id":"quad-ops-8oo","content_hash":"b93a44569f8f12c7a7d6441732a976536a60537ce1847b7d3bd1a3bdbd6cad22","title":"Fix: Remove fallback network dependency logic that causes cross-project network errors","description":"Fixed critical bug in systemd renderer where containers without explicit network declarations would be assigned dependencies and network directives for ALL project-level networks, causing quadlet generator errors when multiple projects are loaded together.\n\n## Root Cause\nThe systemd renderer had a fallback in `addNetworks()` that would add Network= directives and dependencies for all networks in spec.Networks when a container's ServiceNetworks was empty. This caused problems when:\n\n1. Multiple compose files from different projects were loaded together\n2. A container didn't explicitly declare networks in its compose file\n3. The renderer would add all project networks to the container, including networks from other projects\n4. Quadlet would fail with \"requested Quadlet unit X.network was not found\"\n\nExample error:\n```\nquadlet-generator: converting \"media-immich-server.container\": requested Quadlet unit media-infrastructure-proxy.network was not found\n```\n\nThe container was trying to reference `infrastructure-proxy` network from a different project.\n\n## Solution\n1. Removed the fallback logic that added all project networks unconditionally\n2. Containers now only declare dependencies and network directives for networks in their ServiceNetworks (explicitly set from the compose file)\n3. When ServiceNetworks is empty, the container uses the default network implicitly (correct Docker behavior)\n4. Updated `renderContainer()` to only add dependencies for networks the container actually uses\n\n## Testing\n- Updated existing tests to properly set ServiceNetworks on containers\n- Added two new tests validating the correct behavior\n- All 796 tests pass\n- Linting passes with 0 issues","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-08T21:21:16.288494295-05:00","updated_at":"2025-11-08T21:32:42.774622336-05:00","closed_at":"2025-11-08T21:32:42.774622336-05:00","source_repo":"."}
{"id":"quad-ops-9ha","content_hash":"b1784c159ff69584f09eddadc288315415ee7644083e2446977eec2e82993756","title":"Enhance launchd renderer to output service dependencies in plist files","description":"internal/platform/launchd/renderer.go: Launchd plist output doesn't include service dependency information, unlike systemd which renders After and Requires directives.\n\nLaunchd uses different mechanisms (RunAtLoad, dependencies arrays in plist) to manage service ordering. Need to enhance renderer to:\n1. Map service dependencies from spec.DependsOn to launchd plist format\n2. Ensure proper ordering hints for launchd to respect dependencies\n3. Match systemd capability of ordered startup/shutdown\n\nThis enables launchd lifecycle operations to respect dependency ordering when implemented in lifecycle.go.","acceptance_criteria":"Launchd renderer generates plist files with dependency information that launchd can use for ordered service management","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-08T16:01:25.867925897-05:00","updated_at":"2025-11-08T18:07:22.831609088-05:00","closed_at":"2025-11-08T18:07:22.831609088-05:00","source_repo":".","labels":["dependencies","launchd","platform-specific","renderer"],"dependencies":[{"issue_id":"quad-ops-9ha","depends_on_id":"quad-ops-26t","type":"blocks","created_at":"2025-11-08T16:01:25.878024333-05:00","created_by":"daemon"},{"issue_id":"quad-ops-9ha","depends_on_id":"quad-ops-w84","type":"related","created_at":"2025-11-08T16:01:33.147152564-05:00","created_by":"daemon"}]}
{"id":"quad-ops-9y2","content_hash":"57e75c58b602159abfa13a247bc39f62936e24a343370f27ee31dfbabb13f17e","title":"Improve cross-platform dependency management","description":"The current dependency system only works well for systemd. Need to enhance dependency handling across platforms.\n\nNeed to:\n- Implement dependency ordering for launchd platform (currently StartMany has no ordering)\n- Add dependency validation during spec conversion\n- Improve dependency resolution and cycle detection\n- Add platform-specific dependency mapping (systemd After/Requires vs launchd ordering)\n- Test dependency handling works correctly on both platforms\n\nThis will provide better service orchestration across both Linux and macOS platforms.","status":"in_progress","priority":2,"issue_type":"feature","created_at":"2025-11-06T21:39:38.535363004-05:00","updated_at":"2025-11-07T00:43:06.869274265-05:00","source_repo":".","labels":["cross-platform","dependencies","launchd","systemd"]}
{"id":"quad-ops-a32","content_hash":"eff0872e149b0ee02aa6746a683ad50e77acf02c31e003e4f88b3676b3ee70cf","title":"Missing ulimits support for resource limits","description":"Compose ulimits field not converted, preventing ulimit configuration for containers.\n\nCommon use case: nofile (open files limit) for databases, web servers\n\nQuadlet native support: Ulimit= directive","design":"1. Add Ulimits map[string]Ulimit field to service.Container (internal/service/models.go)\n   - Ulimit struct: { Soft int64, Hard int64 } or single value\n2. Convert service.Ulimits in spec_converter.go:convertContainer()\n3. Render:\n   - systemd: Quadlet Ulimit= directive (format: name=soft:hard or name=value)\n   - launchd: --ulimit flag (same format)\n\nQuadlet format:\n```\nUlimit=nofile=1024:2048\nUlimit=nproc=512\n```\n\nPodman format:\n```\n--ulimit nofile=1024:2048 --ulimit nproc=512\n```\n\nHandle both forms from Compose:\n- Short: nofile: 2048 → nofile=2048:2048\n- Long: nofile: {soft: 1024, hard: 2048} → nofile=1024:2048","acceptance_criteria":"- ulimits in compose converts to Container.Ulimits\n- Renders as Ulimit= on systemd (multiple lines)\n- Renders as --ulimit on launchd (multiple flags)\n- Both short and long syntax supported\n- Test coverage for ulimit scenarios","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-09T16:46:01.323805-05:00","updated_at":"2025-11-09T17:48:21.412844-05:00","closed_at":"2025-11-09T17:48:21.412844-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-a32","depends_on_id":"quad-ops-hlf","type":"parent-child","created_at":"2025-11-09T16:51:18.527125-05:00","created_by":"daemon"}]}
{"id":"quad-ops-a3j","content_hash":"57b42a9a9ff1f4dea7be9312f8892fd6023ebb46ee40a684548176aac8397d8c","title":"Simplify unit_list.go to consistently use ArtifactStore (QuadletDir)","description":"Refactor cmd/unit_list.go lines 96-115 to eliminate confusion about which artifact store to use.\n\nCurrent state:\n- Both code paths call ArtifactStore.List() (correct)\n- --use-fs-artifacts flag has no functional effect\n- Misleading comment suggests RepoArtifactStore might be used\n- Code structure creates false impression of two different behaviors\n\nChanges needed:\n1. Remove or clarify the --use-fs-artifacts flag purpose (deprecated or remove entirely)\n2. Simplify logic to single clear path: always use ArtifactStore (QuadletDir)\n3. Remove dead code paths and confusing conditionals\n4. Update comments to clarify: deployed artifacts come from QuadletDir, not RepositoryDir\n5. Consider if RepoArtifactStore is still needed in ListDeps struct (may not be)\n\nGoal: Make it obvious that unit list scans the deployed platform-specific artifacts directory, not the git repository.","acceptance_criteria":"cmd/unit_list.go code is simplified and unambiguous. Behavior is: always scan ArtifactStore (QuadletDir) for deployed artifacts. Comments clearly explain the distinction between QuadletDir and RepositoryDir. --use-fs-artifacts flag either removed or clearly documented as deprecated. ListDeps struct reflects actual dependencies used.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-08T16:02:54.647304864-05:00","updated_at":"2025-11-08T16:13:50.734008079-05:00","closed_at":"2025-11-08T16:13:50.734008079-05:00","source_repo":"."}
{"id":"quad-ops-aez","content_hash":"d12c36ddb243cade8aa65df3252d4282a287370683d8f0cbe1cb64b4a26d408b","title":"Add platform-specific dependency mapping","description":"Enhance systemd renderer to ensure comprehensive After/Requires mapping. Research and implement launchd dependency mechanisms in plist files (QueueDirectories, WatchPaths, etc.) and add dependency fields to Plist struct.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-06T23:26:41.917992911-05:00","updated_at":"2025-11-06T23:26:41.917992911-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-aez","depends_on_id":"quad-ops-9y2","type":"parent-child","created_at":"2025-11-06T23:26:43.439040488-05:00","created_by":"daemon"}]}
{"id":"quad-ops-b5b","content_hash":"849dba5e8eefd72f773f137dcad24b2ac91e5c670bb635b70bb9e4c19195e5d7","title":"Update configuration documentation to match current config structure","description":"Review and update the quad-ops-configuration.md file to ensure it accurately reflects:\n- Current config field names and structure (Reference vs ref, etc.)\n- Default values and paths\n- User mode vs system mode differences\n- Any new configuration options that may have been added","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-06T23:24:09.948742386-05:00","updated_at":"2025-11-06T23:24:09.948742386-05:00","source_repo":".","labels":["config","configuration","documentation"],"dependencies":[{"issue_id":"quad-ops-b5b","depends_on_id":"quad-ops-79g","type":"blocks","created_at":"2025-11-06T23:24:09.95632202-05:00","created_by":"daemon"}]}
{"id":"quad-ops-b5m","content_hash":"b64e77a08e178b94958f06b9a343ca290ddaa17a37f11330325496e8a4b66d12","title":"validate command not finding tempdir","description":"User runs: ./quad-ops validate --repo https://github.com/trly/quad-ops-deploy.git --compose-dir prod/bdyvp22\n\nExpected: Command successfully clones the repo and validates the compose files in prod/bdyvp22 subdirectory\n\nActual: Error - path does not exist: /tmp/quad-ops-validate/prod/bdyvp2 (truncated path that skips the repository name directory)","notes":"INVESTIGATION FINDINGS:\n\nRoot Cause: In cmd/validate.go cloneRepositoryWithDeps(), the function returns tempPath (/tmp/quad-ops-validate) as the target path. However, GitSyncer internally creates a subdirectory named after the repository (\"validate-temp\"), so the actual cloned repo is at /tmp/quad-ops-validate/validate-temp.\n\nWhen --compose-dir is used with --repo, the code at line 152 joins composeDir to targetPath:\n  targetPath = filepath.Join(targetPath, composeDir)\n  \nThis produces /tmp/quad-ops-validate/prod/bdyvp22 but the actual path should be /tmp/quad-ops-validate/validate-temp/prod/bdyvp22.\n\nFIX IMPLEMENTATION PLAN:\n1. Modify cloneRepositoryWithDeps() to return filepath.Join(tempPath, repoConfig.Name) instead of just tempPath\n2. Add test TestValidateCommand_WithRepoAndComposeDir to verify --repo and --compose-dir work together\n3. This ensures consistency with how GitSyncer structures the cloned repository\n\nFiles to modify:\n- cmd/validate.go (function cloneRepositoryWithDeps, line ~234)\n- cmd/validate_test.go (add new test case)\n\nChanges are minimal and isolated to the validate command flow.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-08T23:11:17.37789084-05:00","updated_at":"2025-11-08T23:15:23.399034635-05:00","closed_at":"2025-11-08T23:15:23.399034635-05:00","source_repo":"."}
{"id":"quad-ops-bon","content_hash":"0856d111983a7f2e8b79527d4b2666e2e16baee6a7abc11c62593fb1fd51fbc4","title":"Implement macOS network management for feature parity","description":"While macOS launchd cannot create separate network units like systemd, we can implement network lifecycle management to provide better parity.\n\nNeed to:\n- Research Podman network management on macOS\n- Implement network creation/deletion commands for macOS platform  \n- Add network validation and lifecycle hooks to launchd platform\n- Update status reporting to include network information\n- Test network operations work correctly on macOS\n\nThis would provide basic network management functionality on macOS, even if not as rich as Linux Quadlet networks.","design":"### Network Management Research Phase\n- Investigate Podman macOS network support through documentation and testing\n- Determine if named networks are supported and how they differ from Linux\n- Assess network isolation, connectivity, and management commands available\n- Document findings in issue notes for implementation decisions\n\n### Network Model Extensions\n- Add NetworkSpec struct to internal/service/models.go for macOS network definitions\n- Extend launchd platform structs to include network lifecycle hooks\n- Add network validation methods to internal/service/validate.go\n- Ensure network specs are parsed from compose files and included in service specs\n\n### Platform Implementation\n- Implement network creation/deletion in internal/platform/launchd/network.go\n- Add network lifecycle hooks to launchd platform manager\n- Integrate network operations into StartMany/StopMany/RestartMany commands\n- Handle network dependencies during service orchestration (though launchd doesn't support unit-level dependencies like systemd)\n\n### Status Reporting Updates\n- Extend status reporting to include network information in launchd platform\n- Add network status fields to Status struct (created, connected, subnet, etc.)\n- Update CLI status command to display network information on macOS\n- Ensure network status integrates with existing status reporting workflow\n\n### Testing Implementation\n- Add unit tests for network operations in launchd platform\n- Create integration tests using test compose files with networks\n- Test network lifecycle management across service operations\n- Validate network isolation and connectivity behavior\n\n### Command Integration\n- Add network-specific CLI commands if needed (create, remove, list networks)\n- Integrate network management into existing up/down/sync workflows\n- Ensure network operations are logged appropriately\n- Handle network errors gracefully with clear user feedback\n\n### Cross-Platform Considerations\n- Maintain API compatibility with Linux network management where possible\n- Document platform differences in network capabilities clearly\n- Ensure compose files work on both platforms (with appropriate warnings for unsupported features)\n- Consider fallback behaviors for macOS-specific limitations","acceptance_criteria":"### Research Validation\n- Podman macOS network support is documented and understood\n- Network capabilities and limitations are clearly identified\n- Implementation approach is validated through testing\n\n### Network Lifecycle Management\n- Network creation/deletion commands work correctly on macOS\n- Networks provide isolation between services as expected\n- Network cleanup happens appropriately when services are removed\n\n### Integration Testing\n- Test compose files with networks deploy successfully on macOS\n- Network connectivity works correctly between containers\n- Service operations (start/stop/restart) handle networks properly\n- No regressions in existing functionality\n\n### Status and Monitoring\n- Status command shows network information on macOS\n- Network status is accurate and up-to-date\n- Error conditions are reported clearly\n\n### User Experience\n- Network operations provide clear success/error feedback\n- Platform differences are communicated through warnings or documentation\n- Network management integrates seamlessly with existing workflows\n\n### Code Quality\n- Unit test coverage for network operations \u003e80%\n- No linting or security issues introduced\n- Code follows existing patterns and conventions\n- Documentation updated to reflect new capabilities","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-06T21:39:36.067042095-05:00","updated_at":"2025-11-06T23:28:52.670696572-05:00","source_repo":".","labels":["macos","networks","parity","podman"],"dependencies":[{"issue_id":"quad-ops-bon","depends_on_id":"quad-ops-lub","type":"related","created_at":"2025-11-06T21:39:47.025735433-05:00","created_by":"daemon"}]}
{"id":"quad-ops-car","content_hash":"38824ca3c92247059d05f35a1d878bce39c926ec521d2dad179c2044d944df33","title":"Add cleanup of orphaned rootlessport processes before starting services","description":"When systemd services fail with podman containers using rootless networking, rootlessport processes may not get cleaned up, causing port binding conflicts on subsequent runs. Need to add cleanup logic to kill orphaned rootlessport processes before starting services in sync/up/down commands.","design":"### Root Cause Analysis\n- Podman rootless networking uses rootlessport for port forwarding\n- When systemd services fail, rootlessport processes may not be cleaned up\n- Subsequent runs fail with \"bind: address already in use\" errors\n\n### Solution Options\n1. **Pre-start cleanup**: Kill orphaned rootlessport processes before starting services\n2. **Systemd unit improvements**: Better cleanup in systemd unit files\n3. **Process tracking**: Track and clean up processes managed by quad-ops\n\n### Implementation Approach\n- Add cleanup function to check for orphaned rootlessport processes\n- Kill processes owned by current user that match rootlessport pattern\n- Integrate cleanup into up/down/sync commands before service operations\n- Add logging for cleanup actions\n- Handle errors gracefully (don't fail if cleanup fails)\n\n### Platform Considerations\n- Linux only (rootlessport is Linux-specific)\n- Should be safe to run on systems without rootlessport\n- Only affects systemd platform (macOS launchd doesn't use rootlessport)\n\n### Testing\n- Unit tests for cleanup function\n- Integration tests simulating orphaned processes\n- Manual testing with failed services","acceptance_criteria":"### Rootlessport Cleanup\n- Orphaned rootlessport processes are detected and killed before service starts\n- Port binding conflicts are resolved automatically\n- Cleanup only affects processes owned by current user\n- No impact on running services that shouldn't be cleaned up\n\n### Error Handling\n- Cleanup failures don't prevent service operations\n- Appropriate logging for cleanup actions\n- Graceful degradation when rootlessport not present\n\n### Testing Validation\n- Manual reproduction of orphaned process scenario works\n- Integration tests pass with simulated failures\n- No regressions in existing functionality\n\n### Platform Safety\n- Linux-only implementation (macOS unaffected)\n- Safe to run on systems without podman/rootlessport\n- No security risks (only kills user-owned processes)","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-07T00:29:34.766225116-05:00","updated_at":"2025-11-07T00:31:10.504531795-05:00","closed_at":"2025-11-07T00:31:10.504531795-05:00","source_repo":".","labels":["cleanup","linux","podman","rootlessport","systemd"]}
{"id":"quad-ops-cn8","content_hash":"a5d7c355e796ca2613815709ed340fdfdd0189f369548d4fa8074d97d88b7429","title":"Restore v0.21.2 service-to-network mapping (DNS resolution failures)","description":"After the macOS refactor (commit 92dd0a3), service DNS lookups are failing when services try to connect to each other by hostname. This worked in v0.21.2.\n\n## Root Cause\nServices are not being connected to the specific networks they declare in docker-compose.yml. The spec converter only includes project-level networks, not service-level network declarations.\n\nExample from immich docker-compose.yml:\n- immich-server declares `networks: [default, infrastructure-proxy]`\n- When immich-server tries to connect to `redis` hostname, it fails with `EAI_AGAIN` because redis is not on the same network\n\n## Impact\n- Service-to-service DNS resolution fails on both Linux and macOS\n- Services using depends_on with hostname resolution are broken\n- Any multi-network compose file with internal service communication fails\n\n## Solution\nRestore the v0.21.2 behavior where services are connected to their declared networks and renderers generate proper network configuration.","notes":"Closed - Both underlying issues have been fixed: 1) Service-to-network mapping restored (commit f959e8c), 2) Volume/network dependency suffixes corrected (commit 6377d90). The 'Unit not found' errors observed during the previous sync were due to the incorrect dependency suffix names, which is now resolved.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-08T15:57:52.516466306-05:00","updated_at":"2025-11-08T20:58:39.277966653-05:00","closed_at":"2025-11-08T20:58:36.785354157-05:00","source_repo":"."}
{"id":"quad-ops-d4k","content_hash":"be8d0df32ed579766fdd40ef5dc1b57d94190895a22b3d22a0c9524004de5e6e","title":"Missing tmpfs mount options: size and other tmpfs-specific options","description":"tmpfs mount options like size not fully supported in current implementation.","design":"## Problem\nDocker Compose tmpfs mounts support size and mode options via `tmpfs.size` and `tmpfs.mode`. Additional tmpfs options like uid/gid may also be needed. These are currently partially converted but not fully rendered.\n\n## Source Data\n- compose-spec library: `types.ServiceVolumeConfig.Tmpfs.Size` (UnitBytes), `.Mode` (uint32)\n- compose-spec also uses `types.ServiceConfig.Tmpfs` ([]string) for simple tmpfs paths\n- Location: `internal/compose/spec_converter.go:convertVolumeMounts()` and renderer\n\n## Target Format\nQuadlet supports tmpfs via `Tmpfs=` directive with comma-separated options:\n```\nTmpfs=/tmp:rw,size=64m,mode=1777,uid=1000,gid=1000\n```\n\nOptions:\n- `size=\u003cbytes\u003e` (e.g., 64m, 1g)\n- `mode=\u003coctal\u003e` (e.g., 1777, 0755)\n- `uid=\u003cuid\u003e` (numeric)\n- `gid=\u003cgid\u003e` (numeric)\n- `ro` or `rw` (readonly/readwrite)\n\n## Implementation Plan\n1. Update `internal/service/models.go`:\n   - Add `TmpfsOptions` struct with `Size string`, `Mode uint32`, `UID int`, `GID int` fields\n   - Add `TmpfsOptions *TmpfsOptions` field to `Mount` struct\n\n2. Update `internal/compose/spec_converter.go:convertVolumeMounts()`:\n   - For tmpfs-type mounts, check `v.Tmpfs != nil`\n   - Create `TmpfsOptions` and populate from `v.Tmpfs.Size`, `v.Tmpfs.Mode`\n   - Handle size conversion from UnitBytes to string format (e.g., \"64m\")\n\n3. Update `internal/platform/systemd/renderer.go:addMounts()`:\n   - Tmpfs mounts already use separate `Tmpfs=` directive (see line 326-333)\n   - Update to build options string from `TmpfsOptions` if present\n   - Format: `Tmpfs=/path:option1,option2,option3`\n\n4. Add test cases:\n   - `internal/compose/testdata/golden/` - add compose file with tmpfs size/mode\n   - `internal/platform/systemd/renderer_test.go` - test Tmpfs= with size and mode options","acceptance_criteria":"- tmpfs size option is preserved\n- Other tmpfs options (mode, etc.) are supported\n- Rendered correctly in Quadlet","status":"closed","priority":3,"issue_type":"bug","created_at":"2025-11-09T13:44:34.801736-05:00","updated_at":"2025-11-09T16:08:15.304679-05:00","closed_at":"2025-11-09T16:08:15.304679-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-d4k","depends_on_id":"quad-ops-hlf","type":"parent-child","created_at":"2025-11-09T13:44:34.802175-05:00","created_by":"daemon"}]}
{"id":"quad-ops-d99","content_hash":"2f1c883460f80467e1bfd75b5e6266434bd13acf73a7686d3eae7bbf7577f9b1","title":"x-podman-volumes documentation doesn't match implementation scope","description":"The build-support.md documentation shows x-podman-volumes being used in the \"Custom Build Volumes\" section and describes them as \"for build-time volume mounts\", but the actual implementation applies x-podman-volumes to container mounts (runtime), not build mounts (build-time).\n\nThe documentation example (lines 256-266) shows:\n```yaml\nservices:\n  app:\n    build:\n      context: .\n    x-podman-volumes:\n      - \"build-cache:/cache\"\n```\n\nBut the implementation in spec_converter.go:62-66 applies these to service.Container.Mounts, not service.Build.\n\nThis creates a mismatch between documented behavior and actual behavior.","acceptance_criteria":"Either:\nA) Update documentation to clarify that x-podman-volumes applies to container runtime, not build-time\nB) Implement x-podman-volumes support for the build stage specifically\nC) Create separate x-podman-build-volumes extension for build-time volumes\n\nCurrent implementation needs clarification on scope and purpose.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-09T23:13:21.793191-05:00","updated_at":"2025-11-09T23:24:16.21464-05:00","closed_at":"2025-11-09T23:24:16.21464-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-d99","depends_on_id":"quad-ops-3i1","type":"blocks","created_at":"2025-11-09T23:13:21.793716-05:00","created_by":"daemon"}]}
{"id":"quad-ops-eca","content_hash":"b3ccfa40e0da69c208078e1620c2c3d518835d61cb2f3e9f64ee9a787fc26ce1","title":"Nested git repos still being processed despite .git skip logic","description":"After implementing .git directory detection to skip nested repository clones in compose/reader.go, mm-f1 services are still being processed from test/bdyvp22/quad-ops-deploy/prod/mm-f1/.\\n\\nThe nested quad-ops-deploy directory at test/bdyvp22/quad-ops-deploy/ contains a .git directory, but the walk is still descending into it and processing mm-f1 compose files.\\n\\n## Expected Behavior\\nWhen ReadProjects walks test/bdyvp22/, it should:\\n1. Process test/bdyvp22/devops, infrastructure, llm, media, monitoring/*, news/* (correct)\\n2. Skip test/bdyvp22/quad-ops-deploy because it contains .git\\n3. NOT process test/bdyvp22/quad-ops-deploy/prod/mm-f1\\n\\n## Actual Behavior\\nmm-f1 is still in the processed projects list.\\n\\n## Possible Issues\\n- Code change may not have been recompiled into the binary\\n- .git directory check logic may not be working as intended\\n- Verbose logging not showing the skip message means the code path may not be executing\\n- May need to verify the actual file path structure of the nested repo\",\n\u003cparameter name=\"design\"\u003eThe fix in compose/reader.go (lines 59-66) adds a check:\\n```go\\nif info.IsDir() {\\n    gitPath := filepath.Join(filePath, \\\".git\\\")\\n    if gitInfo, err := os.Stat(gitPath); err == nil \u0026\u0026 gitInfo.IsDir() {\\n        logger.Debug(\\\"Skipping nested repository directory\\\", \\\"path\\\", filePath)\\n        return filepath.SkipDir\\n    }\\n}\\n```\\n\\nBut the expected \\\"Skipping nested repository directory\\\" debug message is not appearing in the output, suggesting this code path is not being reached.\\n\\nNeed to:\\n1. Verify binary was rebuilt with the new code\\n2. Add additional logging to trace which directories are being examined\\n3. Verify the .git detection logic is correct\\n4. Consider alternative approach if current logic is insufficient\",\n\u003cparameter name=\"deps\"\u003e[\"quad-ops-pei\"]","acceptance_criteria":"Verify that mm-f1 is NOT processed when sync runs on a composeDir containing nested git repos\"","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-11-09T13:24:19.227262073-05:00","updated_at":"2025-11-09T13:25:12.219288049-05:00","closed_at":"2025-11-09T13:25:12.219288049-05:00","source_repo":"."}
{"id":"quad-ops-eki","content_hash":"8cd30106d97c30ed08660f659a3b165190d1e66d957a8eb33559115f143c372c","title":"SystemD renderer generates incorrect volume/network dependency names","description":"The renderer writes container unit files that reference volumes and networks with `-volume` and `-network` suffixes, but the actual unit files use `.volume` and `.network` suffixes.\n\nThis causes systemd to fail to find the dependencies:\n- Container file wants: `After=media_immich-model-cache-volume.service Requires=media_immich-model-cache-volume.service`\n- Actual file: `media_immich-model-cache.volume`\n\nThis breaks all service startup since required volume/network units are not found.\n\nLines in renderer.go:\n- 148-149: volume dependencies use `-volume.service` but should be `.volume`\n- 158-159: network dependencies use `-network.service` but should be `.network`","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-08T20:56:23.385447554-05:00","updated_at":"2025-11-08T20:57:22.558326279-05:00","closed_at":"2025-11-08T20:57:22.558326279-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-eki","depends_on_id":"quad-ops-cn8","type":"blocks","created_at":"2025-11-08T20:56:23.390167589-05:00","created_by":"daemon"}]}
{"id":"quad-ops-f0n","content_hash":"e74117ca08bd00f22a02043d7cf8ccee2fe9bb3e7ca2fce61fe73d2af0732787","title":"Improve dependency resolution and cycle detection in dependency graph","description":"Enhance internal/dependency/dependency.go with cycle detection algorithm, improved error messages, and methods for dependency resolution and conflict detection. Add comprehensive unit tests.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T23:26:38.535540275-05:00","updated_at":"2025-11-07T00:44:14.553830389-05:00","closed_at":"2025-11-07T00:44:14.553830389-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-f0n","depends_on_id":"quad-ops-9y2","type":"parent-child","created_at":"2025-11-06T23:26:40.071540677-05:00","created_by":"daemon"}]}
{"id":"quad-ops-fdg","content_hash":"0d7f54f9f46a81fd828dcd5c40fdd30987bd99e95304f810525f6af43e76a05f","title":"Test: end-to-end scenario from quad-ops discussion #52","description":"Create integration test that simulates the original error scenario from https://github.com/trly/quad-ops/discussions/52\n\nTest case:\n- Multiple Docker Compose projects (dozzle, llm, scrutiny, beszel)\n- All reference shared infrastructure-proxy network\n- Verify converter produces correct network references without project prefixes\n- Verify renderer generates valid quadlet units for all projects\n\nThis validates the complete fix for the originally reported bug where containers referenced non-existent network units like dozzle-infrastructure-proxy.network instead of infrastructure-proxy.network.","status":"open","priority":4,"issue_type":"task","created_at":"2025-11-09T12:32:26.433013033-05:00","updated_at":"2025-11-09T12:32:26.433013033-05:00","source_repo":"."}
{"id":"quad-ops-fw5","content_hash":"58b74329e4d666a9c55a26dd775605038a5f5a30c09c961d58460a683c8f43da","title":"Update golden test files after fixing double-prefixing in resource names","description":"The golden test files expect double-prefixed resource names (e.g., 'project-project_resource'), but the fix removed the double-prefixing. Update all golden test files to reflect the correct single-prefixed names.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T23:43:36.979420254-05:00","updated_at":"2025-11-07T00:25:29.909893381-05:00","closed_at":"2025-11-07T00:25:29.909893381-05:00","source_repo":"."}
{"id":"quad-ops-g76","content_hash":"83596d521a1f674b16ab9c85779cb9fb7d0c4de8a297ec01970bc3baaf68add8","title":"create config init command","description":"","design":"Implement a new config sub-command init\n\nThis should:\n- follow existing sub-command patterns\n- setup a default config in either the default user location or system location pointing to quad-ops examples in the repository\n  ```yaml\n  repositories:\n  - name: quad-ops-compose  # Repository name (required)\n    url: \"https://github.com/example/repo.git\"  # Git repository URL (required)\n    ref: \"main\"  # Git reference to checkout: branch, tag, or commit hash (optional)\n    composeDir: \"compose\"  # Subdirectory where Docker Compose files are located (optional)\n  ```\n","acceptance_criteria":"Command successfully creates an example config, has passing tests, and builds successfully\n","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-11-06T21:13:51.911801815-05:00","updated_at":"2025-11-06T21:22:11.392787089-05:00","closed_at":"2025-11-06T21:22:11.392787089-05:00","source_repo":"."}
{"id":"quad-ops-gle","content_hash":"5bd367147d8d2f9a073a49f94d080cd97d1f1ed8da25ad10cfedd12dc6448fe6","title":"Remove artifact upload conditional from build.yml","description":"Remove the `if: startsWith(github.ref, 'refs/tags/')` condition from the artifact upload step (line 84-91) so artifacts are saved on every commit, not just tags.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-08T21:51:02.241460002-05:00","updated_at":"2025-11-08T22:08:03.678381934-05:00","closed_at":"2025-11-08T22:08:03.678381934-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-gle","depends_on_id":"quad-ops-1bz","type":"discovered-from","created_at":"2025-11-08T21:51:02.245596857-05:00","created_by":"daemon"}]}
{"id":"quad-ops-gwj","content_hash":"43e4a6afdfdfece3afddd41758bebd4cc28b833c04c06dba4c400f7ab656c3ad","title":"Lost Compose depends_on conditions - no service_healthy or condition support","description":"convertDependencies is called but doesn't implement condition parsing (service_started, service_healthy). Renderer treats all dependencies uniformly (After/Requires), losing condition semantics from v0.21.2.","design":"Implement convertDependencies to parse Compose v2 semantics: service_started and service_healthy both map to After/Requires in systemd (healthy gating cannot be enforced without larger design, but preserve order). Treat missing/unknown condition as service_started. Validate cross-spec dependencies in service.Validate or post-pass to error if Spec.DependsOn references unknown service specs.","acceptance_criteria":"- depends_on with conditions are parsed and converted to After/Requires\n- Unknown service dependencies cause validation errors\n- Order preservation matches v0.21.2 behavior","notes":"Implementation complete:\n- Added comprehensive tests covering all condition types (service_started, service_healthy, service_completed_successfully, missing, unknown)\n- Updated convertDependencies() to parse and validate conditions\n- All conditions map to After/Requires in systemd (documented in code)\n- Unknown conditions treated as service_started\n- Order preservation maintained via sorting\n- All 1052 tests pass (added 9 new tests)\n\nNote: Cross-spec dependency validation (unknown service errors) deferred to quad-ops-ts0 as it requires broader validation framework.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-11-09T13:44:34.746029-05:00","updated_at":"2025-11-09T14:40:04.114721-05:00","closed_at":"2025-11-09T14:40:04.114721-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-gwj","depends_on_id":"quad-ops-hlf","type":"parent-child","created_at":"2025-11-09T13:44:34.746484-05:00","created_by":"daemon"}]}
{"id":"quad-ops-h0f","content_hash":"28491ed57ea0bf9adc588899a5fcc64a65a3f7b7dd97b2549cd85ac0b64468d2","title":"Missing Compose feature: extra_hosts (AddHost)","description":"v0.21.2 supported extra_hosts via AddHost field. Current models.go has no Container.AddHost field and spec_converter doesn't convert it.","design":"Add Container.AddHost []string field in models.go. Convert service.ExtraHosts in spec_converter. Render as AddHost= directives in systemd renderer.","acceptance_criteria":"- extra_hosts in compose converts to AddHost directives\n- Multiple extra_hosts render correctly\n- Test coverage for extra_hosts conversion","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-09T13:44:34.768476-05:00","updated_at":"2025-11-09T15:15:08.912717-05:00","closed_at":"2025-11-09T15:15:08.912717-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-h0f","depends_on_id":"quad-ops-hlf","type":"parent-child","created_at":"2025-11-09T13:44:34.768983-05:00","created_by":"daemon"}]}
{"id":"quad-ops-h0s","content_hash":"820604479d74f50e27569aa083bd1d1113604e0bb7507618a9263c26c28d0948","title":"Investigate service activation timeout handling for long-starting services","description":"During testing, multi-service-webapp service failed with activation timeout error but actually succeeded after the timeout period. The waitForActivation logic needs improvement to handle services that take longer than expected to start.\n\nNeed to:\n- Review waitForActivation timeout logic and substate handling\n- Consider making timeouts more configurable or adaptive\n- Add better detection of when a service is actually starting vs truly failed\n- Test with services that have long startup times (image pulls, initialization)","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-07T00:39:19.991396935-05:00","updated_at":"2025-11-07T00:39:19.991396935-05:00","source_repo":".","labels":["lifecycle","systemd","timeout"]}
{"id":"quad-ops-h26","content_hash":"fd0e48c3b1d25dd17ea8ba44eddf1885d3b07119685d86f4f38be61b486f7565","title":"Fix Quadlet volume directive: remove incorrect .volume suffix","description":"The renderer incorrectly appends `.volume` suffix to volume sources in Quadlet Volume= directives.\n\n**Location:** internal/platform/systemd/renderer.go lines 290-291\n\n**Current behavior:**\n```go\nif m.Type == service.MountTypeVolume {\n    source = source + \".volume\"  // Incorrect - Quadlet handles this automatically\n}\n```\n\nProduces: `Volume=miniflux_db-data.volume:/path`\n\n**Expected behavior:**\nRemove the `.volume` suffix. Quadlet resolves named volumes automatically:\n- Correct: `Volume=miniflux-db-data:/path/in/container`\n- Incorrect: `Volume=miniflux_db-data.volume:/path/in/container`\n\n**Documentation:** Per Podman docs, if SOURCE-VOLUME ends with `.volume`, Quadlet looks for that file and creates a dependency. For named volume references without explicit unit files, the suffix should NOT be included.\n\n**Effect:** Exacerbates volume name escaping bug—quadlet generator fails with \"requested Quadlet source not found\"\n\n**Part of:** https://github.com/trly/quad-ops/discussions/52 (Quadlet generator analysis)","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-09T12:22:21.895650177-05:00","updated_at":"2025-11-09T12:33:45.234454271-05:00","closed_at":"2025-11-09T12:33:45.234454271-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-h26","depends_on_id":"quad-ops-712","type":"blocks","created_at":"2025-11-09T12:22:21.896346729-05:00","created_by":"daemon"},{"issue_id":"quad-ops-h26","depends_on_id":"quad-ops-3kb","type":"related","created_at":"2025-11-09T12:22:25.12199568-05:00","created_by":"daemon"}]}
{"id":"quad-ops-h7w","content_hash":"eafceb8a05ad0d9c448971d9489d5ccd2595d8b2957dcdd0b115b3cf45dd7830","title":"Validate end-to-end unit_list behavior on systemd and launchd","description":"After code changes and tests are complete, validate the fix works end-to-end. Manual verification on Linux with systemd, macOS with launchd. Verify unit list returns deployed units, status lookups work, filtering is correct, and no regressions in test suite or linter.","acceptance_criteria":"Manual testing on Linux (systemd) passes. Manual testing on macOS (launchd) passes. Full test suite passes without regressions. Linter passes without issues. Test coverage maintained or improved. No new warnings or errors introduced.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-08T16:02:54.788929932-05:00","updated_at":"2025-11-08T16:02:54.788929932-05:00","source_repo":".","labels":["e2e","manual-test","validation"]}
{"id":"quad-ops-hak","content_hash":"3884ea4268c3d05e573fd2f95e849da12cc17456ccd58794d4dee716230d01c1","title":"Update launchd renderer to connect services to their declared networks","description":"Update internal/platform/launchd/podmanargs.go to handle service-level networks.\n\nThe function BuildPodmanArgs needs to:\n1. Extract service networks from spec.Networks\n2. Add --network flag for each network the service should join\n3. Handle multiple network connections properly (order matters for primary network)\n\nCurrently only spec.Container.Network.Mode is used. Need to expand to include all declared networks.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-08T15:58:03.016095468-05:00","updated_at":"2025-11-08T16:55:43.936761371-05:00","closed_at":"2025-11-08T16:55:43.936761371-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-hak","depends_on_id":"quad-ops-69e","type":"blocks","created_at":"2025-11-08T15:58:03.020597325-05:00","created_by":"daemon"}]}
{"id":"quad-ops-hlf","content_hash":"48e02ebe9147d04f516edecb998ac1c15a06fa5c3a591b7196d6f52dee5a803e","title":"Remaining Work: Cross-platform Parity \u0026 Compose Feature Completeness","description":"Comprehensive review of all changes since v0.21.2 to identify and track regressions introduced during the v0.22.0 refactoring. Focus areas: dependencies, sync order, and functional parity with the working v0.21.2 release.","acceptance_criteria":"- All issues in epic are resolved\n- v0.21.2 functionality fully restored\n- All critical dependencies and networking behavior restored\n- All resource constraints working correctly\n- All mount options supported (nocopy, SELinux, tmpfs)\n- All Compose features restored (extra_hosts, dns, devices, init containers)","notes":"INVESTIGATION COMPLETE\n\n**Analysis Documents**:\n- history/regression-analysis-v0.22.0.md (comprehensive findings)\n- history/regression-fix-status.md (prior work \u0026 fix status)\n\n**Key Findings**:\n- 15 regressions identified, 1 already fixed (quad-ops-lpb)\n- 5 have related prior work (partial fixes or conflicts)\n- 9 have no prior attempts\n\n**Critical Insights**:\n1. External networks fixed (quad-ops-1sn, 6ph, 0r1)\n2. Service networks restored (quad-ops-cn8)\n3. Dependency suffixes fixed (quad-ops-eki, h26, 712)\n4. Resource constraints partially done (quad-ops-24q)\n5. Name normalization creates compatibility issue (quad-ops-6rg vs quad-ops-ksi)\n\n**Major Gaps**:\n- Over-broad volume dependencies (all services depend on all volumes)\n- Missing network-online.target\n- Missing RequiresMountsFor\n- depends_on conditions not parsed\n- Init containers simplified (volumes/networks/env dropped)\n- Missing Compose features (extra_hosts, dns, devices)\n\n**Next Steps**:\nPhase 1: Resolve inter-dependencies (p22 vs 8oo, ksi vs 6rg)\nPhase 2: Critical fixes (iaa, i12, 581)\nPhase 3: Dependency completeness (gwj)\nPhase 4: Feature parity (1wy, h0f, 4i2, 167)\nPhase 5: Mount options (xru, rqe, d4k)","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-11-09T13:34:33.999764-05:00","updated_at":"2025-11-09T23:32:08.332103105-05:00","closed_at":"2025-11-09T23:06:28.824106-05:00","source_repo":"."}
{"id":"quad-ops-i12","content_hash":"d3e7af6a943e0aaa5000b4543d175b421ce91e799c4d725f93f91d526e88079e","title":"Missing network-online.target dependencies for network reliability","description":"Container units don't include After=network-online.target and Wants=network-online.target. This causes containers to start before network is fully initialized, leading to port binding failures and DNS issues.","design":"Add Wants=network-online.target and After=network-online.target to container units when the container uses any networks or has PublishPort directives. Location: renderContainer() around line 133 in internal/platform/systemd/renderer.go.","acceptance_criteria":"- Containers with networks include network-online.target dependency\n- Containers with published ports include network-online.target dependency\n- Boot-time network races are eliminated","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-09T13:44:34.731707-05:00","updated_at":"2025-11-09T14:29:37.228283-05:00","closed_at":"2025-11-09T14:29:37.228283-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-i12","depends_on_id":"quad-ops-hlf","type":"parent-child","created_at":"2025-11-09T13:44:34.732127-05:00","created_by":"daemon"}]}
{"id":"quad-ops-ia2","content_hash":"3485ff7c8638cc1ee005d52214d24e73c94709376fd8aeec615e6548079bf897","title":"artifact_helpers.go - launchd.Options has no field or method LabelPrefix","description":"","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-06T20:28:13.28390877-05:00","updated_at":"2025-11-06T20:31:56.072325037-05:00","closed_at":"2025-11-06T20:31:56.072325037-05:00","source_repo":"."}
{"id":"quad-ops-iaa","content_hash":"9e6b43b892487d3c1efc9b180d4c2ca9aaa3cdac31796401b54ec099b34d7e6e","title":"Over-broad volume dependencies - services depend on unrelated volumes","description":"spec_converter.go:convertService sets spec.Volumes = convertProjectVolumes(project) for every service, causing all services to depend on ALL project volumes regardless of actual usage. Renderer then adds After/Requires for all those volumes.","design":"Change SpecConverter.convertService to set spec.Volumes = only the project volumes actually referenced in composeService.Volumes of type \"volume\", not all project volumes. Renderer behavior unchanged - continues adding After/Requires for spec.Volumes (which will now be accurate).","acceptance_criteria":"- Services only depend on volumes they actually use\n- Service without volumes has no volume dependencies\n- Multiple services can share same volume (deduplication in artifact store)","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-09T13:44:34.71062-05:00","updated_at":"2025-11-09T14:25:03.092827-05:00","closed_at":"2025-11-09T14:25:03.092827-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-iaa","depends_on_id":"quad-ops-hlf","type":"parent-child","created_at":"2025-11-09T13:44:34.712209-05:00","created_by":"daemon"}]}
{"id":"quad-ops-j0q","content_hash":"c3df32373b8543581a6f953737f68ece9f08c7c1522917e86bbab63e709612b7","title":"Implement Memory and MemorySwap directive rendering","description":"Update systemd renderer addResources() to output Memory=, MemoryReservation=, and MemorySwap= directives to [Container] section when values are present. These map directly to Quadlet native support.","acceptance_criteria":"- Memory field renders as Memory=\u003cvalue\u003e\n- MemoryReservation field renders as MemoryReservation=\u003cvalue\u003e\n- MemorySwap field renders as MemorySwap=\u003cvalue\u003e\n- Empty/zero values are not rendered\n- Directives appear in [Container] section of generated unit file\n- Tests pass","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-08T21:37:08.173079953-05:00","updated_at":"2025-11-08T21:40:00.940910583-05:00","closed_at":"2025-11-08T21:40:00.940910583-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-j0q","depends_on_id":"quad-ops-24q","type":"parent-child","created_at":"2025-11-08T21:37:08.177366531-05:00","created_by":"daemon"}]}
{"id":"quad-ops-jg5","content_hash":"ce271becebedfebffa80e18c0fe5167e3da0178431e953814c9a19b4cb41c2f0","title":"Missing stop_signal and stop_grace_period rendering (both platforms)","description":"Compose stop_signal and stop_grace_period are parsed and converted but never rendered, causing all containers to use default SIGTERM + 10s timeout.\n\nImpact: Custom stop signals ignored, grace periods ignored, potential data loss on hard kill.","design":"## Implementation Plan\n\n### 1. systemd Renderer (internal/platform/systemd/renderer.go)\n**Native Quadlet directives (preferred approach)**\n- Add `StopSignal` directive mapping from Container.StopSignal\n  - Default: \"SIGTERM\" (if empty)\n  - Format: Signal name without SIG prefix (e.g., \"TERM\", \"KILL\")\n  - Placement: [Service] section\n- Add `StopTimeoutSec` directive mapping from Container.StopGracePeriod\n  - Convert time.Duration to seconds\n  - Default: 10s (if zero)\n  - Format: Integer seconds (e.g., \"30\")\n  - Placement: [Service] section\n\n**Implementation steps**:\n1. Verify Container struct fields are populated by spec_converter\n2. Add conditional rendering in serviceFileContent() or renderService()\n3. Handle zero/empty values with Podman defaults\n4. Test both custom and default values\n\n### 2. launchd Renderer (internal/platform/launchd/podmanargs.go)\n**Podman run flags (only option for launchd)**\n- Add `--stop-signal` flag\n  - Value: Container.StopSignal (or default \"SIGTERM\")\n  - Append to podman run arguments\n- Add `--stop-timeout` flag\n  - Convert Container.StopGracePeriod to seconds\n  - Default: 10 seconds\n  - Append to podman run arguments\n\n**Implementation steps**:\n1. Identify where podman run arguments are built\n2. Add logic after main container arguments\n3. Ensure proper ordering (signals before timeout)\n4. Test with Podman macOS compatibility\n\n### 3. Validation \u0026 Testing\n**Unit tests** (table-driven):\n- Test systemd with custom signal + grace period\n- Test systemd with defaults (empty values)\n- Test systemd with SIGKILL (hard termination)\n- Test launchd with custom signal + timeout\n- Test launchd with defaults\n- Test edge cases (zero duration, empty signal)\n\n**Integration tests**:\n- Render complete Compose → verify output directives present\n- Verify signal names rendered correctly (TERM vs SIGTERM)\n- Verify duration conversion (10s → \"10\", 1m → \"60\")\n\n### 4. Files to Modify\n- `internal/platform/systemd/renderer.go` - Add directives\n- `internal/platform/launchd/podmanargs.go` - Add flags\n- `internal/platform/systemd/renderer_test.go` - Unit tests\n- `internal/platform/launchd/podmanargs_test.go` - Unit tests\n\n### 5. Success Criteria\n- ✅ StopSignal directive appears in systemd output\n- ✅ StopTimeoutSec directive appears in systemd output\n- ✅ --stop-signal flag appears in launchd podman args\n- ✅ --stop-timeout flag appears in launchd podman args\n- ✅ All test cases passing (\u003e95% coverage)","acceptance_criteria":"- stop_signal renders to StopSignal= on systemd\n- stop_grace_period renders to StopTimeoutSec= on systemd\n- stop_signal renders to --stop-signal on launchd\n- stop_grace_period renders to --stop-timeout on launchd\n- Test coverage for both platforms","notes":"Verified Quadlet native support:\n- StopSignal (native Quadlet directive)\n- StopTimeout (native Quadlet directive)\n\nAlso supported via Podman flags:\n- podman run --stop-signal\n- podman run --stop-timeout\n\nImplementation: Use native Quadlet directives on systemd, Podman flags on launchd","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-11-09T16:40:17.240822-05:00","updated_at":"2025-11-09T19:07:15.3746-05:00","closed_at":"2025-11-09T19:07:15.3746-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-jg5","depends_on_id":"quad-ops-hlf","type":"parent-child","created_at":"2025-11-09T16:51:18.506144-05:00","created_by":"daemon"}]}
{"id":"quad-ops-jp2","content_hash":"f6319f895f7a5138e86c9400d798a0b5b9009304a1530599befcdeb376dbe780","title":"Remove all divergence checks from unit list command","description":"The divergence check in the unit list command is no longer useful since we fixed the issue with package services being detected as managed units. The divergence check was designed to detect configuration drift between what should be deployed (from compose sources) vs what is deployed, but with the fix, the repo artifact store now correctly tracks only expected artifacts, making divergence checks redundant.","design":"Remove the checkDivergence method and related logic from unit_list.go. Simplify the unit list command to only show deployed artifacts without warnings about divergence.","acceptance_criteria":"Unit list command runs without divergence warnings, and the --show-divergence flag can be removed or made no-op.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-07T00:19:28.636456371-05:00","updated_at":"2025-11-07T00:23:48.322603169-05:00","closed_at":"2025-11-07T00:23:48.322603169-05:00","source_repo":".","labels":["cleanup","refactor"]}
{"id":"quad-ops-k86","content_hash":"e54f265dff1a38b4ea0bf7ade58b71016c146c5dc963bed677e4e0b602c65fbc","title":"quad-ops package services are detected as managed units","description":"Findings from analysis of artifact_helpers.go and unit_list.go divergence check: artifact_helpers.go provides cross-platform helpers for parsing service names, filtering artifacts by platform, and excluding unmanaged paths (e.g., .git, build dirs). The divergence check compares repository artifacts (git-managed) vs filesystem artifacts (deployed), identifying extra files on disk, missing deployments, and content mismatches via hash comparison.","design":"Only be concerned with services generated from the composeDir defined in internal/config for internal/repository. Configuration drift should represent what units/plists **should** be rendered (from compose sources) vs which **are** rendered, and if the on-disk unit appears to have been modified and doesn't or won't match what will be rendered.","notes":"❯ ./quad-ops -u unit list\ntime=2025-11-06T23:59:42.550-05:00 level=WARN msg=\"Divergence detected between repository and filesystem artifacts\"\ntime=2025-11-06T23:59:42.550-05:00 level=WARN msg=\"Artifacts in repository but not deployed\" count=2 paths=\"[quad-ops-examples/build/package/quad-ops@.service quad-ops-examples/build/package/quad-ops.service]\"\n","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-11-07T00:02:12.622566492-05:00","updated_at":"2025-11-07T00:19:25.156809673-05:00","closed_at":"2025-11-07T00:19:25.156809673-05:00","source_repo":"."}
{"id":"quad-ops-kgm","content_hash":"9bb8162cbfb502053e532345b0b86460a1fbfe7084b6e09d496448bdcd836210","title":"Review network dependency handling for unnecessary coupling","description":"The renderer adds dependencies on ALL networks in the spec if the container doesn't explicitly list service networks:\n\n```go\nif len(c.Network.ServiceNetworks) \u003e 0 {\n    // Uses service-specific networks ✅\n} else {\n    // Falls back to ALL networks in spec ⚠️ \n    for _, net := range spec.Networks {\n        if !net.External {\n            builder.WriteString(fmt.Sprintf(\\\"After=%s.network\\\\n\\\", net.Name))\n            builder.WriteString(fmt.Sprintf(\\\"Requires=%s.network\\\\n\\\", net.Name))\n        }\n    }\n}\n```\n\nThis creates unnecessary dependencies and could cause ordering issues. Consider only adding networks the container actually uses.","acceptance_criteria":"Review network dependency logic. Consider adding validation to warn if container's networks don't match declared spec networks. Update fallback logic to be more conservative.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-08T21:09:03.119049724-05:00","updated_at":"2025-11-08T21:09:03.119049724-05:00","source_repo":".","labels":["quadlet","task"]}
{"id":"quad-ops-ksi","content_hash":"82cd2f0db60769ebba71414df9c7c19f559323b6e29df7a0f66bcdc2f9bce38c","title":"Name instability - SanitizeName converts underscores to hyphens breaking compatibility","description":"SanitizeName converts underscores to hyphens (validate.go), potentially renaming units versus v0.21.2 and breaking dependency edges and sync detection.","design":"Preserve underscores in SanitizeName (don't convert) for backward compatibility. Only strip truly invalid characters. This prevents unit name changes that break dependency edges. Consider feature-flag or migration path.","acceptance_criteria":"- Service/volume/network names with underscores preserve underscores\n- Names match v0.21.2 naming\n- Dependencies resolve correctly with underscored names","notes":"CONFLICT: quad-ops-6rg (commit c25e201) normalized names to use hyphens for DNS compliance, but this breaks v0.21.2 compatibility which used underscores. Need migration strategy or feature flag to preserve old behavior.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-11-09T13:44:34.752942-05:00","updated_at":"2025-11-09T14:51:38.369931-05:00","closed_at":"2025-11-09T14:51:38.369931-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-ksi","depends_on_id":"quad-ops-hlf","type":"parent-child","created_at":"2025-11-09T13:44:34.753468-05:00","created_by":"daemon"}]}
{"id":"quad-ops-ld0","content_hash":"aab21b38d9f5bfb197854e6126749b58bf6e624938a99991ac023e1c60fc2fd4","title":"Duplicate PidsLimit directive can be rendered","description":"The renderer has two independent sources for PidsLimit that can both be written to the unit file:\n- Container.Resources.PidsLimit\n- Container.PidsLimit (duplicate field)\n\nBoth can be non-zero and both will be rendered, creating duplicate directives. Model should consolidate to single source.","acceptance_criteria":"Consolidate PidsLimit to single source. Document which field is the canonical one. Update rendering logic to use only one source. Add test to prevent duplicate directives.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-11-08T21:09:03.034343707-05:00","updated_at":"2025-11-08T21:46:25.118990234-05:00","closed_at":"2025-11-08T21:46:25.118990234-05:00","source_repo":".","labels":["bug","validation"]}
{"id":"quad-ops-lpb","content_hash":"a4c33c09c36a4885d60b24ae11d3a7c4557ac252212fb88559357750563f24c2","title":"External networks misclassified as managed - rendering unwanted .network files","description":"convertServiceNetworksList creates a Network with default driver \"bridge\" and External=false when a service references a network not in project.Networks. This should be External=true and should not render a .network file.","design":"In convertServiceNetworksList (when service references network not present in project.Networks), set External=true and do not set Driver/Options. Renderer must not create .network artifacts for external networks. Container should not Require/After external network units.","acceptance_criteria":"- External networks don't generate .network files\n- Services using external networks start without dependency on non-existent units\n- Mixed external/managed networks work correctly","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-09T13:44:34.725704-05:00","updated_at":"2025-11-09T13:47:07.904264-05:00","closed_at":"2025-11-09T13:47:07.904264-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-lpb","depends_on_id":"quad-ops-hlf","type":"parent-child","created_at":"2025-11-09T13:44:34.726218-05:00","created_by":"daemon"}]}
{"id":"quad-ops-lub","content_hash":"3f30aaf954eb0441bf855bacd9ecb25879a4759011476d5c945c1014292d6869","title":"Restore Linux network units functionality","description":"The systemd platform should properly render separate .network unit files for named networks from the service spec. Currently networks are only handled as part of container network mode.\n\nNeed to:\n- Ensure renderService creates separate artifacts for networks in spec.Networks  \n- Implement proper Quadlet network unit rendering with IPAM, DNS, and all supported options\n- Add network dependencies to container units (After/Requires)\n- Test that network units are created and managed properly\n\nThis restores the Linux-specific network management that was lost in the cross-platform abstraction.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-06T21:39:29.416134847-05:00","updated_at":"2025-11-06T21:59:01.799839888-05:00","closed_at":"2025-11-06T21:59:01.799839888-05:00","source_repo":".","labels":["linux","networks","platform-specific","quadlet"]}
{"id":"quad-ops-lym","content_hash":"ba104ef79583623d3eb16c903406c1b4b56a848ef8c26c97f69a6b582cc03d85","title":"Missing shm_size support for /dev/shm size configuration","description":"Compose shm_size not converted, causing applications using large shared memory (Chrome, PostgreSQL, NumPy) to fail with ENOSPC. Default 64MB is often too small.","design":"1. Add ShmSize string field to service.Container (internal/service/models.go)\n2. Convert service.ShmSize in spec_converter.go:convertResources() \n3. Render:\n   - systemd: Quadlet ShmSize= directive (native)\n   - launchd: --shm-size podman flag\n\nNote: Quadlet docs show ShmSize= as native directive","acceptance_criteria":"- shm_size in compose converts to Container.ShmSize\n- Renders as ShmSize= on systemd\n- Renders as --shm-size on launchd\n- Applications with large shared memory work\n- Test coverage for resource constraints","notes":"Verified Quadlet native support:\n- ShmSize (native Quadlet directive)\n\nAlso supported via Podman flag:\n- podman run --shm-size\n\nImplementation: Use native Quadlet directive on systemd, Podman flag on launchd","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-09T16:40:17.255174-05:00","updated_at":"2025-11-09T17:34:22.472114-05:00","closed_at":"2025-11-09T17:34:22.472114-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-lym","depends_on_id":"quad-ops-hlf","type":"parent-child","created_at":"2025-11-09T16:51:18.512304-05:00","created_by":"daemon"}]}
{"id":"quad-ops-m5f","content_hash":"8e8d67d196f5c74e1ebe23cb6d5a7bf208b2bb2ad29ac9c992272b46fb96177e","title":"Fix quadlet dependency translation for network and volume references","description":"When rendering quadlet container units, dependencies that are networks or volumes are incorrectly translated.\n\nCurrent behavior:\n- Network dependency `devops-infrastructure-proxy.network` becomes `After=devops-infrastructure-proxy.network.service`\n- This causes quadlet generator error: \"unable to translate dependency for devops-infrastructure-proxy.network\"\n\nExpected behavior (per Podman docs):\n- Network dependencies should be `After=network-name.network`\n- Volume dependencies should be `After=volume-name.volume`\n- Service dependencies should be `After=service-name.service`\n\nRoot cause: The renderer's renderContainer() function (lines 138-140) appends `.service` to ALL dependencies, but it should only append `.service` to actual service-to-service dependencies. Dependencies that already have a type suffix (`.network`, `.volume`) should not get `.service` appended.\n\nError message from quadlet:\n```\nquadlet-generator: converting \"devops-gogs.container\": unable to translate dependency for devops-infrastructure-proxy.network\nquadlet-generator: converting \"beszel-hub.container\": unable to translate dependency for beszel-infrastructure-proxy.network\nquadlet-generator: converting \"scrutiny-web.container\": unable to translate dependency for scrutiny-infrastructure-proxy.network\n```","acceptance_criteria":"Identify how dependencies are distinguished (service vs network vs volume). Render network/volume dependencies with correct type suffix (`.network`, `.volume`), not `.service`. Ensure quadlet generator accepts the rendered units without \"unable to translate dependency\" errors. Add tests covering service-to-service, service-to-network, and service-to-volume dependencies.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-11-09T12:40:37.633207593-05:00","updated_at":"2025-11-09T12:42:54.080523176-05:00","closed_at":"2025-11-09T12:42:54.080523176-05:00","source_repo":"."}
{"id":"quad-ops-ni3","content_hash":"9e25b0e86da49521a80ee741a5a3b899d1c63e8c533a01a9c7abd20ab45695f9","title":"Document or fix Entrypoint/Exec space-joining escaping","description":"Entrypoint and Exec directives are currently built by space-joining array elements:\n\n```go\nif len(c.Entrypoint) \u003e 0 {\n    builder.WriteString(\"Entrypoint=\" + strings.Join(c.Entrypoint, \" \") + \"\\n\")\n}\n```\n\nThis breaks if array elements contain spaces, e.g.:\n- Original array: [\\\"sh\\\", \\\"-c\\\", \\\"echo 'hello world'\\\"]\n- Rendered: Entrypoint=sh -c echo 'hello world'\n\nShould either:\n1. Implement proper shell escaping\n2. Document this as a limitation in migration guide\n3. Research Quadlet's expected format for these directives","acceptance_criteria":"Research Quadlet format for Entrypoint/Exec with arguments containing spaces. Implement proper escaping or document limitation with examples of what works/doesn't work.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-08T21:09:03.091448683-05:00","updated_at":"2025-11-08T21:09:03.091448683-05:00","source_repo":".","labels":["quadlet","task"]}
{"id":"quad-ops-o3w","content_hash":"2027f4177539feeebb157dc4a4e22cf747af64998b5581bf11061b396102c5a3","title":"Document tag management: prevent tag reuse in releases","description":"Add documentation explaining that git tags cannot be reused for releases. Once a tag is pushed and triggers the release workflow, moving it to a different commit will cause the second release attempt to fail with asset already_exists errors. Should document the correct workflow: bump version, create new tag, push. If corrections are needed before release, delete tag+release and create new version.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-08T22:12:31.191482724-05:00","updated_at":"2025-11-08T22:12:31.191482724-05:00","source_repo":"."}
{"id":"quad-ops-p22","content_hash":"2f9e5ccdbf9c6b0e1d6efff77ca08c99f540ff5af2e4df79667261ba34af37a6","title":"Missing network dependencies - containers don't depend on network units","description":"Renderer only adds network After/Requires from Container.Network.ServiceNetworks. If convertNetworkMode doesn't populate this (fallback to project networks), containers won't depend on any .network units even though spec.Networks are rendered.","design":"In SpecConverter.convertNetworkMode, always populate Container.Network.ServiceNetworks with the resolved network names the service joins. If service doesn't declare networks, populate with project default networks. In systemd.Renderer.renderContainer, if Container.Network.ServiceNetworks is empty, fall back to spec.Networks (ensures dependencies on default networks).","acceptance_criteria":"- Containers with networks have After/Requires for those .network units\n- Containers without explicit networks depend on project default networks\n- Network units are created before container starts","notes":"FIXED\n\n**Root Cause**: \nCommit 1b328e7 removed fallback logic that added dependencies to ALL project networks when ServiceNetworks was empty. This was correct to prevent over-broad dependencies, but it inadvertently broke default network assignment. When a service doesn't explicitly declare networks in Docker Compose, it should use the project's default networks.\n\n**Solution Implemented**:\n1. Modified `convertNetworkMode()` to populate `ServiceNetworks` with project default networks when service has no explicit network declarations\n2. Fixed external network handling to NOT apply project prefix (was inconsistent)\n3. Added comprehensive tests covering all network dependency scenarios\n\n**Changes**:\n- `internal/compose/spec_converter.go`: Added logic to populate ServiceNetworks with project default networks when empty\n- `internal/compose/spec_converter.go`: Fixed external network prefix handling in convertServiceNetworksList\n- `internal/compose/network_dependencies_test.go`: Added 6 new tests for network dependency behavior\n- `internal/compose/spec_converter_test.go`: Updated test expectation for external network naming\n\n**Test Coverage**:\n✅ Services with explicit networks get proper ServiceNetworks\n✅ Services without explicit networks use project default networks\n✅ Services with multiple default networks get all of them\n✅ External networks are handled correctly (no prefix)\n✅ Bridge mode services work correctly\n✅ Edge case: projects with no networks\n\nAll tests pass with no regressions.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-09T13:44:34.719526-05:00","updated_at":"2025-11-09T14:18:00.99817-05:00","closed_at":"2025-11-09T14:18:00.99817-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-p22","depends_on_id":"quad-ops-hlf","type":"parent-child","created_at":"2025-11-09T13:44:34.720028-05:00","created_by":"daemon"}]}
{"id":"quad-ops-pb1","content_hash":"6e7696b04fdf638a51c22fcd9259c3d954626cc8d3eb8a446fa753be41030096","title":"Test: systemd renderer with external networks","description":"Add integration test in renderer_test.go to validate that containers using external (non-prefixed) networks generate correct systemd unit dependencies.\n\nTest scenario:\n- Container uses both an external network (infrastructure-proxy) and a local network (backend)\n- External network should NOT have project prefix in dependencies\n- Local network SHOULD have project prefix in dependencies\n- Verify generated container unit file has correct After/Requires for both networks\n\nThis validates end-to-end that the compose converter fix (quad-ops-1sn) produces correct quadlet artifacts.","status":"open","priority":4,"issue_type":"task","created_at":"2025-11-09T12:32:26.421993532-05:00","updated_at":"2025-11-09T12:32:26.421993532-05:00","source_repo":"."}
{"id":"quad-ops-pd6","content_hash":"8bc806ee4225e9e1fa72cc709cc26cf55eb379da24d5c6a5f2839089c7d3e377","title":"Implement dependency-aware lifecycle ordering in launchd (StartMany, StopMany, RestartMany)","description":"internal/platform/launchd/lifecycle.go (lines 250, 259, 268): StartMany, StopMany, and RestartMany methods have \\\"no dependency ordering\\\" comments, indicating they iterate without respecting service dependencies.\\n\\nSystemd has fully implemented dependency-aware lifecycle (see internal/platform/systemd/lifecycle.go):\\n- StartMany() respects forward dependencies\\n- StopMany() uses reverse dependency order\\n- RestartMany() respects dependency order\\n\\nLaunchd counterparts need equivalent implementation to avoid race conditions and startup/shutdown failures when services have inter-dependencies.\\n\\nPrerequisites:\\n- Plist dependency fields (quad-ops-26t)\\n- Launchd renderer dependency output (quad-ops-9ha)\\n\\nAnalysis: See history/quad-ops-9y2-improve-cross-platform-dependency-management.md Phase 2-3 for implementation details.","design":"## Implementation Architecture\n\n### Current State\n- **cmd/up.go**: Lines 329-376 - Uses `registry.orderAndExpand()` to resolve dependency order before calling `StartMany`\n- **cmd/down.go**: Lines 116-161 - Collects services to stop but does NOT order them, calls `StopMany` with arbitrary order\n- **cmd/sync.go**: Line 175 - Calls `RestartMany` with ordered services\n- **internal/platform/systemd/lifecycle.go**: Lines 260-423 - Fully implements dependency-aware ordering\n- **internal/platform/launchd/lifecycle.go**: Lines 250-275 - Currently ignores ordering, iterates without sequence\n\n### Key Insight\nThe commands pass **ordered service names** to lifecycle methods:\n- `up.go` pre-orders via `registry.orderAndExpand()` (topological sort)\n- `sync.go` pre-orders services\n- `down.go` does NOT pre-order (BUG to fix separately: quad-ops-w84)\n\n### Implementation Plan\n\n**Phase 1: Sequential Processing (3 methods)**\n\n1. **StartMany** (line 251-257):\n   - Change from concurrent iteration to **sequential processing**\n   - Services already ordered by dependency graph upstream\n   - Process in provided order (respects forward dependencies)\n   - Return map of results as before\n\n2. **StopMany** (line 259-266):\n   - **Reverse the service list** (like systemd line 327-330)\n   - Process sequentially in reversed order\n   - Return map of results\n   - Note: down.go should pre-order services (separate issue quad-ops-w84)\n\n3. **RestartMany** (line 268-275):\n   - Process sequentially in provided order\n   - Services already ordered by dependency graph upstream\n   - Return map of results\n\n**Key Changes**:\n- Replace `for name := range names` loops with sequential processing\n- Add debug logging showing sequential execution\n- Keep error handling (log but continue processing)\n- No interface changes needed\n- No dependency metadata needed in methods (ordering happens upstream)\n\n### Testing Strategy\n- Modify existing lifecycle tests to verify sequential order\n- Add integration test with dependent services (e.g., app → postgres)\n- Verify start waits for dependencies\n- Verify stop reverses order\n- Both systemd and launchd should behave identically\n\n### Files to Modify\n1. `internal/platform/launchd/lifecycle.go` - Three methods\n2. `internal/platform/launchd/lifecycle_test.go` - Add sequential order tests\n3. `cmd/down_test.go` - Adjust expectations for sequential stopping","acceptance_criteria":"./quad-ops up/down/sync on macOS respects service dependency order without race conditions. StartMany waits for dependencies, StopMany reverses order, RestartMany maintains ordering","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-08T16:01:30.68064453-05:00","updated_at":"2025-11-08T18:13:09.769813753-05:00","closed_at":"2025-11-08T18:13:09.769813753-05:00","source_repo":".","labels":["dependencies","launchd","lifecycle","platform-specific"],"dependencies":[{"issue_id":"quad-ops-pd6","depends_on_id":"quad-ops-9ha","type":"blocks","created_at":"2025-11-08T16:01:30.690989336-05:00","created_by":"daemon"},{"issue_id":"quad-ops-pd6","depends_on_id":"quad-ops-w84","type":"related","created_at":"2025-11-08T16:01:33.184813695-05:00","created_by":"daemon"}]}
{"id":"quad-ops-pei","content_hash":"625a15296c84bb94015963786585ccdb76c28d335575f80fbef970f463ace983","title":"sync command not honoring composeDir repository setting","description":"The sync command is not respecting the composeDir setting in the repository configuration.\n\nConfig shows:\n```\nrepositories:\n  - name: quad-ops-deploy\n    url: https://github.com/trly/quad-ops-deploy.git\n    composeDir: test/bdyvp22\n```\n\nWhen running `./quad-ops -u -v sync -f`, the sync appears to process compose files from the entire repository rather than just the configured `test/bdyvp22` subdirectory. This results in potentially processing unintended compose files and failing to respect the repository's directory structure configuration.","design":"## Root Cause Analysis\n\nThe sync command `handleSyncResult()` function correctly implements composeDir handling in `cmd/sync.go` lines 217-220:\n\n```go\nrepoPath := filepath.Join(app.Config.RepositoryDir, result.Repository.Name)\nif result.Repository.ComposeDir != \"\" {\n    repoPath = filepath.Join(repoPath, result.Repository.ComposeDir)\n}\nprojects, err := compose.ReadProjects(repoPath)\n```\n\nHowever, there are two issues preventing proper composeDir functionality:\n\n### Issue 1: Missing Validation Before Reading Projects\nThe code does NOT validate that the composeDir path actually exists BEFORE attempting to read projects. This can lead to:\n- Silently reading from the wrong directory (parent if composeDir doesn't exist)\n- Poor error messages to users\n\nWhile `compose.ReadProjects()` does validate the directory exists and return an error, there's NO pre-sync validation that the configured composeDir exists in the cloned repository.\n\n### Issue 2: No Pre-Sync Validation (Identical to doctor command)\nThe `doctor` command includes validation at lines 364-379 to check if composeDir exists, but the `sync` command has NO equivalent validation. This means:\n- Users don't get early warning if composeDir is misconfigured\n- Errors only appear during compose reading (which may fail with less helpful messages)\n- No consistent validation pattern across commands\n\n## Files Requiring Changes\n\n1. **cmd/sync.go** - handleSyncResult() method\n   - Add validation to check if composeDir path exists before calling compose.ReadProjects()\n   - Return clear error if path doesn't exist  \n   - Log debug info about which path is being scanned\n\n2. **cmd/sync_test.go** - Add test cases\n   - TestSyncCommand_WithComposeDir - basic composeDir functionality\n   - TestSyncCommand_WithComposeDirNotFound - error handling when composeDir doesn't exist\n   - TestSyncCommand_WithComposeDirAndCompose Files - verify correct subdirectory is scanned\n\n## Proposed Fix Implementation\n\n1. Add pre-validation in `handleSyncResult()` after building repoPath:\n   - Check if repoPath exists using FileSystem.Stat()\n   - Return error with helpful message if missing\n   - Log debug message showing the path being scanned\n\n2. Add tests to verify:\n   - Compose files in composeDir are processed (not parent directory)\n   - Error is returned if composeDir doesn't exist\n   - Error message guides user to check configuration","notes":"INVESTIGATION COMPLETE - Ready for implementation planning\n\nSimilar issue was previously fixed in quad-ops-b5m (validate command path handling). This is a parallel issue in the sync command that needs consistent validation pattern.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-11-09T12:58:50.350485724-05:00","updated_at":"2025-11-09T13:25:12.20823924-05:00","closed_at":"2025-11-09T13:25:12.20823924-05:00","source_repo":"."}
{"id":"quad-ops-pmj","content_hash":"255396584bbbb6aeb36837b49c8e87a1acf01c81a7953ade6c37684c4463c433","title":"Add tests for memory and CPU constraint rendering","description":"Write table-driven tests for systemd renderer to verify Memory, MemoryReservation, MemorySwap, and CPU constraint fields are correctly rendered to unit files. Tests should cover edge cases like zero values and mixed constraint scenarios.","acceptance_criteria":"- Tests for Memory= directive rendering\n- Tests for MemoryReservation= directive rendering\n- Tests for MemorySwap= directive rendering\n- Tests for CPUShares, CPUQuota, CPUPeriod via PodmanArgs\n- Tests for mixed constraints\n- All tests pass and provide \u003e90% coverage of addResources function","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-08T21:37:08.09997211-05:00","updated_at":"2025-11-08T21:39:49.984683493-05:00","closed_at":"2025-11-08T21:39:49.984683493-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-pmj","depends_on_id":"quad-ops-24q","type":"parent-child","created_at":"2025-11-08T21:37:08.104217176-05:00","created_by":"daemon"}]}
{"id":"quad-ops-pr4","content_hash":"759e36d3f80ac9c15a3f6448c55db0739a17c24a05c95e0dcbf9d552473b322e","title":"Investigate service startup failure on Linux: init-containers-web fails with unexpected state: failed","description":"The `./quad-ops -u up` command fails on Linux systems with the error: \\\"service init-containers-web failed to start: unexpected state: failed\\\". This appears to be a systemd integration issue where init containers are not properly configured as oneshot services.\n\nRoot cause: Init containers (created from `x-quad-ops-init` extension) are rendered as regular container units with `Restart=no`, but systemd requires oneshot services to have `Type=oneshot` and `RemainAfterExit=yes` to remain in \\\"active\\\" state after successful completion. Without these settings, init containers exit and become \\\"inactive\\\", preventing dependent services from starting.\n\nNeed to modify the systemd renderer in `internal/platform/systemd/renderer.go` to detect init containers (by name pattern containing \\\"-init-\\\") and add the appropriate systemd service configuration.","acceptance_criteria":"Running `./quad-ops -u up` on Linux systems successfully starts all services without errors, specifically the init-containers-web service should start without entering \"failed\" state.","notes":"Issue resolved. The problem was that multi-service-webapp container was still running and occupying port 8080 even after stopping the systemd service. The rootlessport process needed to be manually killed to free the port. After clearing the port conflict, init-containers-web started successfully.","status":"closed","priority":2,"issue_type":"bug","assignee":"trly","created_at":"2025-11-06T23:46:02.54965128-05:00","updated_at":"2025-11-06T23:57:54.467355247-05:00","closed_at":"2025-11-06T23:57:54.467367478-05:00","source_repo":"."}
{"id":"quad-ops-q12","content_hash":"910a2b825a389e3d35c16376440c1d9219b7b1b4e859b1f042f069c8068dd07a","title":"Add comprehensive tests for service network connections in containers","description":"Write tests to verify:\n1. systemd renderer adds Network= directives for each service-level network\n2. launchd renderer adds --network flags for each service-level network  \n3. Services with multiple networks are handled correctly\n4. External networks are skipped in both renderers\n5. Network ordering is consistent (sorted for determinism)\n\nTests should cover both single and multi-network scenarios like the immich example (default + infrastructure-proxy).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-08T16:53:50.99995072-05:00","updated_at":"2025-11-08T17:48:09.775676342-05:00","closed_at":"2025-11-08T17:48:09.775676342-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-q12","depends_on_id":"quad-ops-wib","type":"blocks","created_at":"2025-11-08T16:53:51.003631681-05:00","created_by":"daemon"}]}
{"id":"quad-ops-qgm","content_hash":"db9bf56fb4a68866e4255bccbd60093fade799babe1f1b507cd15b56c5f03956","title":"Implement CPU constraint rendering via PodmanArgs","description":"Update systemd renderer to output CPU constraints (CPUShares, CPUQuota, CPUPeriod) as PodmanArgs directives since Quadlet has no native CPU constraint fields. CPUQuota and CPUPeriod are in microseconds; convert appropriately for --cpu-quota and --cpu-period flags.","acceptance_criteria":"- CPUShares renders as PodmanArgs=--cpu-shares \u003cvalue\u003e\n- CPUQuota renders as PodmanArgs=--cpu-quota \u003cvalue\u003e\n- CPUPeriod renders as PodmanArgs=--cpu-period \u003cvalue\u003e\n- Empty/zero values are not rendered\n- Multiple PodmanArgs directives combine correctly\n- Tests pass","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-08T21:37:08.245943695-05:00","updated_at":"2025-11-08T21:40:01.011981575-05:00","closed_at":"2025-11-08T21:40:01.011981575-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-qgm","depends_on_id":"quad-ops-24q","type":"parent-child","created_at":"2025-11-08T21:37:08.25001651-05:00","created_by":"daemon"}]}
{"id":"quad-ops-rdm","content_hash":"eef68b365c618dcc94f0001ea5e1d038b56a25eddecb65e4514565bfaa8740e3","title":"Validation warnings for unimplemented Compose fields","description":"Some Compose fields are parsed but silently ignored with no warning, causing users to not know features aren't working.\n\nStandard Compose fields needing implementation: volumes_from, logging, stdin_open, tty\n\nSwarm-only fields to reject: deploy.placement, deploy.update_config, deploy.rollback_config, deploy.endpoint_mode, configs/secrets with driver field, ports with mode: ingress\n\nNote: sysctls and ulimits ARE supported by Quadlet (Sysctl= and Ulimit= directives)","design":"Add validation in cmd/validate.go:\n\n**Warnings for unimplemented standard fields:**\n- volumes_from (suggest named volumes instead)\n- logging.driver/options if custom drivers not in Podman's supported list\n- stdin_open, tty (interactive mode not practical in systemd units)\n\n**Errors for Swarm-only fields:**\n- deploy.placement.* (Swarm orchestration)\n- deploy.update_config, deploy.rollback_config (Swarm rolling updates)\n- deploy.endpoint_mode (Swarm service discovery)\n- deploy.mode: global or replicas \u003e 1 (multi-instance orchestration)\n- configs/secrets with driver field (Swarm centralized store)\n- ports with mode: ingress (Swarm load balancing)\n\nFormat:\nERROR: Swarm feature not supported: deploy.placement (use Kubernetes/Nomad for orchestration)\nWarning: service 'app' uses unsupported field 'volumes_from' - consider using named volumes instead\n\nNote: sysctls and ulimits should be implemented (Quadlet native support)","acceptance_criteria":"- Warnings emitted for unsupported fields\n- Warnings are helpful (suggest workarounds)\n- Validation doesn't fail (warnings only)\n- Test coverage for warning scenarios\n- README documents unsupported fields","notes":"Implementation plan prepared (see Amp thread). Ready for execution once approved.","status":"closed","priority":2,"issue_type":"task","assignee":"amp","created_at":"2025-11-09T16:40:17.280241-05:00","updated_at":"2025-11-09T23:00:28.875168-05:00","closed_at":"2025-11-09T23:00:28.875168-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-rdm","depends_on_id":"quad-ops-hlf","type":"parent-child","created_at":"2025-11-09T16:51:18.533704-05:00","created_by":"daemon"}]}
{"id":"quad-ops-rqe","content_hash":"a2e1291081451bb83038dfb0e2c594941db5d5cd15fa9c73bdb57871e60acf9f","title":"Missing bind mount options: z/Z relabel flags","description":"SELinux relabel flags (z/Z) for bind mounts not supported in current implementation.","design":"## Problem\nDocker Compose bind mounts support SELinux relabeling via `bind.selinux: z|Z` which controls SELinux context labeling. `z` = shared label (multiple containers), `Z` = private label (single container). This option is currently ignored during conversion.\n\n## Source Data\n- compose-spec library: `types.ServiceVolumeConfig.Bind.SELinux` (string: \"z\" | \"Z\")\n- Location: `internal/compose/spec_converter.go:convertVolumeMounts()`\n\n## Target Format\nQuadlet Volume= directive supports z/Z options:\n```\nVolume=/host/path:/container/path:z    # shared SELinux label\nVolume=/host/path:/container/path:Z    # private SELinux label\n```\n\n## Implementation Plan\n1. Update `internal/service/models.go`:\n   - Add `SELinux string` field to `BindOptions` struct (already exists, just needs to be populated)\n\n2. Update `internal/compose/spec_converter.go:convertVolumeMounts()`:\n   - For bind-type mounts, check `v.Bind != nil \u0026\u0026 v.Bind.SELinux != \"\"`\n   - Set `mount.BindOptions.SELinux = v.Bind.SELinux` \n   - Already captures Propagation, just add SELinux field handling\n\n3. Update `internal/platform/systemd/renderer.go:addMounts()`:\n   - When building mount string for bind mounts, check `m.BindOptions.SELinux`\n   - Append `:z` or `:Z` to mount string based on value\n\n4. Add test cases:\n   - `internal/compose/testdata/golden/` - add compose file with bind mount z/Z\n   - `internal/platform/systemd/renderer_test.go` - test Volume= with z and Z options","acceptance_criteria":"- z/Z options in bind mounts are preserved\n- Rendered correctly in Quadlet Volume= directive\n- SELinux relabeling works as expected","status":"closed","priority":3,"issue_type":"bug","created_at":"2025-11-09T13:44:34.795669-05:00","updated_at":"2025-11-09T16:03:50.735425-05:00","closed_at":"2025-11-09T16:03:50.735425-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-rqe","depends_on_id":"quad-ops-hlf","type":"parent-child","created_at":"2025-11-09T13:44:34.796066-05:00","created_by":"daemon"}]}
{"id":"quad-ops-s9l","content_hash":"8ee76ac798fea820efdd842ed9d1584a27f8d962c31f9e107404b8968142b7ca","title":"Fix init container volume mounting in spec converter","description":"Init containers defined via x-quad-ops-init extension need to inherit volumes from the main service to access shared data directories. Currently, init containers don't get volume mounts, causing failures when they try to write to shared volumes like /shared/data.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-06T23:51:14.6100226-05:00","updated_at":"2025-11-06T23:54:13.232121169-05:00","closed_at":"2025-11-06T23:54:13.232121169-05:00","source_repo":".","labels":["init-containers","spec-converter","volumes"]}
{"id":"quad-ops-sgd","content_hash":"22856d51040298b23f5dcbe6aea96e32fea36efb9f18c2ded4043c46f6ca3ef6","title":"issue with github workflow build.yml","description":"\nError: Failed to run: Error: Command failed: /home/runner/golangci-lint-2.6.1-linux-amd64/golangci-lint config verify\njsonschema:  does not validate with /additionalProperties: additional properties 'linters-settings' not allowed\nThe command is terminated due to an error: the configuration contains invalid elements\n, Error: Command failed: /home/runner/golangci-lint-2.6.1-linux-amd64/golangci-lint config verify\njsonschema:  does not validate with /additionalProperties: additional properties 'linters-settings' not allowed\nThe command is terminated due to an error: the configuration contains invalid elements\n\n    at genericNodeError (node:internal/errors:984:15)\n    at wrappedFn (node:internal/errors:538:14)\n    at ChildProcess.exithandler (node:child_process:422:12)\n    at ChildProcess.emit (node:events:524:28)\n    at maybeClose (node:internal/child_process:1104:16)\n    at ChildProcess._handle.onexit (node:internal/child_process:304:5)\nError: Command failed: /home/runner/golangci-lint-2.6.1-linux-amd64/golangci-lint config verify\njsonschema:  does not validate with /additionalProperties: additional properties 'linters-settings' not allowed","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-06T21:53:02.978723976-05:00","updated_at":"2025-11-06T21:54:17.737045479-05:00","closed_at":"2025-11-06T21:54:17.737045479-05:00","source_repo":"."}
{"id":"quad-ops-slm","content_hash":"0ae28aeac9514a36d3152c850e1c79f32735d3986b585a5ccdc87e9a99be00d6","title":"Implement x-podman-env-secrets extension support","description":"The multi-service example uses x-podman-env-secrets extension to map secrets to environment variables. This extension is used but not implemented.\n\nNeed to:\n- Process x-podman-env-secrets from project.Extensions in spec_converter.go\n- Add support for mapping secrets to environment variables in the service model\n- Ensure the renderer outputs appropriate Podman arguments or systemd environment setup\n\nExtension format:\n```yaml\nx-podman-env-secrets:\n  db_password: WORDPRESS_DB_PASSWORD\n```\n\nThis should make the secret available as an environment variable in the container.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-06T21:36:26.634415865-05:00","updated_at":"2025-11-06T21:45:44.413052281-05:00","closed_at":"2025-11-06T21:45:44.413052281-05:00","source_repo":"."}
{"id":"quad-ops-sly","content_hash":"db038d1f461028bba836f6914c2915d09743d301d204f22e049b70ff7afba8cc","title":"Emit extra host and DNS flags in launchd BuildPodmanArgs","description":"Update internal/platform/launchd/podmanargs.go to append --add-host, --dns, --dns-search, and --dns-opt arguments based on the populated service.Container fields. Leverage deterministic ordering to match converter output and satisfy newly added tests.","notes":"Implementation guidance:\n- When emitting --add-host and DNS-related flags, rely on alphabetically sorted order to match converter-provided slices (ensures deterministic output and satisfies parity tests).\n- Preserve existing behavior for other arguments; focus changes on extra host/DNS handling only.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-09T18:44:32.355078-05:00","updated_at":"2025-11-09T18:55:24.758998-05:00","closed_at":"2025-11-09T18:55:24.758998-05:00","source_repo":".","labels":["bugfix","launchd"],"dependencies":[{"issue_id":"quad-ops-sly","depends_on_id":"quad-ops-460","type":"blocks","created_at":"2025-11-09T18:44:32.35688-05:00","created_by":"daemon"}]}
{"id":"quad-ops-ts0","content_hash":"28f5d23295c692a82085be8105a6dc4db4543f6b60a79af3f0198d50dd7d622f","title":"Add dependency validation and cycle detection during spec conversion","description":"Extend validation in internal/service/validate.go to include cycle detection using the dependency graph. Add validation that all DependsOn services exist and there are no circular dependencies.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-06T23:26:34.951571807-05:00","updated_at":"2025-11-06T23:26:34.951571807-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-ts0","depends_on_id":"quad-ops-9y2","type":"parent-child","created_at":"2025-11-06T23:26:36.591633784-05:00","created_by":"daemon"}]}
{"id":"quad-ops-u4g","content_hash":"68f2db03dfbcc7c036bcdfb77a6932832796d851372f3ee6f9b7ac2086632cbb","title":"Add tests verifying unit_list uses deployed artifacts by default","description":"Add comprehensive tests to verify the fix for quad-ops-w84 and prevent regression.\n\nNeed platform-specific tests for Linux (systemd) and macOS (launchd). Need negative tests verifying RepositoryDir artifacts (raw docker-compose.yml, .git/) are NOT listed. Need end-to-end behavior tests that after sync renders units, unit list shows them. Need integration edge cases with multiple artifact types and permission errors.","acceptance_criteria":"Tests exist for both Linux (systemd) and macOS (launchd) platforms. Tests verify that QuadletDir artifacts are returned. Tests verify that RepositoryDir artifacts are NOT returned. Tests verify platform-specific filtering (.container, .plist) works. All tests pass with the fix applied. Test coverage for unit_list command increased.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-08T16:02:54.723729619-05:00","updated_at":"2025-11-09T10:23:33.807427269-05:00","closed_at":"2025-11-09T10:23:33.807427269-05:00","source_repo":".","labels":["testing","unit_list"]}
{"id":"quad-ops-usm","content_hash":"eed8032c35be39c24e9ae9ebdf345c86a4fc95ffd0e8d9165d5c02b5cbf862fc","title":"Document CI/CD workflow philosophy for quad-ops","description":"Clarify and document the CI/CD approach: build.yml validates on every commit, release.yaml rebuilds with GoReleaser on tags. Don't try to share artifacts across workflows.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-08T22:07:42.906409728-05:00","updated_at":"2025-11-08T22:07:42.906409728-05:00","source_repo":"."}
{"id":"quad-ops-vkf","content_hash":"d2c50bc3eb83274e576af5f60606d0891ed298eec6a730398b692bc4eebba2c8","title":"Privileged port 80/443 binding fails in rootless Podman","description":"## Environment Limitation (Not a Code Bug)\nServices trying to bind to privileged ports (\u003c 1024) fail in rootless Podman because the user lacks the capability to use low port numbers. This is a system/kernel configuration issue, not a quad-ops bug.\n\n### Actual Error\n```\nError: rootlessport cannot expose privileged port 80, you can add 'net.ipv4.ip_unprivileged_port_start=80' to /etc/sysctl.conf (currently 1024)\n```\n\n### Affected Services\n- infrastructure-reverse-proxy (ports 80, 443)\n- Any other services binding to privileged ports\n\n### Solutions (System Configuration)\n1. **Recommended**: Configure unprivileged port access:\n   ```bash\n   sudo sysctl net.ipv4.ip_unprivileged_port_start=80\n   sudo sysctl -w net.ipv4.ip_unprivileged_port_start=80  # permanent\n   echo 'net.ipv4.ip_unprivileged_port_start=80' | sudo tee -a /etc/sysctl.conf\n   ```\n\n2. **Alternative**: Use port forwarding (e.g., firewall NAT from 80→8080)\n\n3. **Not recommended**: Run Podman in privileged mode (security risk)\n\n### Action Items\n- Document this in INSTALLATION.md or setup guide\n- Add to troubleshooting section of README\n- Clarify that this is system/kernel config, not quad-ops issue","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-09T10:36:47.80967079-05:00","updated_at":"2025-11-09T12:31:55.281407967-05:00","closed_at":"2025-11-09T12:31:55.281407967-05:00","source_repo":"."}
{"id":"quad-ops-w25","content_hash":"063e5fb535afba77f651ac5c0d2648863c58b37b2ad755b45fea6542262502a1","title":"sync command requires --force to detect remote repo changes","description":"the sync command requires --force to be applied to actually compare and make updates, even if the repository was synced and new changes exist\n\n","acceptance_criteria":"./quad-ops sync -u should actually update if there are changes pulled from the remote and not require --force\n","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-07T01:09:07.289642171-05:00","updated_at":"2025-11-07T21:58:56.781784422-05:00","closed_at":"2025-11-07T21:58:56.781784422-05:00","source_repo":"."}
{"id":"quad-ops-w2q","content_hash":"c016a1e427d12ed7e182f96ee5bb01cd3ee0fc7767160c8ea149238b4aece16d","title":"unit list is not finding platform specific units that are managed","description":"[root@bdyvp22 ~]# quad-ops sync -v --force\nquad-ops using config: /etc/quad-ops/config.yaml\n\ntime=2025-11-07T01:10:27.422-05:00 level=DEBUG msg=\"Validating systemd availability\"\ntime=2025-11-07T01:10:27.429-05:00 level=DEBUG msg=\"Validating podman availability\"\ntime=2025-11-07T01:10:27.463-05:00 level=DEBUG msg=\"Validating podman-system-generator availability\"\ntime=2025-11-07T01:10:27.465-05:00 level=DEBUG msg=\"Initializing platform: systemd (Linux)\"\ntime=2025-11-07T01:10:27.465-05:00 level=DEBUG msg=\"Syncing repository\" name=quad-ops-deploy url=https://github.com/trly/quad-ops-deploy.git\ntime=2025-11-07T01:10:27.465-05:00 level=DEBUG msg=\"Syncing repository\" path=quad-ops-deploy\ntime=2025-11-07T01:10:27.465-05:00 level=DEBUG msg=\"Repository already exists, opening\" path=/var/lib/quad-ops/quad-ops-deploy\ntime=2025-11-07T01:10:27.465-05:00 level=DEBUG msg=\"Pulling latest changes from origin\"\ntime=2025-11-07T01:10:27.795-05:00 level=DEBUG msg=\"Repository is already up to date\"\ntime=2025-11-07T01:10:27.795-05:00 level=DEBUG msg=\"Repository synced successfully\" name=quad-ops-deploy changed=false commit=\"\"\ntime=2025-11-07T01:10:27.902-05:00 level=DEBUG msg=\"Processed compose project\" repo=quad-ops-deploy project=devops services=1\ntime=2025-11-07T01:10:27.902-05:00 level=DEBUG msg=\"Content hash comparison\" existing=7b969d95e6b6e217a0fb2670048bb100a139fd2180f331cbf5d50dd53ec32ed6 new=7b969d95e6b6e217a0fb2670048bb100a139fd2180f331cbf5d50dd53ec32ed6 path=/etc/containers/systemd/devops_gogs-data.volume\ntime=2025-11-07T01:10:27.902-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=devops_gogs-data.volume\ntime=2025-11-07T01:10:27.902-05:00 level=DEBUG msg=\"Content hash comparison\" existing=e84df50ab997fb0b278bff87f8b50ff433985383c6cdd60f242e47581f4c64ba new=e84df50ab997fb0b278bff87f8b50ff433985383c6cdd60f242e47581f4c64ba path=/etc/containers/systemd/devops_default.network\ntime=2025-11-07T01:10:27.902-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=devops_default.network\ntime=2025-11-07T01:10:27.902-05:00 level=DEBUG msg=\"Content hash comparison\" existing=5e1a307a1659354f2123a6fd6c4bd6a425bbff18a8ca7b04dee5a46e12aca7ab new=5e1a307a1659354f2123a6fd6c4bd6a425bbff18a8ca7b04dee5a46e12aca7ab path=/etc/containers/systemd/devops-gogs.container\ntime=2025-11-07T01:10:27.902-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=devops-gogs.container\ntime=2025-11-07T01:10:27.902-05:00 level=DEBUG msg=\"No artifact changes\" repo=quad-ops-deploy project=devops\ntime=2025-11-07T01:10:27.903-05:00 level=DEBUG msg=\"Processed compose project\" repo=quad-ops-deploy project=infrastructure services=3\ntime=2025-11-07T01:10:27.903-05:00 level=DEBUG msg=\"Content hash comparison\" existing=f3613709db30d81429eaee24f36b559f76b1658e32c162df56f18901dcc202bd new=f3613709db30d81429eaee24f36b559f76b1658e32c162df56f18901dcc202bd path=/etc/containers/systemd/infrastructure_authelia-data.volume\ntime=2025-11-07T01:10:27.903-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=infrastructure_authelia-data.volume\ntime=2025-11-07T01:10:27.903-05:00 level=DEBUG msg=\"Content hash comparison\" existing=5fda1f479c2e7cc14455575289f18bfb1f1201f4f80b151e5277e876f69b1db4 new=5fda1f479c2e7cc14455575289f18bfb1f1201f4f80b151e5277e876f69b1db4 path=/etc/containers/systemd/infrastructure_caddy-data.volume\ntime=2025-11-07T01:10:27.903-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=infrastructure_caddy-data.volume\ntime=2025-11-07T01:10:27.903-05:00 level=DEBUG msg=\"Content hash comparison\" existing=9f19346832616d95b9143d0f97e9309d32e70c6c2ae9d75f5d4e0b76e881f50a new=9f19346832616d95b9143d0f97e9309d32e70c6c2ae9d75f5d4e0b76e881f50a path=/etc/containers/systemd/infrastructure_caddy-config.volume\ntime=2025-11-07T01:10:27.903-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=infrastructure_caddy-config.volume\ntime=2025-11-07T01:10:27.903-05:00 level=DEBUG msg=\"Content hash comparison\" existing=6f12c4e077e0d396bfcd58afb612be7faf94d621a264eb159399f98d263fb410 new=6f12c4e077e0d396bfcd58afb612be7faf94d621a264eb159399f98d263fb410 path=/etc/containers/systemd/infrastructure_unifi-db-data.volume\ntime=2025-11-07T01:10:27.903-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=infrastructure_unifi-db-data.volume\ntime=2025-11-07T01:10:27.903-05:00 level=DEBUG msg=\"Content hash comparison\" existing=957d9b0d71e494dd7667145213b5dbbb29b666689c667ff0d72ae72bb006c11a new=957d9b0d71e494dd7667145213b5dbbb29b666689c667ff0d72ae72bb006c11a path=/etc/containers/systemd/infrastructure_unifi-config.volume\ntime=2025-11-07T01:10:27.903-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=infrastructure_unifi-config.volume\ntime=2025-11-07T01:10:27.903-05:00 level=DEBUG msg=\"Content hash comparison\" existing=22f86239d721d954f2d8a8c9bb8b19167ea0069d6f9d80bb06be4909aed5a8f9 new=22f86239d721d954f2d8a8c9bb8b19167ea0069d6f9d80bb06be4909aed5a8f9 path=/etc/containers/systemd/infrastructure_authelia.network\ntime=2025-11-07T01:10:27.903-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=infrastructure_authelia.network\ntime=2025-11-07T01:10:27.904-05:00 level=DEBUG msg=\"Content hash comparison\" existing=6c48fe70e8edc921991858558ef7f31698c3b58fb6954a481572ce4973974cc1 new=6c48fe70e8edc921991858558ef7f31698c3b58fb6954a481572ce4973974cc1 path=/etc/containers/systemd/infrastructure_default.network\ntime=2025-11-07T01:10:27.904-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=infrastructure_default.network\ntime=2025-11-07T01:10:27.904-05:00 level=DEBUG msg=\"Content hash comparison\" existing=241dd3545c75050911aecda0921b205d76645d42804e2381bcdbf708198086d9 new=241dd3545c75050911aecda0921b205d76645d42804e2381bcdbf708198086d9 path=/etc/containers/systemd/infrastructure_proxy.network\ntime=2025-11-07T01:10:27.904-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=infrastructure_proxy.network\ntime=2025-11-07T01:10:27.904-05:00 level=DEBUG msg=\"Content hash comparison\" existing=02aa2759a51f83da1e6d075df98ddf2c0627d62f2b5b4c2b35665fde1c74f722 new=02aa2759a51f83da1e6d075df98ddf2c0627d62f2b5b4c2b35665fde1c74f722 path=/etc/containers/systemd/infrastructure_unifi.network\ntime=2025-11-07T01:10:27.904-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=infrastructure_unifi.network\ntime=2025-11-07T01:10:27.904-05:00 level=DEBUG msg=\"Content hash comparison\" existing=6e117e4a86fe16b9c29f10928752f6799b0ae5a8c7f640e540a1a6c627610895 new=a82e73909344a4edc4464983669fce8cead4b867c10656607d7d10b7efafba27 path=/etc/containers/systemd/infrastructure-unifi-network-application.container\ntime=2025-11-07T01:10:27.927-05:00 level=DEBUG msg=\"Artifact written\" path=infrastructure-unifi-network-application.container hash=a82e73909344a4edc4464983669fce8cead4b867c10656607d7d10b7efafba27\ntime=2025-11-07T01:10:27.928-05:00 level=DEBUG msg=\"Content hash comparison\" existing=6f12c4e077e0d396bfcd58afb612be7faf94d621a264eb159399f98d263fb410 new=6f12c4e077e0d396bfcd58afb612be7faf94d621a264eb159399f98d263fb410 path=/etc/containers/systemd/infrastructure_unifi-db-data.volume\ntime=2025-11-07T01:10:27.928-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=infrastructure_unifi-db-data.volume\ntime=2025-11-07T01:10:27.928-05:00 level=DEBUG msg=\"Content hash comparison\" existing=957d9b0d71e494dd7667145213b5dbbb29b666689c667ff0d72ae72bb006c11a new=957d9b0d71e494dd7667145213b5dbbb29b666689c667ff0d72ae72bb006c11a path=/etc/containers/systemd/infrastructure_unifi-config.volume\ntime=2025-11-07T01:10:27.928-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=infrastructure_unifi-config.volume\ntime=2025-11-07T01:10:27.928-05:00 level=DEBUG msg=\"Content hash comparison\" existing=f3613709db30d81429eaee24f36b559f76b1658e32c162df56f18901dcc202bd new=f3613709db30d81429eaee24f36b559f76b1658e32c162df56f18901dcc202bd path=/etc/containers/systemd/infrastructure_authelia-data.volume\ntime=2025-11-07T01:10:27.928-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=infrastructure_authelia-data.volume\ntime=2025-11-07T01:10:27.928-05:00 level=DEBUG msg=\"Content hash comparison\" existing=5fda1f479c2e7cc14455575289f18bfb1f1201f4f80b151e5277e876f69b1db4 new=5fda1f479c2e7cc14455575289f18bfb1f1201f4f80b151e5277e876f69b1db4 path=/etc/containers/systemd/infrastructure_caddy-data.volume\ntime=2025-11-07T01:10:27.928-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=infrastructure_caddy-data.volume\ntime=2025-11-07T01:10:27.928-05:00 level=DEBUG msg=\"Content hash comparison\" existing=9f19346832616d95b9143d0f97e9309d32e70c6c2ae9d75f5d4e0b76e881f50a new=9f19346832616d95b9143d0f97e9309d32e70c6c2ae9d75f5d4e0b76e881f50a path=/etc/containers/systemd/infrastructure_caddy-config.volume\ntime=2025-11-07T01:10:27.928-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=infrastructure_caddy-config.volume\ntime=2025-11-07T01:10:27.928-05:00 level=DEBUG msg=\"Content hash comparison\" existing=22f86239d721d954f2d8a8c9bb8b19167ea0069d6f9d80bb06be4909aed5a8f9 new=22f86239d721d954f2d8a8c9bb8b19167ea0069d6f9d80bb06be4909aed5a8f9 path=/etc/containers/systemd/infrastructure_authelia.network\ntime=2025-11-07T01:10:27.928-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=infrastructure_authelia.network\ntime=2025-11-07T01:10:27.928-05:00 level=DEBUG msg=\"Content hash comparison\" existing=6c48fe70e8edc921991858558ef7f31698c3b58fb6954a481572ce4973974cc1 new=6c48fe70e8edc921991858558ef7f31698c3b58fb6954a481572ce4973974cc1 path=/etc/containers/systemd/infrastructure_default.network\ntime=2025-11-07T01:10:27.928-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=infrastructure_default.network\ntime=2025-11-07T01:10:27.928-05:00 level=DEBUG msg=\"Content hash comparison\" existing=241dd3545c75050911aecda0921b205d76645d42804e2381bcdbf708198086d9 new=241dd3545c75050911aecda0921b205d76645d42804e2381bcdbf708198086d9 path=/etc/containers/systemd/infrastructure_proxy.network\ntime=2025-11-07T01:10:27.928-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=infrastructure_proxy.network\ntime=2025-11-07T01:10:27.928-05:00 level=DEBUG msg=\"Content hash comparison\" existing=02aa2759a51f83da1e6d075df98ddf2c0627d62f2b5b4c2b35665fde1c74f722 new=02aa2759a51f83da1e6d075df98ddf2c0627d62f2b5b4c2b35665fde1c74f722 path=/etc/containers/systemd/infrastructure_unifi.network\ntime=2025-11-07T01:10:27.928-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=infrastructure_unifi.network\ntime=2025-11-07T01:10:27.928-05:00 level=DEBUG msg=\"Content hash comparison\" existing=dc7f6bac1bb5545e490c8d1794ae2c4e53956b6bb6aa4c812824922a276bed10 new=20c609428cf50015ee6ed84db6195f0391532feb43a56d26be1b3a8a438f9065 path=/etc/containers/systemd/infrastructure-unifi-db.container\ntime=2025-11-07T01:10:27.930-05:00 level=DEBUG msg=\"Artifact written\" path=infrastructure-unifi-db.container hash=20c609428cf50015ee6ed84db6195f0391532feb43a56d26be1b3a8a438f9065\ntime=2025-11-07T01:10:27.930-05:00 level=DEBUG msg=\"Content hash comparison\" existing=f3613709db30d81429eaee24f36b559f76b1658e32c162df56f18901dcc202bd new=f3613709db30d81429eaee24f36b559f76b1658e32c162df56f18901dcc202bd path=/etc/containers/systemd/infrastructure_authelia-data.volume\ntime=2025-11-07T01:10:27.930-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=infrastructure_authelia-data.volume\ntime=2025-11-07T01:10:27.930-05:00 level=DEBUG msg=\"Content hash comparison\" existing=5fda1f479c2e7cc14455575289f18bfb1f1201f4f80b151e5277e876f69b1db4 new=5fda1f479c2e7cc14455575289f18bfb1f1201f4f80b151e5277e876f69b1db4 path=/etc/containers/systemd/infrastructure_caddy-data.volume\ntime=2025-11-07T01:10:27.930-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=infrastructure_caddy-data.volume\ntime=2025-11-07T01:10:27.930-05:00 level=DEBUG msg=\"Content hash comparison\" existing=9f19346832616d95b9143d0f97e9309d32e70c6c2ae9d75f5d4e0b76e881f50a new=9f19346832616d95b9143d0f97e9309d32e70c6c2ae9d75f5d4e0b76e881f50a path=/etc/containers/systemd/infrastructure_caddy-config.volume\ntime=2025-11-07T01:10:27.930-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=infrastructure_caddy-config.volume\ntime=2025-11-07T01:10:27.930-05:00 level=DEBUG msg=\"Content hash comparison\" existing=6f12c4e077e0d396bfcd58afb612be7faf94d621a264eb159399f98d263fb410 new=6f12c4e077e0d396bfcd58afb612be7faf94d621a264eb159399f98d263fb410 path=/etc/containers/systemd/infrastructure_unifi-db-data.volume\ntime=2025-11-07T01:10:27.930-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=infrastructure_unifi-db-data.volume\ntime=2025-11-07T01:10:27.930-05:00 level=DEBUG msg=\"Content hash comparison\" existing=957d9b0d71e494dd7667145213b5dbbb29b666689c667ff0d72ae72bb006c11a new=957d9b0d71e494dd7667145213b5dbbb29b666689c667ff0d72ae72bb006c11a path=/etc/containers/systemd/infrastructure_unifi-config.volume\ntime=2025-11-07T01:10:27.930-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=infrastructure_unifi-config.volume\ntime=2025-11-07T01:10:27.930-05:00 level=DEBUG msg=\"Content hash comparison\" existing=22f86239d721d954f2d8a8c9bb8b19167ea0069d6f9d80bb06be4909aed5a8f9 new=22f86239d721d954f2d8a8c9bb8b19167ea0069d6f9d80bb06be4909aed5a8f9 path=/etc/containers/systemd/infrastructure_authelia.network\ntime=2025-11-07T01:10:27.930-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=infrastructure_authelia.network\ntime=2025-11-07T01:10:27.930-05:00 level=DEBUG msg=\"Content hash comparison\" existing=6c48fe70e8edc921991858558ef7f31698c3b58fb6954a481572ce4973974cc1 new=6c48fe70e8edc921991858558ef7f31698c3b58fb6954a481572ce4973974cc1 path=/etc/containers/systemd/infrastructure_default.network\ntime=2025-11-07T01:10:27.930-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=infrastructure_default.network\ntime=2025-11-07T01:10:27.930-05:00 level=DEBUG msg=\"Content hash comparison\" existing=241dd3545c75050911aecda0921b205d76645d42804e2381bcdbf708198086d9 new=241dd3545c75050911aecda0921b205d76645d42804e2381bcdbf708198086d9 path=/etc/containers/systemd/infrastructure_proxy.network\ntime=2025-11-07T01:10:27.930-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=infrastructure_proxy.network\ntime=2025-11-07T01:10:27.930-05:00 level=DEBUG msg=\"Content hash comparison\" existing=02aa2759a51f83da1e6d075df98ddf2c0627d62f2b5b4c2b35665fde1c74f722 new=02aa2759a51f83da1e6d075df98ddf2c0627d62f2b5b4c2b35665fde1c74f722 path=/etc/containers/systemd/infrastructure_unifi.network\ntime=2025-11-07T01:10:27.930-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=infrastructure_unifi.network\ntime=2025-11-07T01:10:27.930-05:00 level=DEBUG msg=\"Content hash comparison\" existing=349fd61155d61c8e776b8edb99f3e6077b21caf8b3f125074603c911daeb9c5b new=c5805a40920e0a4e074fa014d2da2141842e1d9609a1bf94962e1b924d424b3f path=/etc/containers/systemd/infrastructure-reverse-proxy.container\ntime=2025-11-07T01:10:27.932-05:00 level=DEBUG msg=\"Artifact written\" path=infrastructure-reverse-proxy.container hash=c5805a40920e0a4e074fa014d2da2141842e1d9609a1bf94962e1b924d424b3f\ntime=2025-11-07T01:10:27.932-05:00 level=INFO msg=\"Artifacts written\" repo=quad-ops-deploy project=infrastructure changed=3\ntime=2025-11-07T01:10:27.932-05:00 level=DEBUG msg=\"Processed compose project\" repo=quad-ops-deploy project=llm services=2\ntime=2025-11-07T01:10:27.932-05:00 level=DEBUG msg=\"Content hash comparison\" existing=4f560251bc04ffcf9769116536333da8a302e62ca3ab07183e6222cabe7b8434 new=4f560251bc04ffcf9769116536333da8a302e62ca3ab07183e6222cabe7b8434 path=/etc/containers/systemd/llm_ollama-data.volume\ntime=2025-11-07T01:10:27.932-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=llm_ollama-data.volume\ntime=2025-11-07T01:10:27.932-05:00 level=DEBUG msg=\"Content hash comparison\" existing=98a8cb75209a8a8f42db6eed00f17c148d990be612fb41abf9ca9be85799ca36 new=98a8cb75209a8a8f42db6eed00f17c148d990be612fb41abf9ca9be85799ca36 path=/etc/containers/systemd/llm_open-webui.volume\ntime=2025-11-07T01:10:27.932-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=llm_open-webui.volume\ntime=2025-11-07T01:10:27.932-05:00 level=DEBUG msg=\"Content hash comparison\" existing=e8a0b2ed6a931b502e7937e807f1ceeef9635fca75baac017a2ff52e3033aa4a new=e8a0b2ed6a931b502e7937e807f1ceeef9635fca75baac017a2ff52e3033aa4a path=/etc/containers/systemd/llm-ollama.container\ntime=2025-11-07T01:10:27.932-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=llm-ollama.container\ntime=2025-11-07T01:10:27.932-05:00 level=DEBUG msg=\"Content hash comparison\" existing=4f560251bc04ffcf9769116536333da8a302e62ca3ab07183e6222cabe7b8434 new=4f560251bc04ffcf9769116536333da8a302e62ca3ab07183e6222cabe7b8434 path=/etc/containers/systemd/llm_ollama-data.volume\ntime=2025-11-07T01:10:27.932-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=llm_ollama-data.volume\ntime=2025-11-07T01:10:27.932-05:00 level=DEBUG msg=\"Content hash comparison\" existing=98a8cb75209a8a8f42db6eed00f17c148d990be612fb41abf9ca9be85799ca36 new=98a8cb75209a8a8f42db6eed00f17c148d990be612fb41abf9ca9be85799ca36 path=/etc/containers/systemd/llm_open-webui.volume\ntime=2025-11-07T01:10:27.932-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=llm_open-webui.volume\ntime=2025-11-07T01:10:27.932-05:00 level=DEBUG msg=\"Content hash comparison\" existing=5004365365d11210fa4edfba8f7ce7b8a3654acbdeaae0cc9341fdb6b8fa9b4e new=5004365365d11210fa4edfba8f7ce7b8a3654acbdeaae0cc9341fdb6b8fa9b4e path=/etc/containers/systemd/llm-open-webui.container\ntime=2025-11-07T01:10:27.932-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=llm-open-webui.container\ntime=2025-11-07T01:10:27.932-05:00 level=DEBUG msg=\"No artifact changes\" repo=quad-ops-deploy project=llm\ntime=2025-11-07T01:10:27.933-05:00 level=DEBUG msg=\"Processed compose project\" repo=quad-ops-deploy project=media services=4\ntime=2025-11-07T01:10:27.933-05:00 level=DEBUG msg=\"Content hash comparison\" existing=05cb419411cca6e28e531cc78660d8c3c87364ccc5caf34677be7a14dd157990 new=05cb419411cca6e28e531cc78660d8c3c87364ccc5caf34677be7a14dd157990 path=/etc/containers/systemd/media_immich-model-cache.volume\ntime=2025-11-07T01:10:27.933-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=media_immich-model-cache.volume\ntime=2025-11-07T01:10:27.933-05:00 level=DEBUG msg=\"Content hash comparison\" existing=26e42cf21e09056b475bd06f517ad886fb0c43e0a5d0dbdb7249e6ede2333061 new=26e42cf21e09056b475bd06f517ad886fb0c43e0a5d0dbdb7249e6ede2333061 path=/etc/containers/systemd/media_immich-postgres-data.volume\ntime=2025-11-07T01:10:27.933-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=media_immich-postgres-data.volume\ntime=2025-11-07T01:10:27.933-05:00 level=DEBUG msg=\"Content hash comparison\" existing=9ecfeaeb087e46edaaad9b516fc589966d98bfcfeb67e09c6328969d0650e2f1 new=9ecfeaeb087e46edaaad9b516fc589966d98bfcfeb67e09c6328969d0650e2f1 path=/etc/containers/systemd/media_default.network\ntime=2025-11-07T01:10:27.933-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=media_default.network\ntime=2025-11-07T01:10:27.933-05:00 level=DEBUG msg=\"Content hash comparison\" existing=422f47ee9978068408b939812f4c969c7379a529f7e709c7e5826e8fd02ee507 new=422f47ee9978068408b939812f4c969c7379a529f7e709c7e5826e8fd02ee507 path=/etc/containers/systemd/media-immich-redis.container\ntime=2025-11-07T01:10:27.933-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=media-immich-redis.container\ntime=2025-11-07T01:10:27.933-05:00 level=DEBUG msg=\"Content hash comparison\" existing=05cb419411cca6e28e531cc78660d8c3c87364ccc5caf34677be7a14dd157990 new=05cb419411cca6e28e531cc78660d8c3c87364ccc5caf34677be7a14dd157990 path=/etc/containers/systemd/media_immich-model-cache.volume\ntime=2025-11-07T01:10:27.933-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=media_immich-model-cache.volume\ntime=2025-11-07T01:10:27.933-05:00 level=DEBUG msg=\"Content hash comparison\" existing=26e42cf21e09056b475bd06f517ad886fb0c43e0a5d0dbdb7249e6ede2333061 new=26e42cf21e09056b475bd06f517ad886fb0c43e0a5d0dbdb7249e6ede2333061 path=/etc/containers/systemd/media_immich-postgres-data.volume\ntime=2025-11-07T01:10:27.933-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=media_immich-postgres-data.volume\ntime=2025-11-07T01:10:27.933-05:00 level=DEBUG msg=\"Content hash comparison\" existing=9ecfeaeb087e46edaaad9b516fc589966d98bfcfeb67e09c6328969d0650e2f1 new=9ecfeaeb087e46edaaad9b516fc589966d98bfcfeb67e09c6328969d0650e2f1 path=/etc/containers/systemd/media_default.network\ntime=2025-11-07T01:10:27.933-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=media_default.network\ntime=2025-11-07T01:10:27.933-05:00 level=DEBUG msg=\"Content hash comparison\" existing=bed403a6ba0a58b6a679833e5484749bd4c8b4c8ea0e337a06382d981b97982a new=bed403a6ba0a58b6a679833e5484749bd4c8b4c8ea0e337a06382d981b97982a path=/etc/containers/systemd/media-immich-database.container\ntime=2025-11-07T01:10:27.933-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=media-immich-database.container\ntime=2025-11-07T01:10:27.933-05:00 level=DEBUG msg=\"Content hash comparison\" existing=05cb419411cca6e28e531cc78660d8c3c87364ccc5caf34677be7a14dd157990 new=05cb419411cca6e28e531cc78660d8c3c87364ccc5caf34677be7a14dd157990 path=/etc/containers/systemd/media_immich-model-cache.volume\ntime=2025-11-07T01:10:27.933-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=media_immich-model-cache.volume\ntime=2025-11-07T01:10:27.933-05:00 level=DEBUG msg=\"Content hash comparison\" existing=26e42cf21e09056b475bd06f517ad886fb0c43e0a5d0dbdb7249e6ede2333061 new=26e42cf21e09056b475bd06f517ad886fb0c43e0a5d0dbdb7249e6ede2333061 path=/etc/containers/systemd/media_immich-postgres-data.volume\ntime=2025-11-07T01:10:27.933-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=media_immich-postgres-data.volume\ntime=2025-11-07T01:10:27.933-05:00 level=DEBUG msg=\"Content hash comparison\" existing=9ecfeaeb087e46edaaad9b516fc589966d98bfcfeb67e09c6328969d0650e2f1 new=9ecfeaeb087e46edaaad9b516fc589966d98bfcfeb67e09c6328969d0650e2f1 path=/etc/containers/systemd/media_default.network\ntime=2025-11-07T01:10:27.933-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=media_default.network\ntime=2025-11-07T01:10:27.933-05:00 level=DEBUG msg=\"Content hash comparison\" existing=6ac3449a26ad0c4f144544722ae78d9f7f517017c4efe768787b7ef99566035b new=6ac3449a26ad0c4f144544722ae78d9f7f517017c4efe768787b7ef99566035b path=/etc/containers/systemd/media-immich-server.container\ntime=2025-11-07T01:10:27.933-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=media-immich-server.container\ntime=2025-11-07T01:10:27.933-05:00 level=DEBUG msg=\"Content hash comparison\" existing=05cb419411cca6e28e531cc78660d8c3c87364ccc5caf34677be7a14dd157990 new=05cb419411cca6e28e531cc78660d8c3c87364ccc5caf34677be7a14dd157990 path=/etc/containers/systemd/media_immich-model-cache.volume\ntime=2025-11-07T01:10:27.933-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=media_immich-model-cache.volume\ntime=2025-11-07T01:10:27.933-05:00 level=DEBUG msg=\"Content hash comparison\" existing=26e42cf21e09056b475bd06f517ad886fb0c43e0a5d0dbdb7249e6ede2333061 new=26e42cf21e09056b475bd06f517ad886fb0c43e0a5d0dbdb7249e6ede2333061 path=/etc/containers/systemd/media_immich-postgres-data.volume\ntime=2025-11-07T01:10:27.933-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=media_immich-postgres-data.volume\ntime=2025-11-07T01:10:27.934-05:00 level=DEBUG msg=\"Content hash comparison\" existing=9ecfeaeb087e46edaaad9b516fc589966d98bfcfeb67e09c6328969d0650e2f1 new=9ecfeaeb087e46edaaad9b516fc589966d98bfcfeb67e09c6328969d0650e2f1 path=/etc/containers/systemd/media_default.network\ntime=2025-11-07T01:10:27.934-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=media_default.network\ntime=2025-11-07T01:10:27.934-05:00 level=DEBUG msg=\"Content hash comparison\" existing=5f622ee876beee30e9d38f086f9901d92f9bb7b5e2d3d0f1705ffdf10b92a9d9 new=5f622ee876beee30e9d38f086f9901d92f9bb7b5e2d3d0f1705ffdf10b92a9d9 path=/etc/containers/systemd/media-immich-machine-learning.container\ntime=2025-11-07T01:10:27.934-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=media-immich-machine-learning.container\ntime=2025-11-07T01:10:27.934-05:00 level=DEBUG msg=\"No artifact changes\" repo=quad-ops-deploy project=media\ntime=2025-11-07T01:10:27.934-05:00 level=DEBUG msg=\"Processed compose project\" repo=quad-ops-deploy project=beszel services=2\ntime=2025-11-07T01:10:27.934-05:00 level=DEBUG msg=\"Content hash comparison\" existing=583de05f26a61f682d106856aaaece9d53c377cd052f3423885385c7a3bc0f91 new=583de05f26a61f682d106856aaaece9d53c377cd052f3423885385c7a3bc0f91 path=/etc/containers/systemd/beszel_beszel-data.volume\ntime=2025-11-07T01:10:27.934-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=beszel_beszel-data.volume\ntime=2025-11-07T01:10:27.934-05:00 level=DEBUG msg=\"Content hash comparison\" existing=75d1a5dccd7018654a21e462387ff383ada56db5175f9eac13a17aaad437741c new=75d1a5dccd7018654a21e462387ff383ada56db5175f9eac13a17aaad437741c path=/etc/containers/systemd/beszel_beszel-socket.volume\ntime=2025-11-07T01:10:27.934-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=beszel_beszel-socket.volume\ntime=2025-11-07T01:10:27.934-05:00 level=DEBUG msg=\"Content hash comparison\" existing=3d71ab71e48289d4b77424429341e67b64c4171b577e23256ef99b2dd80b9e62 new=3d71ab71e48289d4b77424429341e67b64c4171b577e23256ef99b2dd80b9e62 path=/etc/containers/systemd/beszel_default.network\ntime=2025-11-07T01:10:27.934-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=beszel_default.network\ntime=2025-11-07T01:10:27.934-05:00 level=DEBUG msg=\"Content hash comparison\" existing=cca2e84159912620fa63d7900fef0953b77dbb7998e1557bfa1154997d19b16d new=cca2e84159912620fa63d7900fef0953b77dbb7998e1557bfa1154997d19b16d path=/etc/containers/systemd/beszel-hub.container\ntime=2025-11-07T01:10:27.934-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=beszel-hub.container\ntime=2025-11-07T01:10:27.934-05:00 level=DEBUG msg=\"Content hash comparison\" existing=583de05f26a61f682d106856aaaece9d53c377cd052f3423885385c7a3bc0f91 new=583de05f26a61f682d106856aaaece9d53c377cd052f3423885385c7a3bc0f91 path=/etc/containers/systemd/beszel_beszel-data.volume\ntime=2025-11-07T01:10:27.934-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=beszel_beszel-data.volume\ntime=2025-11-07T01:10:27.934-05:00 level=DEBUG msg=\"Content hash comparison\" existing=75d1a5dccd7018654a21e462387ff383ada56db5175f9eac13a17aaad437741c new=75d1a5dccd7018654a21e462387ff383ada56db5175f9eac13a17aaad437741c path=/etc/containers/systemd/beszel_beszel-socket.volume\ntime=2025-11-07T01:10:27.934-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=beszel_beszel-socket.volume\ntime=2025-11-07T01:10:27.934-05:00 level=DEBUG msg=\"Content hash comparison\" existing=3d71ab71e48289d4b77424429341e67b64c4171b577e23256ef99b2dd80b9e62 new=3d71ab71e48289d4b77424429341e67b64c4171b577e23256ef99b2dd80b9e62 path=/etc/containers/systemd/beszel_default.network\ntime=2025-11-07T01:10:27.934-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=beszel_default.network\ntime=2025-11-07T01:10:27.934-05:00 level=DEBUG msg=\"Content hash comparison\" existing=5441be71ab7154088ca6058106781822d1b08124088c0dd77c397f71e1e70336 new=5441be71ab7154088ca6058106781822d1b08124088c0dd77c397f71e1e70336 path=/etc/containers/systemd/beszel-agent.container\ntime=2025-11-07T01:10:27.934-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=beszel-agent.container\ntime=2025-11-07T01:10:27.934-05:00 level=DEBUG msg=\"No artifact changes\" repo=quad-ops-deploy project=beszel\ntime=2025-11-07T01:10:27.934-05:00 level=DEBUG msg=\"Processed compose project\" repo=quad-ops-deploy project=dozzle services=1\ntime=2025-11-07T01:10:27.934-05:00 level=DEBUG msg=\"Content hash comparison\" existing=bc90c385951cd0f2e96cecdfaf6a6c7dc313224f7eeb2dfaf41ac75e9bc5ae44 new=bc90c385951cd0f2e96cecdfaf6a6c7dc313224f7eeb2dfaf41ac75e9bc5ae44 path=/etc/containers/systemd/dozzle-web.container\ntime=2025-11-07T01:10:27.934-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=dozzle-web.container\ntime=2025-11-07T01:10:27.934-05:00 level=DEBUG msg=\"No artifact changes\" repo=quad-ops-deploy project=dozzle\ntime=2025-11-07T01:10:27.935-05:00 level=DEBUG msg=\"Processed compose project\" repo=quad-ops-deploy project=scrutiny services=3\ntime=2025-11-07T01:10:27.935-05:00 level=DEBUG msg=\"Content hash comparison\" existing=cbb3146f77abbd98d872f853508fd63ee1bfdb8b6124c86064d2fd45dcb5e6bf new=cbb3146f77abbd98d872f853508fd63ee1bfdb8b6124c86064d2fd45dcb5e6bf path=/etc/containers/systemd/scrutiny_scrutiny-config.volume\ntime=2025-11-07T01:10:27.935-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=scrutiny_scrutiny-config.volume\ntime=2025-11-07T01:10:27.935-05:00 level=DEBUG msg=\"Content hash comparison\" existing=3d2450a4ed24d3f712330eb2e093b57a70d83ce22b75684549cca101731018c0 new=3d2450a4ed24d3f712330eb2e093b57a70d83ce22b75684549cca101731018c0 path=/etc/containers/systemd/scrutiny_scrutiny-influxdb.volume\ntime=2025-11-07T01:10:27.935-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=scrutiny_scrutiny-influxdb.volume\ntime=2025-11-07T01:10:27.935-05:00 level=DEBUG msg=\"Content hash comparison\" existing=8d430dd19599734a2f02f62d5396698b671246a0bda312c9069eb8cecb2c785c new=8d430dd19599734a2f02f62d5396698b671246a0bda312c9069eb8cecb2c785c path=/etc/containers/systemd/scrutiny_default.network\ntime=2025-11-07T01:10:27.935-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=scrutiny_default.network\ntime=2025-11-07T01:10:27.935-05:00 level=DEBUG msg=\"Content hash comparison\" existing=17d4fcacc146817a6157d158383f7fb89a213c3cfdcd1af807c5786625bf5b58 new=17d4fcacc146817a6157d158383f7fb89a213c3cfdcd1af807c5786625bf5b58 path=/etc/containers/systemd/scrutiny-web.container\ntime=2025-11-07T01:10:27.935-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=scrutiny-web.container\ntime=2025-11-07T01:10:27.935-05:00 level=DEBUG msg=\"Content hash comparison\" existing=cbb3146f77abbd98d872f853508fd63ee1bfdb8b6124c86064d2fd45dcb5e6bf new=cbb3146f77abbd98d872f853508fd63ee1bfdb8b6124c86064d2fd45dcb5e6bf path=/etc/containers/systemd/scrutiny_scrutiny-config.volume\ntime=2025-11-07T01:10:27.935-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=scrutiny_scrutiny-config.volume\ntime=2025-11-07T01:10:27.935-05:00 level=DEBUG msg=\"Content hash comparison\" existing=3d2450a4ed24d3f712330eb2e093b57a70d83ce22b75684549cca101731018c0 new=3d2450a4ed24d3f712330eb2e093b57a70d83ce22b75684549cca101731018c0 path=/etc/containers/systemd/scrutiny_scrutiny-influxdb.volume\ntime=2025-11-07T01:10:27.935-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=scrutiny_scrutiny-influxdb.volume\ntime=2025-11-07T01:10:27.935-05:00 level=DEBUG msg=\"Content hash comparison\" existing=8d430dd19599734a2f02f62d5396698b671246a0bda312c9069eb8cecb2c785c new=8d430dd19599734a2f02f62d5396698b671246a0bda312c9069eb8cecb2c785c path=/etc/containers/systemd/scrutiny_default.network\ntime=2025-11-07T01:10:27.935-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=scrutiny_default.network\ntime=2025-11-07T01:10:27.935-05:00 level=DEBUG msg=\"Content hash comparison\" existing=d4fc4113bfbc9890e5e49374d9e3dbce7635bc5af06f147c49452fdcc840f133 new=d4fc4113bfbc9890e5e49374d9e3dbce7635bc5af06f147c49452fdcc840f133 path=/etc/containers/systemd/scrutiny-collector.container\ntime=2025-11-07T01:10:27.935-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=scrutiny-collector.container\ntime=2025-11-07T01:10:27.935-05:00 level=DEBUG msg=\"Content hash comparison\" existing=cbb3146f77abbd98d872f853508fd63ee1bfdb8b6124c86064d2fd45dcb5e6bf new=cbb3146f77abbd98d872f853508fd63ee1bfdb8b6124c86064d2fd45dcb5e6bf path=/etc/containers/systemd/scrutiny_scrutiny-config.volume\ntime=2025-11-07T01:10:27.935-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=scrutiny_scrutiny-config.volume\ntime=2025-11-07T01:10:27.935-05:00 level=DEBUG msg=\"Content hash comparison\" existing=3d2450a4ed24d3f712330eb2e093b57a70d83ce22b75684549cca101731018c0 new=3d2450a4ed24d3f712330eb2e093b57a70d83ce22b75684549cca101731018c0 path=/etc/containers/systemd/scrutiny_scrutiny-influxdb.volume\ntime=2025-11-07T01:10:27.935-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=scrutiny_scrutiny-influxdb.volume\ntime=2025-11-07T01:10:27.935-05:00 level=DEBUG msg=\"Content hash comparison\" existing=8d430dd19599734a2f02f62d5396698b671246a0bda312c9069eb8cecb2c785c new=8d430dd19599734a2f02f62d5396698b671246a0bda312c9069eb8cecb2c785c path=/etc/containers/systemd/scrutiny_default.network\ntime=2025-11-07T01:10:27.935-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=scrutiny_default.network\ntime=2025-11-07T01:10:27.935-05:00 level=DEBUG msg=\"Content hash comparison\" existing=0625d5eb5c056d6655b9fc47720618906b5462bdf3273f02eff2a9c2ed9e008c new=0625d5eb5c056d6655b9fc47720618906b5462bdf3273f02eff2a9c2ed9e008c path=/etc/containers/systemd/scrutiny-influxdb.container\ntime=2025-11-07T01:10:27.935-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=scrutiny-influxdb.container\ntime=2025-11-07T01:10:27.935-05:00 level=DEBUG msg=\"No artifact changes\" repo=quad-ops-deploy project=scrutiny\ntime=2025-11-07T01:10:27.935-05:00 level=DEBUG msg=\"Processed compose project\" repo=quad-ops-deploy project=miniflux services=2\ntime=2025-11-07T01:10:27.936-05:00 level=DEBUG msg=\"Content hash comparison\" existing=cf6e14acc8357da96fa8908c8a64a4ea6b26df8ef4e0155aa383a89be8c1f904 new=cf6e14acc8357da96fa8908c8a64a4ea6b26df8ef4e0155aa383a89be8c1f904 path=/etc/containers/systemd/miniflux_db-data.volume\ntime=2025-11-07T01:10:27.936-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=miniflux_db-data.volume\ntime=2025-11-07T01:10:27.936-05:00 level=DEBUG msg=\"Content hash comparison\" existing=66405212cf1660b772fcd91d7b010c7fff5cbb3dc1c35ac0959ee63547158edc new=66405212cf1660b772fcd91d7b010c7fff5cbb3dc1c35ac0959ee63547158edc path=/etc/containers/systemd/miniflux_default.network\ntime=2025-11-07T01:10:27.936-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=miniflux_default.network\ntime=2025-11-07T01:10:27.936-05:00 level=DEBUG msg=\"Content hash comparison\" existing=eff137248dc314963bd490e7851e766e4749fb67a4fd4f0c3fe32cd72e32e315 new=eff137248dc314963bd490e7851e766e4749fb67a4fd4f0c3fe32cd72e32e315 path=/etc/containers/systemd/miniflux-db.container\ntime=2025-11-07T01:10:27.936-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=miniflux-db.container\ntime=2025-11-07T01:10:27.936-05:00 level=DEBUG msg=\"Content hash comparison\" existing=cf6e14acc8357da96fa8908c8a64a4ea6b26df8ef4e0155aa383a89be8c1f904 new=cf6e14acc8357da96fa8908c8a64a4ea6b26df8ef4e0155aa383a89be8c1f904 path=/etc/containers/systemd/miniflux_db-data.volume\ntime=2025-11-07T01:10:27.936-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=miniflux_db-data.volume\ntime=2025-11-07T01:10:27.936-05:00 level=DEBUG msg=\"Content hash comparison\" existing=66405212cf1660b772fcd91d7b010c7fff5cbb3dc1c35ac0959ee63547158edc new=66405212cf1660b772fcd91d7b010c7fff5cbb3dc1c35ac0959ee63547158edc path=/etc/containers/systemd/miniflux_default.network\ntime=2025-11-07T01:10:27.936-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=miniflux_default.network\ntime=2025-11-07T01:10:27.936-05:00 level=DEBUG msg=\"Content hash comparison\" existing=718135521d0e78d3187116ffea781df185f706277fb10d5541c419ba423eaf5b new=718135521d0e78d3187116ffea781df185f706277fb10d5541c419ba423eaf5b path=/etc/containers/systemd/miniflux-web.container\ntime=2025-11-07T01:10:27.936-05:00 level=DEBUG msg=\"Artifact unchanged, skipping\" path=miniflux-web.container\ntime=2025-11-07T01:10:27.936-05:00 level=DEBUG msg=\"No artifact changes\" repo=quad-ops-deploy project=miniflux\ntime=2025-11-07T01:10:27.936-05:00 level=INFO msg=\"Reloading service manager\"\ntime=2025-11-07T01:10:27.936-05:00 level=DEBUG msg=\"Reloading systemd daemon configuration\"\ntime=2025-11-07T01:10:27.936-05:00 level=DEBUG msg=\"Establishing system connection to systemd\"\ntime=2025-11-07T01:10:28.908-05:00 level=DEBUG msg=\"Successfully reloaded systemd daemon\"\ntime=2025-11-07T01:10:28.908-05:00 level=DEBUG msg=\"Restarting multiple services\" count=3\ntime=2025-11-07T01:10:28.990-05:00 level=DEBUG msg=\"No orphaned rootlessport processes found (pgrep exit code 1)\"\ntime=2025-11-07T01:10:28.990-05:00 level=DEBUG msg=\"Restarting service\" name=infrastructure-reverse-proxy\ntime=2025-11-07T01:10:28.990-05:00 level=DEBUG msg=\"Establishing system connection to systemd\"\ntime=2025-11-07T01:10:28.990-05:00 level=DEBUG msg=\"Restarting service\" name=infrastructure-unifi-network-application\ntime=2025-11-07T01:10:28.990-05:00 level=DEBUG msg=\"Establishing system connection to systemd\"\ntime=2025-11-07T01:10:28.990-05:00 level=DEBUG msg=\"Restarting service\" name=infrastructure-unifi-db\ntime=2025-11-07T01:10:28.990-05:00 level=DEBUG msg=\"Establishing system connection to systemd\"\ntime=2025-11-07T01:10:29.838-05:00 level=DEBUG msg=\"Successfully restarted service\" name=infrastructure-reverse-proxy\ntime=2025-11-07T01:10:34.153-05:00 level=DEBUG msg=\"Successfully restarted service\" name=infrastructure-unifi-db\ntime=2025-11-07T01:10:34.536-05:00 level=DEBUG msg=\"Successfully restarted service\" name=infrastructure-unifi-network-application\ntime=2025-11-07T01:10:34.536-05:00 level=DEBUG msg=\"Completed restarting services\" total=3 success=3 failed=0\ntime=2025-11-07T01:10:34.536-05:00 level=INFO msg=\"Service restarted\" service=infrastructure-unifi-network-application\ntime=2025-11-07T01:10:34.536-05:00 level=INFO msg=\"Service restarted\" service=infrastructure-reverse-proxy\ntime=2025-11-07T01:10:34.536-05:00 level=INFO msg=\"Service restarted\" service=infrastructure-unifi-db\n\n[root@bdyvp22 ~]# quad-ops unit list -v\nquad-ops using config: /etc/quad-ops/config.yaml\n\ntime=2025-11-07T01:10:45.481-05:00 level=DEBUG msg=\"Validating systemd availability\"\ntime=2025-11-07T01:10:45.488-05:00 level=DEBUG msg=\"Validating podman availability\"\ntime=2025-11-07T01:10:45.520-05:00 level=DEBUG msg=\"Validating podman-system-generator availability\"\ntime=2025-11-07T01:10:45.522-05:00 level=DEBUG msg=\"Listing artifacts from repository\"\ntime=2025-11-07T01:10:45.529-05:00 level=INFO msg=\"No deployed artifacts found\"\n\n[trly@bdyvp22 ~]$ sudo podman ps -a\n[sudo] password for trly:\nCONTAINER ID  IMAGE                                                                                                COMMAND               CREATED         STATUS                 PORTS                                                                                                                                                                                                       NAMES\n661fa4d491b9  docker.io/ollama/ollama:latest                                                                       serve                 21 hours ago    Up 21 hours            11434/tcp                                                                                                                                                                                                   llm-ollama\n1c2be9a3d4bb  ghcr.io/open-webui/open-webui:latest                                                                 bash start.sh         21 hours ago    Up 21 hours            8080/tcp                                                                                                                                                                                                    llm-open-webui\nf58cec69fb3c  docker.io/henrygd/beszel:latest                                                                      serve --http=0.0....  21 hours ago    Up 21 hours            8090/tcp                                                                                                                                                                                                    beszel-hub\n46ed7cafdabe  ghcr.io/immich-app/immich-machine-learning:v2.1.0                                                    python -m immich_...  21 hours ago    Up 21 hours                                                                                                                                                                                                                        media-immich-machine-learning\n8d42f47dc0cb  docker.io/valkey/valkey@sha256:facc1d2c3462975c34e10fccb167bfa92b0e0dbd992fc282c29a61c3243afb11      valkey-server         21 hours ago    Up 21 hours (healthy)  6379/tcp                                                                                                                                                                                                    media-immich-redis\n8c2a33ba7945  ghcr.io/immich-app/postgres@sha256:32324a2f41df5de9efe1af166b7008c3f55646f8d0e00d9550c16c9822366b4a  postgres -c confi...  21 hours ago    Up 21 hours            5432/tcp                                                                                                                                                                                                    media-immich-database\n493de8374947  docker.io/library/influxdb:2.2                                                                       influxd               21 hours ago    Up 21 hours (healthy)  8086/tcp                                                                                                                                                                                                    scrutiny-influxdb\n0aaac6fb0175  ghcr.io/analogj/scrutiny:master-collector                                                            /entrypoint-colle...  21 hours ago    Up 21 hours                                                                                                                                                                                                                        scrutiny-collector\nd12431da0eea  ghcr.io/trly/caddy:main                                                                              caddy run --confi...  21 hours ago    Up 21 hours            0.0.0.0:80-\u003e80/tcp, 0.0.0.0:443-\u003e443/tcp, 2019/tcp, 443/udp                                                                                                                                                 infrastructure-reverse-proxy\ncbadfde53532  docker.io/library/mongo:8                                                                            mongod                21 hours ago    Up 21 hours            27017/tcp                                                                                                                                                                                                   infrastructure-unifi-db\nd5143d0d151b  lscr.io/linuxserver/unifi-network-application:latest                                                                       21 hours ago    Up 21 hours            0.0.0.0:6789-\u003e6789/tcp, 0.0.0.0:8080-\u003e8080/tcp, 0.0.0.0:8843-\u003e8843/tcp, 0.0.0.0:8880-\u003e8880/tcp, 0.0.0.0:1900-\u003e1900/udp, 0.0.0.0:3478-\u003e3478/udp, 0.0.0.0:5514-\u003e5514/udp, 0.0.0.0:10001-\u003e10001/udp, 8443/tcp  infrastructure-unifi-network-application\nf7128578bd90  ghcr.io/immich-app/immich-server:v2.1.0                                                              start.sh              18 seconds ago  Up 18 seconds          127.0.0.1:2283-\u003e2283/tcp, 127.0.0.1:8081-8082-\u003e8081-8082/tcp                                                                                                                                                media-immich-server\n","notes":"ROOT CAUSE IDENTIFIED: RepoArtifactStore is initialized with cfg.RepositoryDir (/var/lib/quad-ops - where git repos are cloned), but unit list tries to list from there by default. Actual deployed artifacts are in cfg.QuadletDir (/etc/containers/systemd/). RepoArtifactStore scans raw git clones (Compose files) which don't match platform filters (.container, .network), returning empty list. The rendered artifact files only exist after sync writes them to QuadletDir. Fix: Make unit list default to using ArtifactStore (deployed dir) instead of RepoArtifactStore (git repo dir). See history/ROOT_CAUSE_ANALYSIS.md","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-07T01:11:27.273766288-05:00","updated_at":"2025-11-07T22:13:23.897176023-05:00","closed_at":"2025-11-07T22:13:23.897176023-05:00","source_repo":"."}
{"id":"quad-ops-w84","content_hash":"f1cf6e0ff203ac33349b5d827396ae15c44b2b49d88364125b1e8b7a0782aa9b","title":"unit list command uses wrong artifact directory on both platforms","description":"cmd/app.go (lines 72-73): unit list initializes ArtifactStore with cfg.RepositoryDir (git clone location) instead of cfg.QuadletDir (rendered platform-specific units).\n\nThis causes unit list to scan raw Compose files instead of rendered .service/.network/.volume files, returning empty results when platform-specific units exist.\n\nRendered units only exist in QuadletDir after sync writes them. RepoArtifactStore scans git clones which don't match platform filters (.container, .network, .service, .plist).\n\nFix: Make unit list default to using ArtifactStore pointing to cfg.QuadletDir (deployed directory) instead of RepoArtifactStore.","acceptance_criteria":"./quad-ops unit list should return all deployed platform-specific units from QuadletDir for both systemd and launchd","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-08T16:01:18.292203186-05:00","updated_at":"2025-11-08T16:13:55.849264467-05:00","closed_at":"2025-11-08T16:13:55.849264467-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-w84","depends_on_id":"quad-ops-a3j","type":"parent-child","created_at":"2025-11-08T16:02:58.84731813-05:00","created_by":"daemon"},{"issue_id":"quad-ops-w84","depends_on_id":"quad-ops-u4g","type":"parent-child","created_at":"2025-11-08T16:02:58.881900501-05:00","created_by":"daemon"},{"issue_id":"quad-ops-w84","depends_on_id":"quad-ops-h7w","type":"parent-child","created_at":"2025-11-08T16:02:58.91509316-05:00","created_by":"daemon"}]}
{"id":"quad-ops-wib","content_hash":"0152749e529a73d0a8e2e543e9127a14d01400dd1fe585fb33018739182ecf5f","title":"Add tests for service network declarations and DNS resolution","description":"Write comprehensive tests covering:\n1. SpecConverter correctly extracts service-level networks from compose files\n2. Services with multiple network declarations are converted properly\n3. systemd renderer generates correct --network flags for each service network\n4. launchd renderer generates correct --network flags for each service network\n5. Network unit file dependencies are set correctly\n6. Test with multi-network services like the immich example (default + infrastructure-proxy)\n\nTests should verify DNS resolution would work (services on same networks).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-08T15:58:06.880531913-05:00","updated_at":"2025-11-08T16:55:44.010617008-05:00","closed_at":"2025-11-08T16:55:44.010617008-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-wib","depends_on_id":"quad-ops-4pn","type":"blocks","created_at":"2025-11-08T15:58:06.885577397-05:00","created_by":"daemon"},{"issue_id":"quad-ops-wib","depends_on_id":"quad-ops-hak","type":"blocks","created_at":"2025-11-08T15:58:06.889157141-05:00","created_by":"daemon"}]}
{"id":"quad-ops-xd3","content_hash":"354754034cec321bfc91ca023474c54039f34ddfd6d587bb0cfb0264bb2a884c","title":"Test dependency handling across platforms","description":"Add comprehensive tests for dependency ordering on both platforms. Extend cmd/up_test.go, add launchd lifecycle tests, and create integration tests with multi-service compose files containing dependencies.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-06T23:26:45.293937957-05:00","updated_at":"2025-11-06T23:26:45.293937957-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-xd3","depends_on_id":"quad-ops-9y2","type":"parent-child","created_at":"2025-11-06T23:26:48.36698896-05:00","created_by":"daemon"}]}
{"id":"quad-ops-xgo","content_hash":"609cc7a2672a5c5639ee7888869db3cf75aad84f2136a2ce71cee56dbbe5af12","title":"Create missing Podman-systemd (Quadlet) documentation section","description":"The docs index references a 'Podman-systemd (Quadlet)' section that doesn't exist. Create this section to document:\n- Quadlet unit file formats and options\n- How quad-ops generates and manages Quadlet units\n- Platform-specific differences and limitations\n- Troubleshooting Quadlet-related issues\n- Links to official Podman Quadlet documentation","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-06T23:24:14.454650246-05:00","updated_at":"2025-11-06T23:24:14.454650246-05:00","source_repo":".","labels":["documentation","podman","quadlet","systemd"],"dependencies":[{"issue_id":"quad-ops-xgo","depends_on_id":"quad-ops-79g","type":"blocks","created_at":"2025-11-06T23:24:14.464388859-05:00","created_by":"daemon"}]}
{"id":"quad-ops-xmd","content_hash":"090513f4f6ec2a2f1b6fadcaddccc862dcf96e36e08ce73576e0ad26ae87f082","title":"Apply dependency formatting fix to launchd renderer","description":"The systemd renderer was fixed to handle dependency names with unit type suffixes (like .network, .volume). The launchd renderer may have similar issues when handling dependencies via buildLabel().\n\nNeed to:\n1. Review launchd/renderer.go buildLabel() function to understand how it formats dependency labels\n2. Apply the same logic to handle unit type suffixes correctly for macOS launchd plist files\n3. Add tests for launchd with dependencies that have unit type suffixes","acceptance_criteria":"Launchd renderer properly handles dependencies with unit type suffixes. Dependencies are formatted consistently with the systemd renderer. Tests confirm no malformed suffixes are generated.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-09T12:42:43.656748391-05:00","updated_at":"2025-11-09T12:42:43.656748391-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-xmd","depends_on_id":"quad-ops-m5f","type":"blocks","created_at":"2025-11-09T12:42:43.657520243-05:00","created_by":"daemon"}]}
{"id":"quad-ops-xqw","content_hash":"43b00a183cce00ddc9f400f01b368d67422cb254ac46c637ae13a8eb7fc13232","title":"Cross-platform parity: launchd missing extra_hosts, dns, devices, tmpfs options","description":"launchd renderer doesn't translate Container fields to podman CLI flags, causing features to work on systemd but fail silently on macOS.\n\nMissing in BuildPodmanArgs():\n- extra_hosts → --add-host\n- dns/dns_search/dns_opt → --dns, --dns-search, --dns-opt  \n- devices → --device\n- tmpfs long syntax → --tmpfs with size/mode options\n\nImpact: Same compose file behaves differently on Linux vs macOS","design":"File: internal/platform/launchd/podmanargs.go\n\nIn BuildPodmanArgs():\n1. Add --add-host for each Container.AddHost entry\n2. Add --dns for each Container.DNS entry\n3. Add --dns-search for each Container.DNSSearch entry\n4. Add --dns-opt for each Container.DNSOpt entry\n5. Add --device for each Container.Devices entry\n6. For tmpfs mounts with TmpfsOptions, build --tmpfs /path:size=X,mode=Y format\n\nAll Container fields are already populated by spec_converter; just need flag generation.","acceptance_criteria":"- extra_hosts works on macOS\n- dns/dns_search/dns_opt works on macOS\n- devices works on macOS\n- tmpfs size/mode options work on macOS\n- Test coverage for all flags","notes":"Implementation Plan drafted on 2025-11-09:\n1. Add failing launchd-specific tests covering --add-host/--dns/--dns-search/--dns-opt, --device, and tmpfs option rendering.\n2. Update BuildPodmanArgs to emit extra host and DNS flags using deterministic ordering.\n3. Render tmpfs mounts (including TmpfsOptions) via --tmpfs flags instead of generic -v entries.\n4. Run full suite, lint, and tidy helper naming once new behavior passes.\n\nScope remains confined to internal/platform/launchd podman argument building/tests; systemd renderer and lifecycle layers remain untouched.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-09T16:40:17.231577-05:00","updated_at":"2025-11-09T19:02:13.70352-05:00","closed_at":"2025-11-09T19:02:13.70352-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-xqw","depends_on_id":"quad-ops-hlf","type":"parent-child","created_at":"2025-11-09T16:51:18.500131-05:00","created_by":"daemon"},{"issue_id":"quad-ops-xqw","depends_on_id":"quad-ops-460","type":"parent-child","created_at":"2025-11-09T18:44:53.052034-05:00","created_by":"daemon"},{"issue_id":"quad-ops-xqw","depends_on_id":"quad-ops-sly","type":"parent-child","created_at":"2025-11-09T18:44:57.961955-05:00","created_by":"daemon"},{"issue_id":"quad-ops-xqw","depends_on_id":"quad-ops-4kk","type":"parent-child","created_at":"2025-11-09T18:45:14.878831-05:00","created_by":"daemon"}]}
{"id":"quad-ops-xru","content_hash":"b7042497c1bd6be3bcbecb80e4b1fc6cc61799297bbd8032e011c5f3198d8e29","title":"Missing volume mount options: nocopy flag","description":"Volume mount nocopy option not supported in current implementation.","design":"## Problem\nDocker Compose volumes support the `nocopy` option (via `volume.nocopy: true`) which prevents copying content from the container image to the volume on first mount. This option is currently ignored during conversion.\n\n## Source Data\n- compose-spec library: `types.ServiceVolumeConfig.Volume.NoCopy` (bool)\n- Location: `internal/compose/spec_converter.go:convertVolumeMounts()`\n\n## Target Format\nQuadlet Volume= directive supports `nocopy` option:\n```\nVolume=myvolume:/data:nocopy\n```\n\n## Implementation Plan\n1. Update `internal/service/models.go`:\n   - Add `NoCopy bool` field to `Mount` struct or add to `Options` map\n\n2. Update `internal/compose/spec_converter.go:convertVolumeMounts()`:\n   - Check `v.Volume != nil \u0026\u0026 v.Volume.NoCopy` for volume-type mounts\n   - Set the nocopy flag in the Mount struct\n\n3. Update `internal/platform/systemd/renderer.go:addMounts()`:\n   - When building mount string, append `:nocopy` option if set\n   - Only applies to volume-type mounts, not bind mounts\n\n4. Add test cases:\n   - `internal/compose/testdata/golden/` - add compose file with volume nocopy\n   - `internal/platform/systemd/renderer_test.go` - test Volume= with nocopy option","acceptance_criteria":"- nocopy option in volume mounts is preserved\n- Rendered correctly in Quadlet Volume= directive","status":"closed","priority":3,"issue_type":"bug","created_at":"2025-11-09T13:44:34.789316-05:00","updated_at":"2025-11-09T15:57:51.006339-05:00","closed_at":"2025-11-09T15:57:51.006339-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-xru","depends_on_id":"quad-ops-hlf","type":"parent-child","created_at":"2025-11-09T13:44:34.789745-05:00","created_by":"daemon"}]}
{"id":"quad-ops-y05","content_hash":"bad47d2c83a21a32558ff1619e8502938e00874ff40c88e0c33d754e9e7729be","title":"Configs with file/content sources not converted to bind mounts","description":"Compose configs with local sources (file, content, environment) are parsed but not converted to bind mounts.\n\nStandard Compose configs (NOT Swarm-specific) work via bind mounts:\n- file: ./config.txt → bind mount from file\n- content: \"data\" → write to temp file, bind mount\n- environment: VAR → read var, write to file, bind mount\n\nSwarm-only configs (external: true with driver) should be rejected in validation.\n\nImpact: Config-based configuration files ignored","design":"1. Parse configs in spec_converter.go:\n   - file source: Create bind mount from file path\n   - content source: Write to project temp dir, create bind mount\n   - environment source: Read env var, write to temp file, create bind mount\n   - external with driver: REJECT in validation (Swarm-only)\n\n2. Map ServiceConfigObjConfig to Mount:\n   - source → bind mount source path\n   - target → container path (default: /run/configs/\u003cname\u003e)\n   - uid/gid/mode → convert to mount options if supported\n\n3. Validation:\n   - Error if config has driver field (Swarm-only)\n   - Warn if external without local file reference\n\nReference: https://github.com/compose-spec/compose-spec/blob/main/08-configs.md","acceptance_criteria":"- Configs with file source create bind mounts\n- Configs with content source write file and bind mount\n- Configs with environment source read var and bind mount  \n- External configs with driver fail validation with clear error\n- Test coverage for config mounting\n- Secrets follow same pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-09T16:40:17.275033-05:00","updated_at":"2025-11-09T18:14:07.342942-05:00","closed_at":"2025-11-09T18:14:07.342942-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-y05","depends_on_id":"quad-ops-hlf","type":"parent-child","created_at":"2025-11-09T16:51:18.518647-05:00","created_by":"daemon"}]}
{"id":"quad-ops-yip","content_hash":"44adaaef9ba797f99f487286796dfe5f5f35994218b27676ebb9d8accf6ccf2a","title":"Missing device_cgroup_rules support for fine-grained device access","description":"Compose device_cgroup_rules not converted, preventing low-level cgroup device permissions.\n\nExample: 'c 13:* rmw' to allow all /dev/input/* devices","design":"1. Add DeviceCgroupRules []string field to service.Container\n2. Convert service.DeviceCgroupRules in spec_converter.go:convertContainer()\n3. Render as PodmanArgs=--device-cgroup-rule \u003crule\u003e on both platforms\n\nFormat: 'type major:minor permissions'\nExample: 'c 13:* rmw'","acceptance_criteria":"- device_cgroup_rules converts to Container.DeviceCgroupRules\n- Renders as --device-cgroup-rule flags\n- Multiple rules work correctly\n- Test coverage for device access scenarios","notes":"Verified Podman support (no native Quadlet directive):\n- podman run --device-cgroup-rule 'type major:minor permissions'\n\nImplementation: Use PodmanArgs on both platforms","status":"closed","priority":3,"issue_type":"bug","created_at":"2025-11-09T16:40:17.268431-05:00","updated_at":"2025-11-09T17:52:59.920321-05:00","closed_at":"2025-11-09T17:52:59.920321-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-yip","depends_on_id":"quad-ops-hlf","type":"parent-child","created_at":"2025-11-09T16:51:18.530145-05:00","created_by":"daemon"}]}
{"id":"quad-ops-yx7","content_hash":"a296e71c57dd8158ce37e58ca842c295c4295f6339f3bca43260c721117e1308","title":"Document systemd Quadlet generator requirements and setup","description":"Users deploying quad-ops need clear guidance on systemd Quadlet generator setup.\n\n## Missing Documentation\n1. **Generator installation**:\n   - What to install (podman package includes the generator)\n   - How to verify it's installed and working\n   - Systemd version requirements\n\n2. **Permissions**:\n   - Writing to /etc/containers/systemd requires root or proper user setup\n   - User-mode vs system-mode setup differences\n\n3. **Troubleshooting**:\n   - How to debug if generator isn't running\n   - How to manually check generated units\n   - How to verify Quadlet generator is in systemd's path\n\n4. **Timing/Delays**:\n   - Why there might be delays between writing files and services being available\n   - What happens if sync runs while generator is still processing\n\n## Deliverables\n- Update INSTALLATION.md with Quadlet generator setup\n- Add troubleshooting section to docs\n- Document systemd/Podman version compatibility","acceptance_criteria":"Add comprehensive documentation explaining Quadlet generator requirements, setup steps, and troubleshooting procedures. Ensure users understand the dependency on systemd generator availability.","status":"open","priority":1,"issue_type":"task","created_at":"2025-11-08T21:16:25.346460111-05:00","updated_at":"2025-11-08T21:16:25.346460111-05:00","source_repo":".","labels":["documentation","task"]}
{"id":"quad-ops-zow","content_hash":"d94eebc8228cf9ed1a5b0ec8353d2e132f0b4d399c8b99e508e5075ac33b8a1c","title":"Doc: network architecture and external network handling","description":"Document the network architecture and external network handling in the codebase.\n\nAdd to DESIGN.md or architecture docs:\n- How external networks are distinguished from project-local networks\n- Why external networks are NOT prefixed with project name\n- Use case: multiple projects sharing a single infrastructure network\n- The spec converter's role in resolving network references\n- How systemd/launchd renderers generate dependencies for networks\n\nThis helps future maintainers understand the network prefixing logic and why the fix for quad-ops-1sn was necessary.","status":"open","priority":4,"issue_type":"task","created_at":"2025-11-09T12:32:26.453181865-05:00","updated_at":"2025-11-09T12:32:26.453181865-05:00","source_repo":"."}
{"id":"quad-ops-zzc","content_hash":"e4b6ab02a159c81377008a1931e6dd9b7dff950c05b8eed7467e83e9ef06f23a","title":"Missing sysctls support for kernel parameter tuning","description":"Compose sysctls field not converted, preventing kernel parameter configuration for containers.\n\nCommon use case: net.ipv4.ip_forward=1 for routing containers\n\nQuadlet native support: Sysctl= directive","design":"1. Add Sysctls map[string]string field to service.Container (internal/service/models.go)\n2. Convert service.Sysctls in spec_converter.go:convertContainer()\n3. Render:\n   - systemd: Quadlet Sysctl= directive (native, one per line)\n   - launchd: --sysctl flag (one --sysctl per entry)\n\nQuadlet format:\n```\nSysctl=net.ipv4.ip_forward=1\nSysctl=net.ipv6.conf.all.forwarding=1\n```\n\nPodman format:\n```\n--sysctl net.ipv4.ip_forward=1 --sysctl net.ipv6.conf.all.forwarding=1\n```","acceptance_criteria":"- sysctls in compose converts to Container.Sysctls\n- Renders as Sysctl= on systemd (multiple lines)\n- Renders as --sysctl on launchd (multiple flags)\n- Test coverage for kernel parameter scenarios","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-09T16:46:01.318249-05:00","updated_at":"2025-11-09T17:42:57.212928-05:00","closed_at":"2025-11-09T17:42:57.212928-05:00","source_repo":".","dependencies":[{"issue_id":"quad-ops-zzc","depends_on_id":"quad-ops-hlf","type":"parent-child","created_at":"2025-11-09T16:51:18.523718-05:00","created_by":"daemon"}]}
